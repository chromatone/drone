<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Drone by Chromatone</title>
  <meta name="theme-color" content="black">
  <meta name="application-name" content="Drone">
  <meta name="author" content="Denis Starov">
  <meta name="creator" content="Chromatone">
  <meta name="description" content="Rich soundscape generator for music practice and meditation">
  <meta property="og:title" content="Chromatone Drone">
  <meta property="og:site_name" content="Chromatone Drone">
  <meta property="og:description" content="Rich soundscape generator for music practice and meditation">
  <meta property="og:image" content="/screen.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:alt" content="Chromatone Drone - rich soundscape generator">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:label1" content="Chromatone Drone">
  <meta name="twitter:label2" content="Drone">
  <meta name="twitter:site" content="@davay42">
  <meta name="twitter:creator" content="@davay42">
  <meta name="twitter:image:type" content="image/png">
  <meta name="twitter:image" content="/screen.png">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Drone">

  <link rel="icon" type="image/svg+xml" href="./logo.svg">
  <link rel="apple-touch-icon" href="./icon.png" sizes="512x512">

  <link rel="manifest" href="./manifest.json">

  <script defer src="https://stats.chromatone.center/script.js" data-website-id="5f20daa8-3866-42a6-a0e5-e66ebb70db0e"></script>

  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Eh(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const kt={},di=[],hs=()=>{},u1=()=>!1,Lc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Ah=n=>n.startsWith("onUpdate:"),Me=Object.assign,Nh=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},h1=Object.prototype.hasOwnProperty,Nt=(n,t)=>h1.call(n,t),ut=Array.isArray,fi=n=>qc(n)==="[object Map]",Hm=n=>qc(n)==="[object Set]",gt=n=>typeof n=="function",me=n=>typeof n=="string",Bs=n=>typeof n=="symbol",Kt=n=>n!==null&&typeof n=="object",Ym=n=>(Kt(n)||gt(n))&&gt(n.then)&&gt(n.catch),Xm=Object.prototype.toString,qc=n=>Xm.call(n),d1=n=>qc(n).slice(8,-1),Zm=n=>qc(n)==="[object Object]",kh=n=>me(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,mo=Eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bc=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},f1=/-(\w)/g,Ps=Bc(n=>n.replace(f1,(t,e)=>e?e.toUpperCase():"")),p1=/\B([A-Z])/g,fr=Bc(n=>n.replace(p1,"-$1").toLowerCase()),Km=Bc(n=>n.charAt(0).toUpperCase()+n.slice(1)),Zl=Bc(n=>n?`on${Km(n)}`:""),rn=(n,t)=>!Object.is(n,t),Kl=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},Jm=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},m1=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Rf;const Uc=()=>Rf||(Rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cs(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=me(s)?y1(s):cs(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(me(n)||Kt(n))return n}const g1=/;(?![^(]*\))/g,_1=/:([^]+)/,v1=/\/\*[^]*?\*\//g;function y1(n){const t={};return n.replace(v1,"").split(g1).forEach(e=>{if(e){const s=e.split(_1);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Oh(n){let t="";if(me(n))t=n;else if(ut(n))for(let e=0;e<n.length;e++){const s=Oh(n[e]);s&&(t+=s+" ")}else if(Kt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const b1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",w1=Eh(b1);function Qm(n){return!!n||n===""}const tg=n=>!!(n&&n.__v_isRef===!0),Ns=n=>me(n)?n:n==null?"":ut(n)||Kt(n)&&(n.toString===Xm||!gt(n.toString))?tg(n)?Ns(n.value):JSON.stringify(n,eg,2):String(n),eg=(n,t)=>tg(t)?eg(n,t.value):fi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r],i)=>(e[Jl(s,i)+" =>"]=r,e),{})}:Hm(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Jl(e))}:Bs(t)?Jl(t):Kt(t)&&!ut(t)&&!Zm(t)?String(t):t,Jl=(n,t="")=>{var e;return Bs(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ge;class T1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ge,!t&&Ge&&(this.index=(Ge.scopes||(Ge.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ge;try{return Ge=this,t()}finally{Ge=e}}}on(){Ge=this}off(){Ge=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Ih(){return Ge}function ng(n,t=!1){Ge&&Ge.cleanups.push(n)}let qt;const Ql=new WeakSet;class sg{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ge&&Ge.active&&Ge.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ql.has(this)&&(Ql.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ig(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Df(this),og(this);const t=qt,e=Wn;qt=this,Wn=!0;try{return this.fn()}finally{ag(this),qt=t,Wn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Dh(t);this.deps=this.depsTail=void 0,Df(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ql.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Iu(this)&&this.run()}get dirty(){return Iu(this)}}let rg=0,go,_o;function ig(n,t=!1){if(n.flags|=8,t){n.next=_o,_o=n;return}n.next=go,go=n}function Ph(){rg++}function Rh(){if(--rg>0)return;if(_o){let t=_o;for(_o=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;go;){let t=go;for(go=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function og(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ag(n){let t,e=n.depsTail,s=e;for(;s;){const r=s.prevDep;s.version===-1?(s===e&&(e=r),Dh(s),S1(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=t,n.depsTail=e}function Iu(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(cg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function cg(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ko))return;n.globalVersion=ko;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Iu(n)){n.flags&=-3;return}const e=qt,s=Wn;qt=n,Wn=!0;try{og(n);const r=n.fn(n._value);(t.version===0||rn(r,n._value))&&(n._value=r,t.version++)}catch(r){throw t.version++,r}finally{qt=e,Wn=s,ag(n),n.flags&=-3}}function Dh(n,t=!1){const{dep:e,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)Dh(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function S1(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Wn=!0;const lg=[];function pr(){lg.push(Wn),Wn=!1}function mr(){const n=lg.pop();Wn=n===void 0?!0:n}function Df(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=qt;qt=void 0;try{t()}finally{qt=e}}}let ko=0;class x1{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!qt||!Wn||qt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==qt)e=this.activeLink=new x1(qt,this),qt.deps?(e.prevDep=qt.depsTail,qt.depsTail.nextDep=e,qt.depsTail=e):qt.deps=qt.depsTail=e,ug(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=qt.depsTail,e.nextDep=void 0,qt.depsTail.nextDep=e,qt.depsTail=e,qt.deps===e&&(qt.deps=s)}return e}trigger(t){this.version++,ko++,this.notify(t)}notify(t){Ph();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Rh()}}}function ug(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)ug(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Pu=new WeakMap,Ar=Symbol(""),Ru=Symbol(""),Oo=Symbol("");function Ve(n,t,e){if(Wn&&qt){let s=Pu.get(n);s||Pu.set(n,s=new Map);let r=s.get(e);r||(s.set(e,r=new jc),r.map=s,r.key=e),r.track()}}function As(n,t,e,s,r,i){const o=Pu.get(n);if(!o){ko++;return}const a=c=>{c&&c.trigger()};if(Ph(),t==="clear")o.forEach(a);else{const c=ut(n),l=c&&kh(e);if(c&&e==="length"){const u=Number(s);o.forEach((h,d)=>{(d==="length"||d===Oo||!Bs(d)&&d>=u)&&a(h)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),l&&a(o.get(Oo)),t){case"add":c?l&&a(o.get("length")):(a(o.get(Ar)),fi(n)&&a(o.get(Ru)));break;case"delete":c||(a(o.get(Ar)),fi(n)&&a(o.get(Ru)));break;case"set":fi(n)&&a(o.get(Ar));break}}Rh()}function Xr(n){const t=At(n);return t===n?t:(Ve(t,"iterate",Oo),Nn(n)?t:t.map(Fe))}function $c(n){return Ve(n=At(n),"iterate",Oo),n}const M1={__proto__:null,[Symbol.iterator](){return tu(this,Symbol.iterator,Fe)},concat(...n){return Xr(this).concat(...n.map(t=>ut(t)?Xr(t):t))},entries(){return tu(this,"entries",n=>(n[1]=Fe(n[1]),n))},every(n,t){return Ss(this,"every",n,t,void 0,arguments)},filter(n,t){return Ss(this,"filter",n,t,e=>e.map(Fe),arguments)},find(n,t){return Ss(this,"find",n,t,Fe,arguments)},findIndex(n,t){return Ss(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Ss(this,"findLast",n,t,Fe,arguments)},findLastIndex(n,t){return Ss(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Ss(this,"forEach",n,t,void 0,arguments)},includes(...n){return eu(this,"includes",n)},indexOf(...n){return eu(this,"indexOf",n)},join(n){return Xr(this).join(n)},lastIndexOf(...n){return eu(this,"lastIndexOf",n)},map(n,t){return Ss(this,"map",n,t,void 0,arguments)},pop(){return no(this,"pop")},push(...n){return no(this,"push",n)},reduce(n,...t){return Vf(this,"reduce",n,t)},reduceRight(n,...t){return Vf(this,"reduceRight",n,t)},shift(){return no(this,"shift")},some(n,t){return Ss(this,"some",n,t,void 0,arguments)},splice(...n){return no(this,"splice",n)},toReversed(){return Xr(this).toReversed()},toSorted(n){return Xr(this).toSorted(n)},toSpliced(...n){return Xr(this).toSpliced(...n)},unshift(...n){return no(this,"unshift",n)},values(){return tu(this,"values",Fe)}};function tu(n,t,e){const s=$c(n),r=s[t]();return s!==n&&!Nn(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=e(i.value)),i}),r}const C1=Array.prototype;function Ss(n,t,e,s,r,i){const o=$c(n),a=o!==n&&!Nn(n),c=o[t];if(c!==C1[t]){const h=c.apply(n,i);return a?Fe(h):h}let l=e;o!==n&&(a?l=function(h,d){return e.call(this,Fe(h),d,n)}:e.length>2&&(l=function(h,d){return e.call(this,h,d,n)}));const u=c.call(o,l,s);return a&&r?r(u):u}function Vf(n,t,e,s){const r=$c(n);let i=e;return r!==n&&(Nn(n)?e.length>3&&(i=function(o,a,c){return e.call(this,o,a,c,n)}):i=function(o,a,c){return e.call(this,o,Fe(a),c,n)}),r[t](i,...s)}function eu(n,t,e){const s=At(n);Ve(s,"iterate",Oo);const r=s[t](...e);return(r===-1||r===!1)&&Lh(e[0])?(e[0]=At(e[0]),s[t](...e)):r}function no(n,t,e=[]){pr(),Ph();const s=At(n)[t].apply(n,e);return Rh(),mr(),s}const E1=Eh("__proto__,__v_isRef,__isVue"),hg=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Bs));function A1(n){Bs(n)||(n=String(n));const t=At(this);return Ve(t,"has",n),t.hasOwnProperty(n)}class dg{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){const r=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return i;if(e==="__v_raw")return s===(r?i?L1:gg:i?mg:pg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=ut(t);if(!r){let c;if(o&&(c=M1[e]))return c;if(e==="hasOwnProperty")return A1}const a=Reflect.get(t,e,Ae(t)?t:s);return(Bs(e)?hg.has(e):E1(e))||(r||Ve(t,"get",e),i)?a:Ae(a)?o&&kh(e)?a:a.value:Kt(a)?r?qi(a):Jt(a):a}}class fg extends dg{constructor(t=!1){super(!1,t)}set(t,e,s,r){let i=t[e];if(!this._isShallow){const c=Rs(i);if(!Nn(s)&&!Rs(s)&&(i=At(i),s=At(s)),!ut(t)&&Ae(i)&&!Ae(s))return c?!1:(i.value=s,!0)}const o=ut(t)&&kh(e)?Number(e)<t.length:Nt(t,e),a=Reflect.set(t,e,s,Ae(t)?t:r);return t===At(r)&&(o?rn(s,i)&&As(t,"set",e,s):As(t,"add",e,s)),a}deleteProperty(t,e){const s=Nt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&s&&As(t,"delete",e,void 0),r}has(t,e){const s=Reflect.has(t,e);return(!Bs(e)||!hg.has(e))&&Ve(t,"has",e),s}ownKeys(t){return Ve(t,"iterate",ut(t)?"length":Ar),Reflect.ownKeys(t)}}class N1 extends dg{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const k1=new fg,O1=new N1,I1=new fg(!0);const Du=n=>n,ya=n=>Reflect.getPrototypeOf(n);function P1(n,t,e){return function(...s){const r=this.__v_raw,i=At(r),o=fi(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=e?Du:t?Vu:Fe;return!t&&Ve(i,"iterate",c?Ru:Ar),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ba(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function R1(n,t){const e={get(r){const i=this.__v_raw,o=At(i),a=At(r);n||(rn(r,a)&&Ve(o,"get",r),Ve(o,"get",a));const{has:c}=ya(o),l=t?Du:n?Vu:Fe;if(c.call(o,r))return l(i.get(r));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&Ve(At(r),"iterate",Ar),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=At(i),a=At(r);return n||(rn(r,a)&&Ve(o,"has",r),Ve(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=At(a),l=t?Du:n?Vu:Fe;return!n&&Ve(c,"iterate",Ar),a.forEach((u,h)=>r.call(i,l(u),l(h),o))}};return Me(e,n?{add:ba("add"),set:ba("set"),delete:ba("delete"),clear:ba("clear")}:{add(r){!t&&!Nn(r)&&!Rs(r)&&(r=At(r));const i=At(this);return ya(i).has.call(i,r)||(i.add(r),As(i,"add",r,r)),this},set(r,i){!t&&!Nn(i)&&!Rs(i)&&(i=At(i));const o=At(this),{has:a,get:c}=ya(o);let l=a.call(o,r);l||(r=At(r),l=a.call(o,r));const u=c.call(o,r);return o.set(r,i),l?rn(i,u)&&As(o,"set",r,i):As(o,"add",r,i),this},delete(r){const i=At(this),{has:o,get:a}=ya(i);let c=o.call(i,r);c||(r=At(r),c=o.call(i,r)),a&&a.call(i,r);const l=i.delete(r);return c&&As(i,"delete",r,void 0),l},clear(){const r=At(this),i=r.size!==0,o=r.clear();return i&&As(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=P1(r,n,t)}),e}function Vh(n,t){const e=R1(n,t);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(Nt(e,r)&&r in s?e:s,r,i)}const D1={get:Vh(!1,!1)},V1={get:Vh(!1,!0)},F1={get:Vh(!0,!1)};const pg=new WeakMap,mg=new WeakMap,gg=new WeakMap,L1=new WeakMap;function q1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function B1(n){return n.__v_skip||!Object.isExtensible(n)?0:q1(d1(n))}function Jt(n){return Rs(n)?n:Fh(n,!1,k1,D1,pg)}function Zn(n){return Fh(n,!1,I1,V1,mg)}function qi(n){return Fh(n,!0,O1,F1,gg)}function Fh(n,t,e,s,r){if(!Kt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=B1(n);if(o===0)return n;const a=new Proxy(n,o===2?s:e);return r.set(n,a),a}function pi(n){return Rs(n)?pi(n.__v_raw):!!(n&&n.__v_isReactive)}function Rs(n){return!!(n&&n.__v_isReadonly)}function Nn(n){return!!(n&&n.__v_isShallow)}function Lh(n){return n?!!n.__v_raw:!1}function At(n){const t=n&&n.__v_raw;return t?At(t):n}function U1(n){return!Nt(n,"__v_skip")&&Object.isExtensible(n)&&Jm(n,"__v_skip",!0),n}const Fe=n=>Kt(n)?Jt(n):n,Vu=n=>Kt(n)?qi(n):n;function Ae(n){return n?n.__v_isRef===!0:!1}function ge(n){return vg(n,!1)}function _g(n){return vg(n,!0)}function vg(n,t){return Ae(n)?n:new j1(n,t)}class j1{constructor(t,e){this.dep=new jc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:At(t),this._value=e?t:Fe(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Nn(t)||Rs(t);t=s?t:At(t),rn(t,e)&&(this._rawValue=t,this._value=s?t:Fe(t),this.dep.trigger())}}function vt(n){return Ae(n)?n.value:n}const $1={get:(n,t,e)=>t==="__v_raw"?n:vt(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return Ae(r)&&!Ae(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function yg(n){return pi(n)?n:new Proxy(n,$1)}class W1{constructor(t){this.__v_isRef=!0,this._value=void 0;const e=this.dep=new jc,{get:s,set:r}=t(e.track.bind(e),e.trigger.bind(e));this._get=s,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function G1(n){return new W1(n)}class z1{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new jc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ko-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&qt!==this)return ig(this,!0),!0}get value(){const t=this.dep.track();return cg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function H1(n,t,e=!1){let s,r;return gt(n)?s=n:(s=n.get,r=n.set),new z1(s,r,e)}const wa={},Ja=new WeakMap;let xr;function Y1(n,t=!1,e=xr){if(e){let s=Ja.get(e);s||Ja.set(e,s=[]),s.push(n)}}function X1(n,t,e=kt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=e,l=T=>r?T:Nn(T)||r===!1||r===0?nr(T,1):nr(T);let u,h,d,f,p=!1,m=!1;if(Ae(n)?(h=()=>n.value,p=Nn(n)):pi(n)?(h=()=>l(n),p=!0):ut(n)?(m=!0,p=n.some(T=>pi(T)||Nn(T)),h=()=>n.map(T=>{if(Ae(T))return T.value;if(pi(T))return l(T);if(gt(T))return c?c(T,2):T()})):gt(n)?t?h=c?()=>c(n,2):n:h=()=>{if(d){pr();try{d()}finally{mr()}}const T=xr;xr=u;try{return c?c(n,3,[f]):n(f)}finally{xr=T}}:h=hs,t&&r){const T=h,_=r===!0?1/0:r;h=()=>nr(T(),_)}const g=Ih(),v=()=>{u.stop(),g&&Nh(g.effects,u)};if(i&&t){const T=t;t=(..._)=>{T(..._),v()}}let w=m?new Array(n.length).fill(wa):wa;const x=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(t){const _=u.run();if(r||p||(m?_.some((b,y)=>rn(b,w[y])):rn(_,w))){d&&d();const b=xr;xr=u;try{const y=[_,w===wa?void 0:m&&w[0]===wa?[]:w,f];c?c(t,3,y):t(...y),w=_}finally{xr=b}}}else u.run()};return a&&a(x),u=new sg(h),u.scheduler=o?()=>o(x,!1):x,f=T=>Y1(T,!1,u),d=u.onStop=()=>{const T=Ja.get(u);if(T){if(c)c(T,4);else for(const _ of T)_();Ja.delete(u)}},t?s?x(!0):w=u.run():o?o(x.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function nr(n,t=1/0,e){if(t<=0||!Kt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,Ae(n))nr(n.value,t,e);else if(ut(n))for(let s=0;s<n.length;s++)nr(n[s],t,e);else if(Hm(n)||fi(n))n.forEach(s=>{nr(s,t,e)});else if(Zm(n)){for(const s in n)nr(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&nr(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zo(n,t,e,s){try{return s?n(...s):n()}catch(r){Wc(r,t,e)}}function fs(n,t,e,s){if(gt(n)){const r=zo(n,t,e,s);return r&&Ym(r)&&r.catch(i=>{Wc(i,t,e)}),r}if(ut(n)){const r=[];for(let i=0;i<n.length;i++)r.push(fs(n[i],t,e,s));return r}}function Wc(n,t,e,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||kt;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,c,l)===!1)return}a=a.parent}if(i){pr(),zo(i,null,10,[n,c,l]),mr();return}}Z1(n,e,r,s,o)}function Z1(n,t,e,s=!0,r=!1){if(r)throw n;console.error(n)}const ze=[];let os=-1;const mi=[];let Js=null,Jr=0;const bg=Promise.resolve();let Qa=null;function Bi(n){const t=Qa||bg;return n?t.then(this?n.bind(this):n):t}function K1(n){let t=os+1,e=ze.length;for(;t<e;){const s=t+e>>>1,r=ze[s],i=Io(r);i<n||i===n&&r.flags&2?t=s+1:e=s}return t}function qh(n){if(!(n.flags&1)){const t=Io(n),e=ze[ze.length-1];!e||!(n.flags&2)&&t>=Io(e)?ze.push(n):ze.splice(K1(t),0,n),n.flags|=1,wg()}}function wg(){Qa||(Qa=bg.then(Sg))}function J1(n){ut(n)?mi.push(...n):Js&&n.id===-1?Js.splice(Jr+1,0,n):n.flags&1||(mi.push(n),n.flags|=1),wg()}function Ff(n,t,e=os+1){for(;e<ze.length;e++){const s=ze[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;ze.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Tg(n){if(mi.length){const t=[...new Set(mi)].sort((e,s)=>Io(e)-Io(s));if(mi.length=0,Js){Js.push(...t);return}for(Js=t,Jr=0;Jr<Js.length;Jr++){const e=Js[Jr];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Js=null,Jr=0}}const Io=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Sg(n){try{for(os=0;os<ze.length;os++){const t=ze[os];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;os<ze.length;os++){const t=ze[os];t&&(t.flags&=-2)}os=-1,ze.length=0,Tg(),Qa=null,(ze.length||mi.length)&&Sg()}}let Ze=null,xg=null;function tc(n){const t=Ze;return Ze=n,xg=n&&n.type.__scopeId||null,t}function Q1(n,t=Ze,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&Wf(-1);const i=tc(t);let o;try{o=n(...r)}finally{tc(i),s._d&&Wf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Tr(n,t,e,s){const r=n.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(pr(),fs(c,e,8,[n.el,a,n,t]),mr())}}const tb=Symbol("_vte"),eb=n=>n.__isTeleport;function Bh(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Bh(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function Mg(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Fu(n,t,e,s,r=!1){if(ut(n)){n.forEach((p,m)=>Fu(p,t&&(ut(t)?t[m]:t),e,s,r));return}if(gi(s)&&!r)return;const i=s.shapeFlag&4?Hh(s.component):s.el,o=r?null:i,{i:a,r:c}=n,l=t&&t.r,u=a.refs===kt?a.refs={}:a.refs,h=a.setupState,d=At(h),f=h===kt?()=>!1:p=>Nt(d,p);if(l!=null&&l!==c&&(me(l)?(u[l]=null,f(l)&&(h[l]=null)):Ae(l)&&(l.value=null)),gt(c))zo(c,a,12,[o,u]);else{const p=me(c),m=Ae(c);if(p||m){const g=()=>{if(n.f){const v=p?f(c)?h[c]:u[c]:c.value;r?ut(v)&&Nh(v,i):ut(v)?v.includes(i)||v.push(i):p?(u[c]=[i],f(c)&&(h[c]=u[c])):(c.value=[i],n.k&&(u[n.k]=c.value))}else p?(u[c]=o,f(c)&&(h[c]=o)):m&&(c.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,gn(g,e)):g()}}}Uc().requestIdleCallback;Uc().cancelIdleCallback;const gi=n=>!!n.type.__asyncLoader,Cg=n=>n.type.__isKeepAlive;function nb(n,t){Eg(n,"a",t)}function sb(n,t){Eg(n,"da",t)}function Eg(n,t,e=Le){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Gc(t,s,e),e){let r=e.parent;for(;r&&r.parent;)Cg(r.parent.vnode)&&rb(s,t,e,r),r=r.parent}}function rb(n,t,e,s){const r=Gc(t,n,s,!0);Uh(()=>{Nh(s[t],r)},e)}function Gc(n,t,e=Le,s=!1){if(e){const r=e[n]||(e[n]=[]),i=t.__weh||(t.__weh=(...o)=>{pr();const a=Ho(e),c=fs(t,e,n,o);return a(),mr(),c});return s?r.unshift(i):r.push(i),i}}const Us=n=>(t,e=Le)=>{(!Ro||n==="sp")&&Gc(n,(...s)=>t(...s),e)},ib=Us("bm"),zc=Us("m"),ob=Us("bu"),ab=Us("u"),Ag=Us("bum"),Uh=Us("um"),cb=Us("sp"),lb=Us("rtg"),ub=Us("rtc");function hb(n,t=Le){Gc("ec",n,t)}const db=Symbol.for("v-ndc");function nu(n,t,e,s){let r;const i=e,o=ut(n);if(o||me(n)){const a=o&&pi(n);let c=!1;a&&(c=!Nn(n),n=$c(n)),r=new Array(n.length);for(let l=0,u=n.length;l<u;l++)r[l]=t(c?Fe(n[l]):n[l],l,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=t(a+1,a,void 0,i)}else if(Kt(n))if(n[Symbol.iterator])r=Array.from(n,(a,c)=>t(a,c,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=t(n[u],u,c,i)}}else r=[];return r}function fb(n,t,e={},s,r){if(Ze.ce||Ze.parent&&gi(Ze.parent)&&Ze.parent.ce)return sn(),ju(He,null,[Gn("slot",e,s&&s())],64);let i=n[t];i&&i._c&&(i._d=!1),sn();const o=i&&Ng(i(e)),a=e.key||o&&o.key,c=ju(He,{key:(a&&!Bs(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&n._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Ng(n){return n.some(t=>Gh(t)?!(t.type===Ci||t.type===He&&!Ng(t.children)):!0)?n:null}const Lu=n=>n?Xg(n)?Hh(n):Lu(n.parent):null,vo=Me(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Lu(n.parent),$root:n=>Lu(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>jh(n),$forceUpdate:n=>n.f||(n.f=()=>{qh(n.update)}),$nextTick:n=>n.n||(n.n=Bi.bind(n.proxy)),$watch:n=>Fb.bind(n)}),su=(n,t)=>n!==kt&&!n.__isScriptSetup&&Nt(n,t),pb={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return i[t]}else{if(su(s,t))return o[t]=1,s[t];if(r!==kt&&Nt(r,t))return o[t]=2,r[t];if((l=n.propsOptions[0])&&Nt(l,t))return o[t]=3,i[t];if(e!==kt&&Nt(e,t))return o[t]=4,e[t];qu&&(o[t]=0)}}const u=vo[t];let h,d;if(u)return t==="$attrs"&&Ve(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[t]))return h;if(e!==kt&&Nt(e,t))return o[t]=4,e[t];if(d=c.config.globalProperties,Nt(d,t))return d[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:i}=n;return su(r,t)?(r[t]=e,!0):s!==kt&&Nt(s,t)?(s[t]=e,!0):Nt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(i[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!e[o]||n!==kt&&Nt(n,o)||su(t,o)||(a=i[0])&&Nt(a,o)||Nt(s,o)||Nt(vo,o)||Nt(r.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Nt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function ec(n){return ut(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}function mb(n,t){return!n||!t?n||t:ut(n)&&ut(t)?n.concat(t):Me({},ec(n),ec(t))}let qu=!0;function gb(n){const t=jh(n),e=n.proxy,s=n.ctx;qu=!1,t.beforeCreate&&Lf(t.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:w,destroyed:x,unmounted:T,render:_,renderTracked:b,renderTriggered:y,errorCaptured:S,serverPrefetch:O,expose:E,inheritAttrs:C,components:k,directives:R,filters:L}=t;if(l&&_b(l,s,null),o)for(const U in o){const Z=o[U];gt(Z)&&(s[U]=Z.bind(e))}if(r){const U=r.call(e,e);Kt(U)&&(n.data=Jt(U))}if(qu=!0,i)for(const U in i){const Z=i[U],$=gt(Z)?Z.bind(e,e):gt(Z.get)?Z.get.bind(e,e):hs,H=!gt(Z)&&gt(Z.set)?Z.set.bind(e):hs,K=wt({get:$,set:H});Object.defineProperty(s,U,{enumerable:!0,configurable:!0,get:()=>K.value,set:st=>K.value=st})}if(a)for(const U in a)kg(a[U],s,e,U);if(c){const U=gt(c)?c.call(e):c;Reflect.ownKeys(U).forEach(Z=>{Sb(Z,U[Z])})}u&&Lf(u,n,"c");function V(U,Z){ut(Z)?Z.forEach($=>U($.bind(e))):Z&&U(Z.bind(e))}if(V(ib,h),V(zc,d),V(ob,f),V(ab,p),V(nb,m),V(sb,g),V(hb,S),V(ub,b),V(lb,y),V(Ag,w),V(Uh,T),V(cb,O),ut(E))if(E.length){const U=n.exposed||(n.exposed={});E.forEach(Z=>{Object.defineProperty(U,Z,{get:()=>e[Z],set:$=>e[Z]=$})})}else n.exposed||(n.exposed={});_&&n.render===hs&&(n.render=_),C!=null&&(n.inheritAttrs=C),k&&(n.components=k),R&&(n.directives=R),O&&Mg(n)}function _b(n,t,e=hs){ut(n)&&(n=Bu(n));for(const s in n){const r=n[s];let i;Kt(r)?"default"in r?i=ja(r.from||s,r.default,!0):i=ja(r.from||s):i=ja(r),Ae(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[s]=i}}function Lf(n,t,e){fs(ut(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function kg(n,t,e,s){let r=s.includes(".")?$g(e,s):()=>e[s];if(me(n)){const i=t[n];gt(i)&&de(r,i)}else if(gt(n))de(r,n.bind(e));else if(Kt(n))if(ut(n))n.forEach(i=>kg(i,t,e,s));else{const i=gt(n.handler)?n.handler.bind(e):t[n.handler];gt(i)&&de(r,i,n)}}function jh(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(t);let c;return a?c=a:!r.length&&!e&&!s?c=t:(c={},r.length&&r.forEach(l=>nc(c,l,o,!0)),nc(c,t,o)),Kt(t)&&i.set(t,c),c}function nc(n,t,e,s=!1){const{mixins:r,extends:i}=t;i&&nc(n,i,e,!0),r&&r.forEach(o=>nc(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=vb[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const vb={data:qf,props:Bf,emits:Bf,methods:uo,computed:uo,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:uo,directives:uo,watch:bb,provide:qf,inject:yb};function qf(n,t){return t?n?function(){return Me(gt(n)?n.call(this,this):n,gt(t)?t.call(this,this):t)}:t:n}function yb(n,t){return uo(Bu(n),Bu(t))}function Bu(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function We(n,t){return n?[...new Set([].concat(n,t))]:t}function uo(n,t){return n?Me(Object.create(null),n,t):t}function Bf(n,t){return n?ut(n)&&ut(t)?[...new Set([...n,...t])]:Me(Object.create(null),ec(n),ec(t??{})):t}function bb(n,t){if(!n)return t;if(!t)return n;const e=Me(Object.create(null),n);for(const s in t)e[s]=We(n[s],t[s]);return e}function Og(){return{app:null,config:{isNativeTag:u1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wb=0;function Tb(n,t){return function(s,r=null){gt(s)||(s=Me({},s)),r!=null&&!Kt(r)&&(r=null);const i=Og(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:wb++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:rw,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&gt(u.install)?(o.add(u),u.install(l,...h)):gt(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,d){if(!c){const f=l._ceVNode||Gn(s,r);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),h&&t?t(f,u):n(f,u,d),c=!0,l._container=u,u.__vue_app__=l,Hh(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(fs(a,l._instance,16),n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=_i;_i=l;try{return u()}finally{_i=h}}};return l}}let _i=null;function Sb(n,t){if(Le){let e=Le.provides;const s=Le.parent&&Le.parent.provides;s===e&&(e=Le.provides=Object.create(s)),e[n]=t}}function ja(n,t,e=!1){const s=Le||Ze;if(s||_i){const r=_i?_i._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return e&&gt(t)?t.call(s&&s.proxy):t}}const Ig={},Pg=()=>Object.create(Ig),Rg=n=>Object.getPrototypeOf(n)===Ig;function xb(n,t,e,s=!1){const r={},i=Pg();n.propsDefaults=Object.create(null),Dg(n,t,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);e?n.props=s?r:Zn(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function Mb(n,t,e,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=At(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Hc(n.emitsOptions,d))continue;const f=t[d];if(c)if(Nt(i,d))f!==i[d]&&(i[d]=f,l=!0);else{const p=Ps(d);r[p]=Uu(c,a,p,f,n,!1)}else f!==i[d]&&(i[d]=f,l=!0)}}}else{Dg(n,t,r,i)&&(l=!0);let u;for(const h in a)(!t||!Nt(t,h)&&((u=fr(h))===h||!Nt(t,u)))&&(c?e&&(e[h]!==void 0||e[u]!==void 0)&&(r[h]=Uu(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!t||!Nt(t,h))&&(delete i[h],l=!0)}l&&As(n.attrs,"set","")}function Dg(n,t,e,s){const[r,i]=n.propsOptions;let o=!1,a;if(t)for(let c in t){if(mo(c))continue;const l=t[c];let u;r&&Nt(r,u=Ps(c))?!i||!i.includes(u)?e[u]=l:(a||(a={}))[u]=l:Hc(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=At(e),l=a||kt;for(let u=0;u<i.length;u++){const h=i[u];e[h]=Uu(r,c,h,l[h],n,!Nt(l,h))}}return o}function Uu(n,t,e,s,r,i){const o=n[e];if(o!=null){const a=Nt(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&gt(c)){const{propsDefaults:l}=r;if(e in l)s=l[e];else{const u=Ho(r);s=l[e]=c.call(null,t),u()}}else s=c;r.ce&&r.ce._setProp(e,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===fr(e))&&(s=!0))}return s}const Cb=new WeakMap;function Vg(n,t,e=!1){const s=e?Cb:t.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!gt(n)){const u=h=>{c=!0;const[d,f]=Vg(h,t,!0);Me(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return Kt(n)&&s.set(n,di),di;if(ut(i))for(let u=0;u<i.length;u++){const h=Ps(i[u]);Uf(h)&&(o[h]=kt)}else if(i)for(const u in i){const h=Ps(u);if(Uf(h)){const d=i[u],f=o[h]=ut(d)||gt(d)?{type:d}:Me({},d),p=f.type;let m=!1,g=!0;if(ut(p))for(let v=0;v<p.length;++v){const w=p[v],x=gt(w)&&w.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(g=!1)}else m=gt(p)&&p.name==="Boolean";f[0]=m,f[1]=g,(m||Nt(f,"default"))&&a.push(h)}}const l=[o,a];return Kt(n)&&s.set(n,l),l}function Uf(n){return n[0]!=="$"&&!mo(n)}const Fg=n=>n[0]==="_"||n==="$stable",$h=n=>ut(n)?n.map(as):[as(n)],Eb=(n,t,e)=>{if(t._n)return t;const s=Q1((...r)=>$h(t(...r)),e);return s._c=!1,s},Lg=(n,t,e)=>{const s=n._ctx;for(const r in n){if(Fg(r))continue;const i=n[r];if(gt(i))t[r]=Eb(r,i,s);else if(i!=null){const o=$h(i);t[r]=()=>o}}},qg=(n,t)=>{const e=$h(t);n.slots.default=()=>e},Bg=(n,t,e)=>{for(const s in t)(e||s!=="_")&&(n[s]=t[s])},Ab=(n,t,e)=>{const s=n.slots=Pg();if(n.vnode.shapeFlag&32){const r=t._;r?(Bg(s,t,e),e&&Jm(s,"_",r,!0)):Lg(t,s)}else t&&qg(n,t)},Nb=(n,t,e)=>{const{vnode:s,slots:r}=n;let i=!0,o=kt;if(s.shapeFlag&32){const a=t._;a?e&&a===1?i=!1:Bg(r,t,e):(i=!t.$stable,Lg(t,r)),o=t}else t&&(qg(n,t),o={default:1});if(i)for(const a in r)!Fg(a)&&o[a]==null&&delete r[a]},gn=Wb;function kb(n){return Ob(n)}function Ob(n,t){const e=Uc();e.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=hs,insertStaticContent:p}=n,m=(N,M,A,P=null,F=null,D=null,q=void 0,j=null,X=!!M.dynamicChildren)=>{if(N===M)return;N&&!so(N,M)&&(P=Ft(N),st(N,F,D,!0),N=null),M.patchFlag===-2&&(X=!1,M.dynamicChildren=null);const{type:Y,ref:rt,shapeFlag:nt}=M;switch(Y){case Yc:g(N,M,A,P);break;case Ci:v(N,M,A,P);break;case ou:N==null&&w(M,A,P,q);break;case He:k(N,M,A,P,F,D,q,j,X);break;default:nt&1?_(N,M,A,P,F,D,q,j,X):nt&6?R(N,M,A,P,F,D,q,j,X):(nt&64||nt&128)&&Y.process(N,M,A,P,F,D,q,j,X,ce)}rt!=null&&F&&Fu(rt,N&&N.ref,D,M||N,!M)},g=(N,M,A,P)=>{if(N==null)s(M.el=a(M.children),A,P);else{const F=M.el=N.el;M.children!==N.children&&l(F,M.children)}},v=(N,M,A,P)=>{N==null?s(M.el=c(M.children||""),A,P):M.el=N.el},w=(N,M,A,P)=>{[N.el,N.anchor]=p(N.children,M,A,P,N.el,N.anchor)},x=({el:N,anchor:M},A,P)=>{let F;for(;N&&N!==M;)F=d(N),s(N,A,P),N=F;s(M,A,P)},T=({el:N,anchor:M})=>{let A;for(;N&&N!==M;)A=d(N),r(N),N=A;r(M)},_=(N,M,A,P,F,D,q,j,X)=>{M.type==="svg"?q="svg":M.type==="math"&&(q="mathml"),N==null?b(M,A,P,F,D,q,j,X):O(N,M,F,D,q,j,X)},b=(N,M,A,P,F,D,q,j)=>{let X,Y;const{props:rt,shapeFlag:nt,transition:it,dirs:at}=N;if(X=N.el=o(N.type,D,rt&&rt.is,rt),nt&8?u(X,N.children):nt&16&&S(N.children,X,null,P,F,ru(N,D),q,j),at&&Tr(N,null,P,"created"),y(X,N,N.scopeId,q,P),rt){for(const Lt in rt)Lt!=="value"&&!mo(Lt)&&i(X,Lt,null,rt[Lt],D,P);"value"in rt&&i(X,"value",null,rt.value,D),(Y=rt.onVnodeBeforeMount)&&rs(Y,P,N)}at&&Tr(N,null,P,"beforeMount");const Tt=Ib(F,it);Tt&&it.beforeEnter(X),s(X,M,A),((Y=rt&&rt.onVnodeMounted)||Tt||at)&&gn(()=>{Y&&rs(Y,P,N),Tt&&it.enter(X),at&&Tr(N,null,P,"mounted")},F)},y=(N,M,A,P,F)=>{if(A&&f(N,A),P)for(let D=0;D<P.length;D++)f(N,P[D]);if(F){let D=F.subTree;if(M===D||zg(D.type)&&(D.ssContent===M||D.ssFallback===M)){const q=F.vnode;y(N,q,q.scopeId,q.slotScopeIds,F.parent)}}},S=(N,M,A,P,F,D,q,j,X=0)=>{for(let Y=X;Y<N.length;Y++){const rt=N[Y]=j?Qs(N[Y]):as(N[Y]);m(null,rt,M,A,P,F,D,q,j)}},O=(N,M,A,P,F,D,q)=>{const j=M.el=N.el;let{patchFlag:X,dynamicChildren:Y,dirs:rt}=M;X|=N.patchFlag&16;const nt=N.props||kt,it=M.props||kt;let at;if(A&&Sr(A,!1),(at=it.onVnodeBeforeUpdate)&&rs(at,A,M,N),rt&&Tr(M,N,A,"beforeUpdate"),A&&Sr(A,!0),(nt.innerHTML&&it.innerHTML==null||nt.textContent&&it.textContent==null)&&u(j,""),Y?E(N.dynamicChildren,Y,j,A,P,ru(M,F),D):q||Z(N,M,j,null,A,P,ru(M,F),D,!1),X>0){if(X&16)C(j,nt,it,A,F);else if(X&2&&nt.class!==it.class&&i(j,"class",null,it.class,F),X&4&&i(j,"style",nt.style,it.style,F),X&8){const Tt=M.dynamicProps;for(let Lt=0;Lt<Tt.length;Lt++){const It=Tt[Lt],fn=nt[It],Re=it[It];(Re!==fn||It==="value")&&i(j,It,fn,Re,F,A)}}X&1&&N.children!==M.children&&u(j,M.children)}else!q&&Y==null&&C(j,nt,it,A,F);((at=it.onVnodeUpdated)||rt)&&gn(()=>{at&&rs(at,A,M,N),rt&&Tr(M,N,A,"updated")},P)},E=(N,M,A,P,F,D,q)=>{for(let j=0;j<M.length;j++){const X=N[j],Y=M[j],rt=X.el&&(X.type===He||!so(X,Y)||X.shapeFlag&70)?h(X.el):A;m(X,Y,rt,null,P,F,D,q,!0)}},C=(N,M,A,P,F)=>{if(M!==A){if(M!==kt)for(const D in M)!mo(D)&&!(D in A)&&i(N,D,M[D],null,F,P);for(const D in A){if(mo(D))continue;const q=A[D],j=M[D];q!==j&&D!=="value"&&i(N,D,j,q,F,P)}"value"in A&&i(N,"value",M.value,A.value,F)}},k=(N,M,A,P,F,D,q,j,X)=>{const Y=M.el=N?N.el:a(""),rt=M.anchor=N?N.anchor:a("");let{patchFlag:nt,dynamicChildren:it,slotScopeIds:at}=M;at&&(j=j?j.concat(at):at),N==null?(s(Y,A,P),s(rt,A,P),S(M.children||[],A,rt,F,D,q,j,X)):nt>0&&nt&64&&it&&N.dynamicChildren?(E(N.dynamicChildren,it,A,F,D,q,j),(M.key!=null||F&&M===F.subTree)&&Ug(N,M,!0)):Z(N,M,A,rt,F,D,q,j,X)},R=(N,M,A,P,F,D,q,j,X)=>{M.slotScopeIds=j,N==null?M.shapeFlag&512?F.ctx.activate(M,A,P,q,X):L(M,A,P,F,D,q,X):z(N,M,X)},L=(N,M,A,P,F,D,q)=>{const j=N.component=Jb(N,P,F);if(Cg(N)&&(j.ctx.renderer=ce),Qb(j,!1,q),j.asyncDep){if(F&&F.registerDep(j,V,q),!N.el){const X=j.subTree=Gn(Ci);v(null,X,M,A)}}else V(j,N,M,A,F,D,q)},z=(N,M,A)=>{const P=M.component=N.component;if(jb(N,M,A))if(P.asyncDep&&!P.asyncResolved){U(P,M,A);return}else P.next=M,P.update();else M.el=N.el,P.vnode=M},V=(N,M,A,P,F,D,q)=>{const j=()=>{if(N.isMounted){let{next:nt,bu:it,u:at,parent:Tt,vnode:Lt}=N;{const pn=jg(N);if(pn){nt&&(nt.el=Lt.el,U(N,nt,q)),pn.asyncDep.then(()=>{N.isUnmounted||j()});return}}let It=nt,fn;Sr(N,!1),nt?(nt.el=Lt.el,U(N,nt,q)):nt=Lt,it&&Kl(it),(fn=nt.props&&nt.props.onVnodeBeforeUpdate)&&rs(fn,Tt,nt,Lt),Sr(N,!0);const Re=iu(N),Pn=N.subTree;N.subTree=Re,m(Pn,Re,h(Pn.el),Ft(Pn),N,F,D),nt.el=Re.el,It===null&&$b(N,Re.el),at&&gn(at,F),(fn=nt.props&&nt.props.onVnodeUpdated)&&gn(()=>rs(fn,Tt,nt,Lt),F)}else{let nt;const{el:it,props:at}=M,{bm:Tt,m:Lt,parent:It,root:fn,type:Re}=N,Pn=gi(M);if(Sr(N,!1),Tt&&Kl(Tt),!Pn&&(nt=at&&at.onVnodeBeforeMount)&&rs(nt,It,M),Sr(N,!0),it&&je){const pn=()=>{N.subTree=iu(N),je(it,N.subTree,N,F,null)};Pn&&Re.__asyncHydrate?Re.__asyncHydrate(it,N,pn):pn()}else{fn.ce&&fn.ce._injectChildStyle(Re);const pn=N.subTree=iu(N);m(null,pn,A,P,N,F,D),M.el=pn.el}if(Lt&&gn(Lt,F),!Pn&&(nt=at&&at.onVnodeMounted)){const pn=M;gn(()=>rs(nt,It,pn),F)}(M.shapeFlag&256||It&&gi(It.vnode)&&It.vnode.shapeFlag&256)&&N.a&&gn(N.a,F),N.isMounted=!0,M=A=P=null}};N.scope.on();const X=N.effect=new sg(j);N.scope.off();const Y=N.update=X.run.bind(X),rt=N.job=X.runIfDirty.bind(X);rt.i=N,rt.id=N.uid,X.scheduler=()=>qh(rt),Sr(N,!0),Y()},U=(N,M,A)=>{M.component=N;const P=N.vnode.props;N.vnode=M,N.next=null,Mb(N,M.props,P,A),Nb(N,M.children,A),pr(),Ff(N),mr()},Z=(N,M,A,P,F,D,q,j,X=!1)=>{const Y=N&&N.children,rt=N?N.shapeFlag:0,nt=M.children,{patchFlag:it,shapeFlag:at}=M;if(it>0){if(it&128){H(Y,nt,A,P,F,D,q,j,X);return}else if(it&256){$(Y,nt,A,P,F,D,q,j,X);return}}at&8?(rt&16&&lt(Y,F,D),nt!==Y&&u(A,nt)):rt&16?at&16?H(Y,nt,A,P,F,D,q,j,X):lt(Y,F,D,!0):(rt&8&&u(A,""),at&16&&S(nt,A,P,F,D,q,j,X))},$=(N,M,A,P,F,D,q,j,X)=>{N=N||di,M=M||di;const Y=N.length,rt=M.length,nt=Math.min(Y,rt);let it;for(it=0;it<nt;it++){const at=M[it]=X?Qs(M[it]):as(M[it]);m(N[it],at,A,null,F,D,q,j,X)}Y>rt?lt(N,F,D,!0,!1,nt):S(M,A,P,F,D,q,j,X,nt)},H=(N,M,A,P,F,D,q,j,X)=>{let Y=0;const rt=M.length;let nt=N.length-1,it=rt-1;for(;Y<=nt&&Y<=it;){const at=N[Y],Tt=M[Y]=X?Qs(M[Y]):as(M[Y]);if(so(at,Tt))m(at,Tt,A,null,F,D,q,j,X);else break;Y++}for(;Y<=nt&&Y<=it;){const at=N[nt],Tt=M[it]=X?Qs(M[it]):as(M[it]);if(so(at,Tt))m(at,Tt,A,null,F,D,q,j,X);else break;nt--,it--}if(Y>nt){if(Y<=it){const at=it+1,Tt=at<rt?M[at].el:P;for(;Y<=it;)m(null,M[Y]=X?Qs(M[Y]):as(M[Y]),A,Tt,F,D,q,j,X),Y++}}else if(Y>it)for(;Y<=nt;)st(N[Y],F,D,!0),Y++;else{const at=Y,Tt=Y,Lt=new Map;for(Y=Tt;Y<=it;Y++){const mn=M[Y]=X?Qs(M[Y]):as(M[Y]);mn.key!=null&&Lt.set(mn.key,Y)}let It,fn=0;const Re=it-Tt+1;let Pn=!1,pn=0;const eo=new Array(Re);for(Y=0;Y<Re;Y++)eo[Y]=0;for(Y=at;Y<=nt;Y++){const mn=N[Y];if(fn>=Re){st(mn,F,D,!0);continue}let ss;if(mn.key!=null)ss=Lt.get(mn.key);else for(It=Tt;It<=it;It++)if(eo[It-Tt]===0&&so(mn,M[It])){ss=It;break}ss===void 0?st(mn,F,D,!0):(eo[ss-Tt]=Y+1,ss>=pn?pn=ss:Pn=!0,m(mn,M[ss],A,null,F,D,q,j,X),fn++)}const If=Pn?Pb(eo):di;for(It=If.length-1,Y=Re-1;Y>=0;Y--){const mn=Tt+Y,ss=M[mn],Pf=mn+1<rt?M[mn+1].el:P;eo[Y]===0?m(null,ss,A,Pf,F,D,q,j,X):Pn&&(It<0||Y!==If[It]?K(ss,A,Pf,2):It--)}}},K=(N,M,A,P,F=null)=>{const{el:D,type:q,transition:j,children:X,shapeFlag:Y}=N;if(Y&6){K(N.component.subTree,M,A,P);return}if(Y&128){N.suspense.move(M,A,P);return}if(Y&64){q.move(N,M,A,ce);return}if(q===He){s(D,M,A);for(let nt=0;nt<X.length;nt++)K(X[nt],M,A,P);s(N.anchor,M,A);return}if(q===ou){x(N,M,A);return}if(P!==2&&Y&1&&j)if(P===0)j.beforeEnter(D),s(D,M,A),gn(()=>j.enter(D),F);else{const{leave:nt,delayLeave:it,afterLeave:at}=j,Tt=()=>s(D,M,A),Lt=()=>{nt(D,()=>{Tt(),at&&at()})};it?it(D,Tt,Lt):Lt()}else s(D,M,A)},st=(N,M,A,P=!1,F=!1)=>{const{type:D,props:q,ref:j,children:X,dynamicChildren:Y,shapeFlag:rt,patchFlag:nt,dirs:it,cacheIndex:at}=N;if(nt===-2&&(F=!1),j!=null&&Fu(j,null,A,N,!0),at!=null&&(M.renderCache[at]=void 0),rt&256){M.ctx.deactivate(N);return}const Tt=rt&1&&it,Lt=!gi(N);let It;if(Lt&&(It=q&&q.onVnodeBeforeUnmount)&&rs(It,M,N),rt&6)J(N.component,A,P);else{if(rt&128){N.suspense.unmount(A,P);return}Tt&&Tr(N,null,M,"beforeUnmount"),rt&64?N.type.remove(N,M,A,ce,P):Y&&!Y.hasOnce&&(D!==He||nt>0&&nt&64)?lt(Y,M,A,!1,!0):(D===He&&nt&384||!F&&rt&16)&&lt(X,M,A),P&&Et(N)}(Lt&&(It=q&&q.onVnodeUnmounted)||Tt)&&gn(()=>{It&&rs(It,M,N),Tt&&Tr(N,null,M,"unmounted")},A)},Et=N=>{const{type:M,el:A,anchor:P,transition:F}=N;if(M===He){Ot(A,P);return}if(M===ou){T(N);return}const D=()=>{r(A),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(N.shapeFlag&1&&F&&!F.persisted){const{leave:q,delayLeave:j}=F,X=()=>q(A,D);j?j(N.el,D,X):X()}else D()},Ot=(N,M)=>{let A;for(;N!==M;)A=d(N),r(N),N=A;r(M)},J=(N,M,A)=>{const{bum:P,scope:F,job:D,subTree:q,um:j,m:X,a:Y}=N;jf(X),jf(Y),P&&Kl(P),F.stop(),D&&(D.flags|=8,st(q,N,M,A)),j&&gn(j,M),gn(()=>{N.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},lt=(N,M,A,P=!1,F=!1,D=0)=>{for(let q=D;q<N.length;q++)st(N[q],M,A,P,F)},Ft=N=>{if(N.shapeFlag&6)return Ft(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const M=d(N.anchor||N.el),A=M&&M[tb];return A?d(A):M};let G=!1;const we=(N,M,A)=>{N==null?M._vnode&&st(M._vnode,null,null,!0):m(M._vnode||null,N,M,null,null,null,A),M._vnode=N,G||(G=!0,Ff(),Tg(),G=!1)},ce={p:m,um:st,m:K,r:Et,mt:L,mc:S,pc:Z,pbc:E,n:Ft,o:n};let Pe,je;return{render:we,hydrate:Pe,createApp:Tb(we,Pe)}}function ru({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Sr({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function Ib(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Ug(n,t,e=!1){const s=n.children,r=t.children;if(ut(s)&&ut(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Qs(r[i]),a.el=o.el),!e&&a.patchFlag!==-2&&Ug(o,a)),a.type===Yc&&(a.el=o.el)}}function Pb(n){const t=n.slice(),e=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=e[e.length-1],n[r]<l){t[s]=r,e.push(s);continue}for(i=0,o=e.length-1;i<o;)a=i+o>>1,n[e[a]]<l?i=a+1:o=a;l<n[e[i]]&&(i>0&&(t[s]=e[i-1]),e[i]=s)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function jg(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jg(t)}function jf(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const Rb=Symbol.for("v-scx"),Db=()=>ja(Rb);function Vb(n,t){return Wh(n,null,{flush:"sync"})}function de(n,t,e){return Wh(n,t,e)}function Wh(n,t,e=kt){const{immediate:s,deep:r,flush:i,once:o}=e,a=Me({},e),c=t&&s||!t&&i!=="post";let l;if(Ro){if(i==="sync"){const f=Db();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=hs,f.resume=hs,f.pause=hs,f}}const u=Le;a.call=(f,p,m)=>fs(f,u,p,m);let h=!1;i==="post"?a.scheduler=f=>{gn(f,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(f,p)=>{p?f():qh(f)}),a.augmentJob=f=>{t&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=X1(n,t,a);return Ro&&(l?l.push(d):c&&d()),d}function Fb(n,t,e){const s=this.proxy,r=me(n)?n.includes(".")?$g(s,n):()=>s[n]:n.bind(s,s);let i;gt(t)?i=t:(i=t.handler,e=t);const o=Ho(this),a=Wh(r,i.bind(s),e);return o(),a}function $g(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}function Lb(n,t,e=kt){const s=Xc(),r=Ps(t),i=fr(t),o=Wg(n,r),a=G1((c,l)=>{let u,h=kt,d;return Vb(()=>{const f=n[r];rn(u,f)&&(u=f,l())}),{get(){return c(),e.get?e.get(u):u},set(f){const p=e.set?e.set(f):f;if(!rn(p,u)&&!(h!==kt&&rn(f,h)))return;const m=s.vnode.props;m&&(t in m||r in m||i in m)&&(`onUpdate:${t}`in m||`onUpdate:${r}`in m||`onUpdate:${i}`in m)||(u=f,l()),s.emit(`update:${t}`,p),rn(f,p)&&rn(f,h)&&!rn(p,d)&&l(),h=f,d=p}}});return a[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?o||kt:a,done:!1}:{done:!0}}}},a}const Wg=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Ps(t)}Modifiers`]||n[`${fr(t)}Modifiers`];function qb(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||kt;let r=e;const i=t.startsWith("update:"),o=i&&Wg(s,t.slice(7));o&&(o.trim&&(r=e.map(u=>me(u)?u.trim():u)),o.number&&(r=e.map(m1)));let a,c=s[a=Zl(t)]||s[a=Zl(Ps(t))];!c&&i&&(c=s[a=Zl(fr(t))]),c&&fs(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,fs(l,n,6,r)}}function Gg(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!gt(n)){const c=l=>{const u=Gg(l,t,!0);u&&(a=!0,Me(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Kt(n)&&s.set(n,null),null):(ut(i)?i.forEach(c=>o[c]=null):Me(o,i),Kt(n)&&s.set(n,o),o)}function Hc(n,t){return!n||!Lc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Nt(n,t[0].toLowerCase()+t.slice(1))||Nt(n,fr(t))||Nt(n,t))}function iu(n){const{type:t,vnode:e,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=n,g=tc(n);let v,w;try{if(e.shapeFlag&4){const T=r||s,_=T;v=as(l.call(_,T,u,h,f,d,p)),w=a}else{const T=t;v=as(T.length>1?T(h,{attrs:a,slots:o,emit:c}):T(h,null)),w=t.props?a:Bb(a)}}catch(T){yo.length=0,Wc(T,n,1),v=Gn(Ci)}let x=v;if(w&&m!==!1){const T=Object.keys(w),{shapeFlag:_}=x;T.length&&_&7&&(i&&T.some(Ah)&&(w=Ub(w,i)),x=Ei(x,w,!1,!0))}return e.dirs&&(x=Ei(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(e.dirs):e.dirs),e.transition&&Bh(x,e.transition),v=x,tc(g),v}const Bb=n=>{let t;for(const e in n)(e==="class"||e==="style"||Lc(e))&&((t||(t={}))[e]=n[e]);return t},Ub=(n,t)=>{const e={};for(const s in n)(!Ah(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function jb(n,t,e){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?$f(s,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!Hc(l,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?$f(s,o,l):!0:!!o;return!1}function $f(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==n[i]&&!Hc(e,i))return!0}return!1}function $b({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const zg=n=>n.__isSuspense;function Wb(n,t){t&&t.pendingBranch?ut(n)?t.effects.push(...n):t.effects.push(n):J1(n)}const He=Symbol.for("v-fgt"),Yc=Symbol.for("v-txt"),Ci=Symbol.for("v-cmt"),ou=Symbol.for("v-stc"),yo=[];let vn=null;function sn(n=!1){yo.push(vn=n?null:[])}function Gb(){yo.pop(),vn=yo[yo.length-1]||null}let Po=1;function Wf(n){Po+=n,n<0&&vn&&(vn.hasOnce=!0)}function Hg(n){return n.dynamicChildren=Po>0?vn||di:null,Gb(),Po>0&&vn&&vn.push(n),n}function Vn(n,t,e,s,r,i){return Hg(Ct(n,t,e,s,r,i,!0))}function ju(n,t,e,s,r){return Hg(Gn(n,t,e,s,r,!0))}function Gh(n){return n?n.__v_isVNode===!0:!1}function so(n,t){return n.type===t.type&&n.key===t.key}const Yg=({key:n})=>n??null,$a=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?me(n)||Ae(n)||gt(n)?{i:Ze,r:n,k:t,f:!!e}:n:null);function Ct(n,t=null,e=null,s=0,r=null,i=n===He?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Yg(t),ref:t&&$a(t),scopeId:xg,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ze};return a?(zh(c,e),i&128&&n.normalize(c)):e&&(c.shapeFlag|=me(e)?8:16),Po>0&&!o&&vn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&vn.push(c),c}const Gn=zb;function zb(n,t=null,e=null,s=0,r=null,i=!1){if((!n||n===db)&&(n=Ci),Gh(n)){const a=Ei(n,t,!0);return e&&zh(a,e),Po>0&&!i&&vn&&(a.shapeFlag&6?vn[vn.indexOf(n)]=a:vn.push(a)),a.patchFlag=-2,a}if(sw(n)&&(n=n.__vccOpts),t){t=Hb(t);let{class:a,style:c}=t;a&&!me(a)&&(t.class=Oh(a)),Kt(c)&&(Lh(c)&&!ut(c)&&(c=Me({},c)),t.style=cs(c))}const o=me(n)?1:zg(n)?128:eb(n)?64:Kt(n)?4:gt(n)?2:0;return Ct(n,t,e,s,r,o,i,!0)}function Hb(n){return n?Lh(n)||Rg(n)?Me({},n):n:null}function Ei(n,t,e=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=n,l=t?Xb(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&Yg(l),ref:t&&t.ref?e&&i?ut(i)?i.concat($a(t)):[i,$a(t)]:$a(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==He?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ei(n.ssContent),ssFallback:n.ssFallback&&Ei(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&Bh(u,c.clone(u)),u}function Yb(n=" ",t=0){return Gn(Yc,null,n,t)}function as(n){return n==null||typeof n=="boolean"?Gn(Ci):ut(n)?Gn(He,null,n.slice()):Gh(n)?Qs(n):Gn(Yc,null,String(n))}function Qs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ei(n)}function zh(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(ut(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),zh(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!Rg(t)?t._ctx=Ze:r===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else gt(t)?(t={default:t,_ctx:Ze},e=32):(t=String(t),s&64?(e=16,t=[Yb(t)]):e=8);n.children=t,n.shapeFlag|=e}function Xb(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=Oh([t.class,s.class]));else if(r==="style")t.style=cs([t.style,s.style]);else if(Lc(r)){const i=t[r],o=s[r];o&&i!==o&&!(ut(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=s[r])}return t}function rs(n,t,e,s=null){fs(n,t,7,[e,s])}const Zb=Og();let Kb=0;function Jb(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||Zb,i={uid:Kb++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new T1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vg(s,r),emitsOptions:Gg(s,r),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:s.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=qb.bind(null,i),n.ce&&n.ce(i),i}let Le=null;const Xc=()=>Le||Ze;let sc,$u;{const n=Uc(),t=(e,s)=>{let r;return(r=n[e])||(r=n[e]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sc=t("__VUE_INSTANCE_SETTERS__",e=>Le=e),$u=t("__VUE_SSR_SETTERS__",e=>Ro=e)}const Ho=n=>{const t=Le;return sc(n),n.scope.on(),()=>{n.scope.off(),sc(t)}},Gf=()=>{Le&&Le.scope.off(),sc(null)};function Xg(n){return n.vnode.shapeFlag&4}let Ro=!1;function Qb(n,t=!1,e=!1){t&&$u(t);const{props:s,children:r}=n.vnode,i=Xg(n);xb(n,s,i,t),Ab(n,r,e);const o=i?tw(n,t):void 0;return t&&$u(!1),o}function tw(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,pb);const{setup:s}=e;if(s){pr();const r=n.setupContext=s.length>1?nw(n):null,i=Ho(n),o=zo(s,n,0,[n.props,r]),a=Ym(o);if(mr(),i(),(a||n.sp)&&!gi(n)&&Mg(n),a){if(o.then(Gf,Gf),t)return o.then(c=>{zf(n,c,t)}).catch(c=>{Wc(c,n,0)});n.asyncDep=o}else zf(n,o,t)}else Zg(n,t)}function zf(n,t,e){gt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Kt(t)&&(n.setupState=yg(t)),Zg(n,e)}let Hf;function Zg(n,t,e){const s=n.type;if(!n.render){if(!t&&Hf&&!s.render){const r=s.template||jh(n).template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Me(Me({isCustomElement:i,delimiters:a},o),c);s.render=Hf(r,l)}}n.render=s.render||hs}{const r=Ho(n);pr();try{gb(n)}finally{mr(),r()}}}const ew={get(n,t){return Ve(n,"get",""),n[t]}};function nw(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,ew),slots:n.slots,emit:n.emit,expose:t}}function Hh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(yg(U1(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in vo)return vo[e](n)},has(t,e){return e in t||e in vo}})):n.proxy}function sw(n){return gt(n)&&"__vccOpts"in n}const wt=(n,t)=>H1(n,t,Ro),rw="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wu;const Yf=typeof window<"u"&&window.trustedTypes;if(Yf)try{Wu=Yf.createPolicy("vue",{createHTML:n=>n})}catch{}const Kg=Wu?n=>Wu.createHTML(n):n=>n,iw="http://www.w3.org/2000/svg",ow="http://www.w3.org/1998/Math/MathML",Ms=typeof document<"u"?document:null,Xf=Ms&&Ms.createElement("template"),aw={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t==="svg"?Ms.createElementNS(iw,n):t==="mathml"?Ms.createElementNS(ow,n):e?Ms.createElement(n,{is:e}):Ms.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Ms.createTextNode(n),createComment:n=>Ms.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ms.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,r,i){const o=e?e.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===i||!(r=r.nextSibling)););else{Xf.innerHTML=Kg(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Xf.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},cw=Symbol("_vtc");function lw(n,t,e){const s=n[cw];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Zf=Symbol("_vod"),uw=Symbol("_vsh"),hw=Symbol(""),dw=/(^|;)\s*display\s*:/;function fw(n,t,e){const s=n.style,r=me(e);let i=!1;if(e&&!r){if(t)if(me(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Wa(s,a,"")}else for(const o in t)e[o]==null&&Wa(s,o,"");for(const o in e)o==="display"&&(i=!0),Wa(s,o,e[o])}else if(r){if(t!==e){const o=s[hw];o&&(e+=";"+o),s.cssText=e,i=dw.test(e)}}else t&&n.removeAttribute("style");Zf in n&&(n[Zf]=i?s.display:"",n[uw]&&(s.display="none"))}const Kf=/\s*!important$/;function Wa(n,t,e){if(ut(e))e.forEach(s=>Wa(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=pw(n,t);Kf.test(e)?n.setProperty(fr(s),e.replace(Kf,""),"important"):n[s]=e}}const Jf=["Webkit","Moz","ms"],au={};function pw(n,t){const e=au[t];if(e)return e;let s=Ps(t);if(s!=="filter"&&s in n)return au[t]=s;s=Km(s);for(let r=0;r<Jf.length;r++){const i=Jf[r]+s;if(i in n)return au[t]=i}return t}const Qf="http://www.w3.org/1999/xlink";function tp(n,t,e,s,r,i=w1(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Qf,t.slice(6,t.length)):n.setAttributeNS(Qf,t,e):e==null||i&&!Qm(e)?n.removeAttribute(t):n.setAttribute(t,i?"":Bs(e)?String(e):e)}function ep(n,t,e,s,r){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Kg(e):e);return}const i=n.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(a!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=Qm(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(r||t)}function mw(n,t,e,s){n.addEventListener(t,e,s)}function gw(n,t,e,s){n.removeEventListener(t,e,s)}const np=Symbol("_vei");function _w(n,t,e,s,r=null){const i=n[np]||(n[np]={}),o=i[t];if(s&&o)o.value=s;else{const[a,c]=vw(t);if(s){const l=i[t]=ww(s,r);mw(n,a,l,c)}else o&&(gw(n,a,o,c),i[t]=void 0)}}const sp=/(?:Once|Passive|Capture)$/;function vw(n){let t;if(sp.test(n)){t={};let s;for(;s=n.match(sp);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):fr(n.slice(2)),t]}let cu=0;const yw=Promise.resolve(),bw=()=>cu||(yw.then(()=>cu=0),cu=Date.now());function ww(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;fs(Tw(s,e.value),t,5,[s])};return e.value=n,e.attached=bw(),e}function Tw(n,t){if(ut(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const rp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Sw=(n,t,e,s,r,i)=>{const o=r==="svg";t==="class"?lw(n,s,o):t==="style"?fw(n,e,s):Lc(t)?Ah(t)||_w(n,t,e,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):xw(n,t,s,o))?(ep(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tp(n,t,s,o,i,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!me(s))?ep(n,Ps(t),s,i,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),tp(n,t,s,o))};function xw(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&rp(t)&&gt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return rp(t)&&me(e)?!1:t in n}const Mw=Me({patchProp:Sw},aw);let ip;function Cw(){return ip||(ip=kb(Mw))}const Ew=(...n)=>{const t=Cw().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=Nw(s);if(!r)return;const i=t._component;!gt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=e(r,!1,Aw(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Aw(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Nw(n){return me(n)?document.querySelector(n):n}function kw(){try{return"constructor"in GestureEvent}catch{return!1}}function Jg(){return typeof window<"u"&&"ontouchstart"in window}function Qg(n){return"pointerId"in n?null:n.type==="touchend"?n.changedTouches:n.targetTouches}function Yh(n){return Array.from(Qg(n)).map(t=>t.identifier)}function Sn(n){const t="buttons"in n?n.buttons:0,{shiftKey:e,altKey:s,metaKey:r,ctrlKey:i}=n;return{buttons:t,shiftKey:e,altKey:s,metaKey:r,ctrlKey:i}}const Yo=n=>n;function ei(n,t=Yo){const e=Qg(n),{clientX:s,clientY:r}=e?e[0]:n;return t([s,r])}function op(n,t,e=Yo){const[s,r]=Array.from(n.touches).filter(f=>t.includes(f.identifier));if(!s||!r)throw Error("The event doesn't have two pointers matching the pointerIds");const i=r.clientX-s.clientX,o=r.clientY-s.clientY,a=(r.clientX+s.clientX)/2,c=(r.clientY+s.clientY)/2,l=Math.hypot(i,o),u=-(Math.atan2(i,o)*180)/Math.PI,h=e([l,u]),d=e([a,c]);return{values:h,origin:d}}function Ow(n,t=Yo){const{scrollX:e,scrollY:s,scrollLeft:r,scrollTop:i}=n.currentTarget;return t([e||r||0,s||i||0])}const ap=40,cp=800;function t_(n,t=Yo){let{deltaX:e,deltaY:s,deltaMode:r}=n;return r===1?(e*=ap,s*=ap):r===2&&(e*=cp,s*=cp),t([e,s])}function lp(n,t=Yo){return t([n.scale,n.rotation])}function e_(){}function n_(...n){return n.length===0?e_:n.length===1?n[0]:function(){var t;for(let e of n)t=e.apply(this,arguments)||t;return t}}function sr(n,t){if(n===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");n=t}return Array.isArray(n)?n:[n,n]}function up(n,t){return Object.assign({},t,n||{})}function rc(n,...t){return typeof n=="function"?n(...t):n}function ro(n){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:e_,canceled:!1,memo:void 0,args:void 0,...n}}function Gu(){const n={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=ro({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),e=ro({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),s=ro({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=ro({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=ro({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:n,drag:t,pinch:e,wheel:s,move:r,scroll:i}}var Iw=Object.defineProperty,Pw=(n,t,e)=>t in n?Iw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,nn=(n,t,e)=>(Pw(n,typeof t!="symbol"?t+"":t,e),e);class Rw{constructor(t){this.classes=t,nn(this,"nativeRefs"),nn(this,"config"),nn(this,"handlers"),nn(this,"state"),nn(this,"timeouts"),nn(this,"domListeners"),nn(this,"windowListeners"),nn(this,"pointerIds",new Set),nn(this,"touchIds",new Set),nn(this,"supportsTouchEvents",Jg()),nn(this,"supportsGestureEvents",kw()),nn(this,"bind",(...e)=>{const s={};for(let r of this.classes)new r(this,e).addBindings(s);for(let r in this.nativeRefs)Xt(s,r,i=>this.nativeRefs[r]({...this.state.shared,event:i,args:e}));return this.config.domTarget?Lw(this,s):qw(this,s)}),nn(this,"clean",()=>{const{eventOptions:e,domTarget:s}=this.config,r=vt(s);r&&Xo(r,i_(this.domListeners),e),Object.values(this.timeouts).forEach(clearTimeout),Dw(this)}),nn(this,"reset",()=>{this.state=Gu()}),this.classes=t,this.state=Gu(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function s_(n,t){"pointerId"in t?n.pointerIds.add(t.pointerId):n.touchIds=new Set(Yh(t))}function r_(n,t){"pointerId"in t?n.pointerIds.delete(t.pointerId):Yh(t).forEach(e=>n.touchIds.delete(e))}function Dw(n){const{config:{window:t,eventOptions:e},windowListeners:s}=n,r=vt(t);if(r){for(let i in s){const o=s[i];Xo(r,o,e)}n.windowListeners={}}}function Vw({config:n,windowListeners:t},e,s=n.eventOptions){const r=vt(n.window);r&&(Xo(r,t[e],s),delete t[e])}function Fw({config:n,windowListeners:t},e,s=[],r=n.eventOptions){const i=vt(n.window);i&&(Xo(i,t[e],r),o_(i,t[e]=s,r))}function Lw({config:n,domListeners:t},e){const{eventOptions:s,domTarget:r}=n,i=vt(r);if(!i)throw new Error("domTarget must be defined");Xo(i,i_(t),s);for(let[o,a]of Object.entries(e)){const c=o.slice(2).toLowerCase();t.push([c,n_(...a)])}o_(i,t,s)}function qw({config:n},t){const e={},s=n.eventOptions.capture?"Capture":"";for(let[r,i]of Object.entries(t)){const o=Array.isArray(i)?i:[i],a=r+s;e[a]=n_(...o)}return e}function i_(n=[]){return n.splice(0,n.length)}function Xt(n,t,e){n[t]||(n[t]=[]),n[t].push(e)}function o_(n,t=[],e={}){if(n)for(let[s,r]of t)n.addEventListener(s,r,e)}function Xo(n,t=[],e={}){if(n)for(let[s,r]of t)n.removeEventListener(s,r,e)}function ic(n,t){return n.map((e,s)=>e+t[s])}function Xh(n,t){return n.map((e,s)=>e-t[s])}function Do(n){return Math.hypot(...n)}function a_(n,t=n){const e=Do(t),s=e===0?0:1/e,r=t.map(o=>s*o);return{distance:Do(n),direction:r}}function c_(n,t,e){const s=Do(t),r=s===0?0:1/s,i=e===0?0:1/e,o=i*s,a=t.map(u=>i*u),c=t.map(u=>r*u),l=Do(n);return{velocities:a,velocity:o,distance:l,direction:c}}function oc(n){return Math.sign?Math.sign(n):+(n>0)-+(n<0)||+n}function Bw(n,t,e){return Math.max(t,Math.min(n,e))}function Uw(n,t){return Math.pow(n,t*5)}function hp(n,t,e){return t===0||Math.abs(t)===1/0?Uw(n,e):n*t*e/(t+e*n)}function dp(n,t,e,s=.15){return s===0?Bw(n,t,e):n<t?-hp(t-n,e-t,s)+t:n>e?+hp(n-e,e-t,s)+e:n}var jw=Object.defineProperty,$w=(n,t,e)=>t in n?jw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ta=(n,t,e)=>($w(n,typeof t!="symbol"?t+"":t,e),e);const xn=new Map,Ww=n=>n;class l_{constructor(t,e=[]){this.controller=t,this.args=e,Ta(this,"debounced",!0),Ta(this,"setTimeout",(s,r=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(s,r,...i)}),Ta(this,"clearTimeout",()=>{clearTimeout(this.controller.timeouts[this.stateKey])}),Ta(this,"fireGestureHandler",(s=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!s&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const c=this.state.active,l=this.state._active;this.state.active=l,this.state.first=l&&!c,this.state.last=c&&!l,this.controller.state.shared[this.ingKey]=l}const r=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||r>0,o={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:r,down:i},a=this.handler(o);return this.state.memo=a!==void 0?a:this.state.memo,o}),this.controller=t,this.args=e}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||Ww}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,e){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:e,threshold:s}=this.config,{_bounds:r,_initial:i,_active:o,_intentional:a,lastOffset:c,movement:l}=this.state,u=this.getInternalMovement(t,this.state),h=this.transform(s).map(Math.abs),d=a[0]===!1?fp(u[0],h[0]):a[0],f=a[1]===!1?fp(u[1],h[1]):a[1],p=this.checkIntentionality([d,f],u);if(p._blocked)return{...p,_movement:u,delta:[0,0]};const m=p._intentional,g=u;let v=[m[0]!==!1?u[0]-m[0]:0,m[1]!==!1?u[1]-m[1]:0];const w=ic(v,c),x=o?e:[0,0];return v=pp(r,ic(v,i),x),{...p,intentional:m[0]!==!1||m[1]!==!1,_initial:i,_movement:g,movement:v,values:t,offset:pp(r,w,x),delta:Xh(v,l)}}clean(){this.clearTimeout()}}function fp(n,t){return Math.abs(n)>=t?oc(n)*t:!1}function pp(n,[t,e],[s,r]){const[[i,o],[a,c]]=n;return[dp(t,i,o,s),dp(e,a,c,r)]}function _e({state:n},t,e){const{timeStamp:s,type:r}=t,i=n.values,o=e?0:s-n.startTime;return{_lastEventType:r,event:t,timeStamp:s,elapsedTime:o,previous:i}}function Nr({state:n,config:t,stateKey:e,args:s},r,i){const o=n.offset,a=i.timeStamp,{initial:c,bounds:l}=t,u={...Gu()[e],_active:!0,args:s,values:r,initial:r,offset:o,lastOffset:o,startTime:a};return{...u,_initial:rc(c,u),_bounds:rc(l,u)}}class Zc extends l_{getInternalMovement(t,e){return Xh(t,e.initial)}checkIntentionality(t,e){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[s,r]=e.map(Math.abs),i=this.state.axis||(s>r?"x":s<r?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:i}:i?this.config.axis&&i!==this.config.axis?{_intentional:t,_blocked:!0,axis:i}:(t[i==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(t,e){const s=this.getMovement(t);if(!s._blocked){const r=e.timeStamp-this.state.timeStamp;Object.assign(s,c_(s.movement,s.delta,r))}return s}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}var Gw=Object.defineProperty,zw=(n,t,e)=>t in n?Gw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ce=(n,t,e)=>(zw(n,typeof t!="symbol"?t+"":t,e),e);const Hw=3;function mp(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}class Yw extends Zc{constructor(){super(...arguments),Ce(this,"ingKey","dragging"),Ce(this,"stateKey","drag"),Ce(this,"setPointerCapture",t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:e,pointerId:s}=t;e&&"setPointerCapture"in e&&e.setPointerCapture(s),this.updateGestureState({_dragTarget:e,_dragPointerId:s})}),Ce(this,"releasePointerCapture",()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:e}=this.state;if(e&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(e)))try{t.releasePointerCapture(e)}catch{}}),Ce(this,"preventScroll",t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()}),Ce(this,"getEventId",t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId),Ce(this,"isValidEvent",t=>this.state._pointerId===this.getEventId(t)),Ce(this,"shouldPreventWindowScrollY",this.config.preventWindowScrollY&&this.controller.supportsTouchEvents),Ce(this,"setUpWindowScrollDetection",t=>{mp(t),Fw(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)}),Ce(this,"setUpDelayedDragTrigger",t=>{this.state._dragDelayed=!0,mp(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)}),Ce(this,"setStartState",t=>{const e=ei(t,this.transform);this.updateSharedState(Sn(t)),this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(e))}),Ce(this,"onDragStart",t=>{s_(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))}),Ce(this,"onDragChange",t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let e;if(document.pointerLockElement){const{movementX:c,movementY:l}=t;e=ic(this.transform([c,l]),this.state.values)}else e=ei(t,this.transform);const s=this.getKinematics(e,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&s.axis)if(s.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const r=Sn(t);this.updateSharedState(r);const i=_e(this,t),o=Do(s._movement);let{_dragIsTap:a}=this.state;a&&o>=Hw&&(a=!1),this.updateGestureState({...i,...s,_dragIsTap:a}),this.fireGestureHandler()}),Ce(this,"onDragEnd",t=>{if(r_(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const e=this.state._dragIsTap,[s,r]=this.state.velocities,[i,o]=this.state.movement,[a,c]=this.state._intentional,[l,u]=this.config.swipeVelocity,[h,d]=this.config.swipeDistance,f=this.config.swipeDuration,p={..._e(this,t),...this.getMovement(this.state.values)},m=[0,0];p.elapsedTime<f&&(a!==!1&&Math.abs(s)>l&&Math.abs(i)>h&&(m[0]=oc(s)),c!==!1&&Math.abs(r)>u&&Math.abs(o)>d&&(m[1]=oc(r))),this.updateSharedState({buttons:0}),this.updateGestureState({...p,tap:e,swipe:m}),this.fireGestureHandler(this.config.filterTaps&&e===!0)}),Ce(this,"clean",()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Vw(this.controller,this.stateKey)}),Ce(this,"onCancel",()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Bi(this.fireGestureHandler))}),Ce(this,"onClick",t=>{this.state._dragIsTap||t.stopPropagation()})}startDrag(t,e=!1){!this.state._active||this.state._dragStarted||(e||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(Xt(t,"onTouchStart",this.onDragStart),Xt(t,"onTouchMove",this.onDragChange),Xt(t,"onTouchEnd",this.onDragEnd),Xt(t,"onTouchCancel",this.onDragEnd)):(Xt(t,"onPointerDown",this.onDragStart),Xt(t,"onPointerMove",this.onDragChange),Xt(t,"onPointerUp",this.onDragEnd),Xt(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const e=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";Xt(t,e,this.onClick)}}}function Zo(n={},t){const e={};for(const[s,r]of Object.entries(t))switch(typeof r){case"function":e[s]=r.call(e,n[s],s,n);break;case"object":e[s]=Zo(n[s],r);break;case"boolean":r&&(e[s]=n[s]);break}return e}const Xw=180,Zw=.15,Kw=.5,Jw=50,Qw=250,u_={threshold(n=0){return sr(n)},rubberband(n=0){switch(n){case!0:return sr(Zw);case!1:return sr(0);default:return sr(n)}},enabled(n=!0){return n},triggerAllEvents(n=!1){return n},initial(n=0){return typeof n=="function"?n:sr(n)},transform:!0},Zh={...u_,axis:!0,lockDirection(n=!1){return n},bounds(n={}){if(typeof n=="function")return i=>Zh.bounds(n(i));const{left:t=-1/0,right:e=1/0,top:s=-1/0,bottom:r=1/0}=n;return[[t,e],[s,r]]}},tT=typeof window<"u"&&window.document&&window.document.createElement,eT={enabled(n=!0){return n},domTarget:!0,window(n=tT?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform:!0},nT={...u_,bounds(n,t,{distanceBounds:e={},angleBounds:s={}}){const r=o=>{const a=up(rc(e,o),{min:-1/0,max:1/0});return[a.min,a.max]},i=o=>{const a=up(rc(s,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof e!="function"&&typeof s!="function"?[r(),i()]:o=>[r(o),i(o)]}},sT={...Zh,useTouch(n=!0){return n&&Jg()},preventWindowScrollY(n=!1){return n},threshold(n,t,{filterTaps:e=!1,lockDirection:s=!1,axis:r=void 0}){const i=sr(n,e?3:s||r?1:0);return this.filterTaps=e,i},swipeVelocity(n=Kw){return sr(n)},swipeDistance(n=Jw){return sr(n)},swipeDuration(n=Qw){return n},delay(n=0){switch(n){case!0:return Xw;case!1:return 0;default:return n}}};function rT(n){return Zo(n,eT)}function lu(n={}){return Zo(n,Zh)}function iT(n={}){return Zo(n,nT)}function oT(n={}){return Zo(n,sT)}function aT(n,t=new Set){const{drag:e,wheel:s,move:r,scroll:i,pinch:o,hover:a,eventOptions:c,window:l,transform:u,domTarget:h,enabled:d}=n,f=rT({domTarget:h,eventOptions:c,transform:u,window:l,enabled:d});return t.has("onDrag")&&(f.drag=oT(e)),t.has("onWheel")&&(f.wheel=lu(s)),t.has("onScroll")&&(f.scroll=lu(i)),t.has("onMove")&&(f.move=lu(r)),t.has("onPinch")&&(f.pinch=iT(o)),t.has("onHover")&&(f.hover={enabled:!0,...a}),f}function cT(n,t,e={}){const s=lT(n),r=new Rw(s);return r.config=t,r.handlers=n,r.nativeRefs=e,Xc()&&!t.manual&&(zc(r.bind),Uh(r.clean)),r}function lT(n){const t=new Set;return n.drag&&t.add(xn.get("drag")),n.wheel&&t.add(xn.get("wheel")),n.scroll&&t.add(xn.get("scroll")),n.move&&t.add(xn.get("move")),n.pinch&&t.add(xn.get("pinch")),n.hover&&t.add(xn.get("hover")),t}var uT=Object.defineProperty,hT=(n,t,e)=>t in n?uT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,is=(n,t,e)=>(hT(n,typeof t!="symbol"?t+"":t,e),e);class gp extends Zc{constructor(){super(...arguments),is(this,"ingKey","moving"),is(this,"stateKey","move"),is(this,"debounced",!0),is(this,"onMove",t=>{this.enabled&&(this.setTimeout(this.onMoveEnd),this.state._active?this.onMoveChange(t):this.onMoveStart(t))}),is(this,"onMoveStart",t=>{this.updateSharedState(Sn(t));const e=ei(t,this.transform);this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0)}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()}),is(this,"onMoveChange",t=>{this.updateSharedState(Sn(t));const e=ei(t,this.transform);this.updateGestureState({..._e(this,t),...this.getKinematics(e,t)}),this.fireGestureHandler()}),is(this,"onMoveEnd",()=>{if(this.clean(),!this.state._active)return;const t=this.state.values;this.updateGestureState(this.getMovement(t)),this.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),this.fireGestureHandler()}),is(this,"hoverTransform",()=>this.controller.config.hover.transform||this.controller.config.transform),is(this,"onPointerEnter",t=>{if(this.controller.state.shared.hovering=!0,!!this.controller.config.enabled){if(this.controller.config.hover.enabled){const e=ei(t,this.hoverTransform()),s={...this.controller.state.shared,...this.state,..._e(this,t,!0),args:this.args,values:e,active:!0,hovering:!0};this.controller.handlers.hover({...s,...this.mapStateValues(s)})}"move"in this.controller.handlers&&this.onMoveStart(t)}}),is(this,"onPointerLeave",t=>{if(this.controller.state.shared.hovering=!1,"move"in this.controller.handlers&&this.onMoveEnd(),!this.controller.config.hover.enabled)return;const e=ei(t,this.hoverTransform()),s={...this.controller.state.shared,...this.state,..._e(this,t),args:this.args,values:e,active:!1};this.controller.handlers.hover({...s,...this.mapStateValues(s)})})}addBindings(t){"move"in this.controller.handlers&&Xt(t,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(Xt(t,"onPointerEnter",this.onPointerEnter),Xt(t,"onPointerLeave",this.onPointerLeave))}}class dT extends l_{getInternalMovement(t,e){const s=e.values[1];let[r,i=s]=t,o=i-s,a=e.turns;return Math.abs(o)>270&&(a+=oc(o)),Xh([r,i-360*a],e.initial)}getKinematics(t,e){const s=this.getMovement(t),r=(t[1]-s._movement[1]-this.state.initial[1])/360,i=e.timeStamp-this.state.timeStamp,{distance:o,velocity:a,...c}=c_(s.movement,s.delta,i);return{turns:r,...s,...c}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}var fT=Object.defineProperty,pT=(n,t,e)=>t in n?fT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,$e=(n,t,e)=>(pT(n,typeof t!="symbol"?t+"":t,e),e);const mT=7,gT=260;class _T extends dT{constructor(){super(...arguments),$e(this,"ingKey","pinching"),$e(this,"stateKey","pinch"),$e(this,"onPinchStart",t=>{s_(this.controller,t);const e=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(o=>e.has(o))||e.size<2)return;const s=Array.from(e).slice(0,2),{values:r,origin:i}=op(t,s,this.transform);this.updateSharedState(Sn(t)),this.updateGestureState({...Nr(this,r,t),..._e(this,t,!0),_pointerIds:s,cancel:this.onCancel,origin:i}),this.updateGestureState(this.getMovement(r)),this.fireGestureHandler()}),$e(this,"onPinchChange",t=>{const{canceled:e,_active:s}=this.state;if(e||!s||t.timeStamp===this.state.timeStamp)return;const r=Sn(t);this.updateSharedState(r);try{const{values:i,origin:o}=op(t,this.state._pointerIds,this.transform),a=this.getKinematics(i,t);this.updateGestureState({..._e(this,t),...a,origin:o}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}}),$e(this,"onPinchEnd",t=>{r_(this.controller,t);const e=Yh(t);this.state._pointerIds.every(s=>!e.includes(s))||(this.clean(),this.state._active&&(this.updateGestureState({..._e(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))}),$e(this,"onCancel",()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())}),$e(this,"onGestureStart",t=>{if(!this.enabled)return;t.preventDefault();const e=lp(t,this.transform);this.updateSharedState(Sn(t)),this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()}),$e(this,"onGestureChange",t=>{const{canceled:e,_active:s}=this.state;if(e||!s)return;t.preventDefault();const r=Sn(t);this.updateSharedState(r);const i=lp(t,this.transform);i[0]=(i[0]-this.state.event.scale)*gT+this.state.values[0];const o=this.getKinematics(i,t);this.updateGestureState({..._e(this,t),...o,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()}),$e(this,"onGestureEnd",t=>{this.clean(),this.state._active&&(this.updateGestureState({..._e(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())}),$e(this,"wheelShouldRun",t=>this.enabled&&t.ctrlKey),$e(this,"getWheelValuesFromEvent",t=>{const[,e]=t_(t,this.transform),{values:[s,r]}=this.state;return{values:[s-e*mT,r!==void 0?r:0],origin:[t.clientX,t.clientY],delta:[0,e]}}),$e(this,"onWheel",t=>{this.wheelShouldRun(t)&&(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))}),$e(this,"onWheelStart",t=>{const{values:e,delta:s,origin:r}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(Sn(t)),this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0),initial:this.state.values,offset:e,delta:s,origin:r}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()}),$e(this,"onWheelChange",t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(Sn(t));const{values:e,origin:s,delta:r}=this.getWheelValuesFromEvent(t);this.updateGestureState({..._e(this,t),...this.getKinematics(e,t),origin:s,delta:r}),this.fireGestureHandler()}),$e(this,"onWheelEnd",()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())})}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(Xt(t,"onGestureStart",this.onGestureStart),Xt(t,"onGestureChange",this.onGestureChange),Xt(t,"onGestureEnd",this.onGestureEnd)):(Xt(t,"onTouchStart",this.onPinchStart),Xt(t,"onTouchMove",this.onPinchChange),Xt(t,"onTouchEnd",this.onPinchEnd),Xt(t,"onTouchCancel",this.onPinchEnd),Xt(t,"onWheel",this.onWheel))}}var vT=Object.defineProperty,yT=(n,t,e)=>t in n?vT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,io=(n,t,e)=>(yT(n,typeof t!="symbol"?t+"":t,e),e);class bT extends Zc{constructor(){super(...arguments),io(this,"ingKey","scrolling"),io(this,"stateKey","scroll"),io(this,"debounced",!0),io(this,"handleEvent",t=>{if(!this.enabled)return;this.clearTimeout(),this.setTimeout(this.onEnd);const e=Ow(t,this.transform);if(this.updateSharedState(Sn(t)),this.state._active)this.updateGestureState({..._e(this,t),...this.getKinematics(e,t)});else{this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0),initial:this.state.values});const s=this.getMovement(e),r=a_(s.delta);this.updateGestureState(s),this.updateGestureState(r)}this.fireGestureHandler()}),io(this,"onEnd",()=>{this.clean(),this.state._active&&(this.updateGestureState({...this.getMovement(this.state.values),_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler())})}addBindings(t){Xt(t,"onScroll",this.handleEvent)}}var wT=Object.defineProperty,TT=(n,t,e)=>t in n?wT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,oo=(n,t,e)=>(TT(n,typeof t!="symbol"?t+"":t,e),e);class ST extends Zc{constructor(){super(...arguments),oo(this,"ingKey","wheeling"),oo(this,"stateKey","wheel"),oo(this,"debounced",!0),oo(this,"handleEvent",t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(Sn(t));const e=ic(t_(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({..._e(this,t),...this.getKinematics(e,t)});else{this.updateGestureState({...Nr(this,e,t),..._e(this,t,!0),initial:this.state.values});const s=this.getMovement(e),r=a_(s.delta);this.updateGestureState(s),this.updateGestureState(r)}this.fireGestureHandler()}),oo(this,"onEnd",()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()})}addBindings(t){Xt(t,"onWheel",this.handleEvent)}}const xT=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function MT(n){const t={},e={},s=new Set;for(let r in n)xT.test(r)?(s.add(RegExp.lastMatch),e[r]=n[r]):t[r]=n[r];return[e,t,s]}function Kh(n,t){const[e,s,r]=MT(n);xn.set("drag",Yw),xn.set("hover",gp),xn.set("move",gp),xn.set("pinch",_T),xn.set("scroll",bT),xn.set("wheel",ST);const i=aT(t,r),o={};return r.has("onDrag")&&(o.drag=ao(e,"onDrag")),r.has("onWheel")&&(o.wheel=ao(e,"onWheel")),r.has("onScroll")&&(o.scroll=ao(e,"onScroll")),r.has("onMove")&&(o.move=ao(e,"onMove")),r.has("onPinch")&&(o.pinch=ao(e,"onPinch")),r.has("onHover")&&(o.hover=e.onHover),cT(o,i,s)}function ao(n,t){const e=t+"Start",s=t+"End";return i=>{let o;return i.first&&e in n&&n[e](i),t in n&&(o=n[t](i)),i.last&&s in n&&n[s](i),o}}const h_="15.0.4",_p=(n,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:n}),vp=(n,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:n}),zu=(n,t)=>({startTime:t,type:"setValue",value:n}),d_=(n,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:n}),f_=(n,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-n)/r),ni=n=>n.type==="exponentialRampToValue",ac=n=>n.type==="linearRampToValue",tr=n=>ni(n)||ac(n),Jh=n=>n.type==="setValue",Cs=n=>n.type==="setValueCurve",cc=(n,t,e,s)=>{const r=n[t];return r===void 0?s:tr(r)||Jh(r)?r.value:Cs(r)?r.values[r.values.length-1]:f_(e,cc(n,t-1,r.startTime,s),r)},yp=(n,t,e,s,r)=>e===void 0?[s.insertTime,r]:tr(e)?[e.endTime,e.value]:Jh(e)?[e.startTime,e.value]:Cs(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,cc(n,t-1,e.startTime,r)],Hu=n=>n.type==="cancelAndHold",Yu=n=>n.type==="cancelScheduledValues",Ys=n=>Hu(n)||Yu(n)?n.cancelTime:ni(n)||ac(n)?n.endTime:n.startTime,bp=(n,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((n-t)/(s-t)):0,wp=(n,t,e,{endTime:s,value:r})=>e+(n-t)/(s-t)*(r-e),CT=(n,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?n[e]:(1-(t-e))*n[e]+(1-(s-t))*n[s]},ET=(n,{duration:t,startTime:e,values:s})=>{const r=(n-e)/t*(s.length-1);return CT(s,r)},Sa=n=>n.type==="setTarget";class AT{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Ys(t);if(Hu(t)||Yu(t)){const s=this._automationEvents.findIndex(i=>Yu(t)&&Cs(i)?i.startTime+i.duration>=e:Ys(i)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Hu(t)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&tr(r)){if(i!==void 0&&Sa(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Cs(i)?i.startTime+i.duration:Ys(i),a=i===void 0?this._defaultValue:Cs(i)?i.values[i.values.length-1]:i.value,c=ni(r)?bp(e,o,a,r):wp(e,o,a,r),l=ni(r)?_p(c,e,this._currenTime):vp(c,e,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&Sa(i)&&this._automationEvents.push(zu(this.getValue(e),e)),i!==void 0&&Cs(i)&&i.startTime+i.duration>e){const o=e-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const d=l*h%1;u[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=d_(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>Ys(o)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Cs(r)&&Ys(r)+r.duration>e)return!1;const i=ni(t)?_p(t.value,t.endTime,this._currenTime):ac(t)?vp(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(i);else{if(Cs(t)&&e+t.duration>Ys(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>Ys(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];Sa(r)&&s.unshift(zu(cc(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(o=>Ys(o)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,i=this._automationEvents[r];if(i!==void 0&&Sa(i)&&(s===void 0||!tr(s)||s.insertTime>t))return f_(t,cc(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Jh(i)&&(s===void 0||!tr(s)))return i.value;if(i!==void 0&&Cs(i)&&(s===void 0||!tr(s)||i.startTime+i.duration>t))return t<i.startTime+i.duration?ET(t,i):i.values[i.values.length-1];if(i!==void 0&&tr(i)&&(s===void 0||!tr(s)))return i.value;if(s!==void 0&&ni(s)){const[o,a]=yp(this._automationEvents,r,i,s,this._defaultValue);return bp(t,o,a,s)}if(s!==void 0&&ac(s)){const[o,a]=yp(this._automationEvents,r,i,s,this._defaultValue);return wp(t,o,a,s)}return this._defaultValue}}const NT=n=>({cancelTime:n,type:"cancelAndHold"}),kT=n=>({cancelTime:n,type:"cancelScheduledValues"}),OT=(n,t)=>({endTime:t,type:"exponentialRampToValue",value:n}),IT=(n,t)=>({endTime:t,type:"linearRampToValue",value:n}),PT=(n,t,e)=>({startTime:t,target:n,timeConstant:e,type:"setTarget"}),RT=()=>new DOMException("","AbortError"),DT=n=>(t,e,[s,r,i],o)=>{n(t[r],[e,s,i],a=>a[0]===e&&a[1]===s,o)},VT=n=>(t,e,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},FT=n=>(t,e)=>{n.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Ai=new WeakSet,p_=new WeakMap,Qh=new WeakMap,m_=new WeakMap,td=new WeakMap,Kc=new WeakMap,g_=new WeakMap,Xu=new WeakMap,Zu=new WeakMap,Ku=new WeakMap,__={construct(){return __}},LT=n=>{try{const t=new Proxy(n,__);new t}catch{return!1}return!0},Tp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Sp=(n,t)=>{const e=[];let s=n.replace(/^[\s]+/,""),r=s.match(Tp);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());e.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Tp)}return[e.join(";"),s]},xp=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Mp=n=>{if(!LT(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},qT=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{const v=u.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();const w=l.get(p);if(w!==void 0){const _=w.get(m);if(_!==void 0)return _}const x=i(p),T=x.audioWorklet===void 0?r(m).then(([_,b])=>{const[y,S]=Sp(_,b),O=`${y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return e(O)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;s(x.currentTime,x.sampleRate,()=>_(class{},void 0,(b,y)=>{if(b.trim()==="")throw t();const S=Zu.get(x);if(S!==void 0){if(S.has(b))throw t();Mp(y),xp(y.parameterDescriptors),S.set(b,y)}else Mp(y),xp(y.parameterDescriptors),Zu.set(x,new Map([[b,y]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(n(h,h))]).then(([[_,b],y])=>{const S=f+1;f=S;const[O,E]=Sp(_,b),C=`${O};((AudioWorkletProcessor,registerProcessor)=>{${E}
})(${y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,k=new Blob([C],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(k);return x.audioWorklet.addModule(R,g).then(()=>{if(a(x))return x;const L=o(x);return L.audioWorklet.addModule(R,g).then(()=>L)}).then(L=>{if(c===null)throw new SyntaxError;try{new c(L,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return w===void 0?l.set(p,new Map([[m,T]])):w.set(m,T),T.then(()=>{const _=u.get(p);_===void 0?u.set(p,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(p);_!==void 0&&_.delete(m)}),T}},Yn=(n,t)=>{const e=n.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},Jc=(n,t)=>{const e=Array.from(n).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return n.delete(s),s},v_=(n,t,e,s)=>{const r=Yn(n,t),i=Jc(r,o=>o[0]===e&&o[1]===s);return r.size===0&&n.delete(t),i},Ko=n=>Yn(g_,n),Ni=n=>{if(Ai.has(n))throw new Error("The AudioNode is already stored.");Ai.add(n),Ko(n).forEach(t=>t(!0))},y_=n=>"port"in n,Jo=n=>{if(!Ai.has(n))throw new Error("The AudioNode is not stored.");Ai.delete(n),Ko(n).forEach(t=>t(!1))},Ju=(n,t)=>{!y_(n)&&t.every(e=>e.size===0)&&Jo(n)},BT=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,m,g,v,w)=>{const{activeInputs:x,passiveInputs:T}=i(m),{outputs:_}=i(p),b=a(p),y=S=>{const O=c(m),E=c(p);if(S){const C=v_(T,p,g,v);n(x,p,C,!1),!w&&!h(p)&&e(E,O,g,v),d(m)&&Ni(m)}else{const C=s(x,p,g,v);t(T,v,C,!1),!w&&!h(p)&&r(E,O,g,v);const k=o(m);if(k===0)u(m)&&Ju(m,x);else{const R=f.get(m);R!==void 0&&clearTimeout(R),f.set(m,setTimeout(()=>{u(m)&&Ju(m,x)},k*1e3))}}};return l(_,[m,g,v],S=>S[0]===m&&S[1]===g&&S[2]===v,!0)?(b.add(y),u(p)?n(x,p,[g,v,y],!0):t(T,v,[p,g,y],!0),!0):!1}},UT=n=>(t,e,[s,r,i],o)=>{const a=t.get(s);a===void 0?t.set(s,new Set([[r,e,i]])):n(a,[r,e,i],c=>c[0]===r&&c[1]===e,o)},jT=n=>(t,e)=>{const s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},$T=n=>(t,e)=>{n(t).add(e)},WT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},GT=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=r(o),l={...WT,...a},u=s(c,l),h=i(c)?t():null;super(o,!1,u,h),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const a=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=a,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const a=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=a,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},Be=(n,t)=>n.context===t,zT=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Be(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,c)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},lc=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},gs=()=>new DOMException("","IndexSizeError"),ed=n=>{n.getChannelData=(t=>e=>{try{return t.call(n,e)}catch(s){throw s.code===12?gs():s}})(n.getChannelData)},HT={numberOfChannels:1},YT=(n,t,e,s,r,i,o,a)=>{let c=null;return class b_{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...HT,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&t(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw e();return typeof p.copyFromChannel!="function"?(o(p),ed(p)):t(lc,()=>lc(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===b_.prototype||n.has(u)}}},on=-34028234663852886e22,Ye=-on,Os=n=>Ai.has(n),XT={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ZT=(n,t,e,s,r,i,o,a)=>class extends n{constructor(c,l){const u=i(c),h={...XT,...l},d=r(u,h),f=o(u),p=f?t():null;super(c,!1,d,p),this._audioBufferSourceNodeRenderer=p,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=e(this,f,d.playbackRate,Ye,on)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=l;const u=this._nativeAudioBufferSourceNode.onended;this._onended=u!==null&&u===l?c:u}get playbackRate(){return this._playbackRate}start(c=0,l=0,u){if(this._nativeAudioBufferSourceNode.start(c,l,u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=u===void 0?[c,l]:[c,l,u]),this.context.state!=="closed"){Ni(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),Os(this)&&Jo(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},KT=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=e(l);const d=Be(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},JT=n=>"playbackRate"in n,QT=n=>"frequency"in n&&"gain"in n,tS=n=>"offset"in n,eS=n=>!("frequency"in n)&&"gain"in n,nS=n=>"detune"in n&&"frequency"in n,sS=n=>"pan"in n,Ke=n=>Yn(p_,n),Qo=n=>Yn(m_,n),Qu=(n,t)=>{const{activeInputs:e}=Ke(n);e.forEach(r=>r.forEach(([i])=>{t.includes(n)||Qu(i,[...t,n])}));const s=JT(n)?[n.playbackRate]:y_(n)?Array.from(n.parameters.values()):QT(n)?[n.Q,n.detune,n.frequency,n.gain]:tS(n)?[n.offset]:eS(n)?[n.gain]:nS(n)?[n.detune,n.frequency]:sS(n)?[n.pan]:[];for(const r of s){const i=Qo(r);i!==void 0&&i.activeInputs.forEach(([o])=>Qu(o,t))}Os(n)&&Jo(n)},w_=n=>{Qu(n.destination,[])},rS=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),iS=(n,t,e,s,r,i,o,a,c)=>class extends n{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let u;try{u=new c(l)}catch(f){throw f.code===12&&f.message==="sampleRate is not in range"?e():f}if(u===null)throw s();if(!rS(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&u.sampleRate!==l.sampleRate)throw e();super(u,2);const{latencyHint:h}=l,{sampleRate:d}=u;if(this._baseLatency=typeof u.baseLatency=="number"?u.baseLatency:h==="balanced"?512/d:h==="interactive"||h===void 0?256/d:h==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(h*d/128)))*128/d,this._nativeAudioContext=u,c.name==="webkitAudioContext"?(this._nativeGainNode=u.createGain(),this._nativeOscillatorNode=u.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(u.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,u.state==="running"){this._state="suspended";const f=()=>{this._state==="suspended"&&(this._state=null),u.removeEventListener("statechange",f)};u.addEventListener("statechange",f)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),w_(this)}))}createMediaElementSource(l){return new r(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new o(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,u)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?l():this.resume().then(l,u)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?t():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?t():l})}},oS=(n,t,e,s,r,i,o,a)=>class extends n{constructor(c,l){const u=i(c),h=o(u),d=r(u,l,h),f=h?t(a):null;super(c,!1,d,f),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},aS=n=>{const t=new WeakMap,e=async(s,r)=>{const i=r.destination;return t.set(r,i),await n(s,r,i),i};return{render(s,r){const i=t.get(r);return i!==void 0?Promise.resolve(i):e(s,r)}}},cS=(n,t,e,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),b=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),y=o(l);let S=!1,O=[0,0,-1,0,1,0],E=[0,0,0];const C=()=>{if(S)return;S=!0;const z=s(l,256,9,0);z.onaudioprocess=({inputBuffer:V})=>{const U=[i(V,_,0),i(V,_,1),i(V,_,2),i(V,_,3),i(V,_,4),i(V,_,5)];U.some(($,H)=>$!==O[H])&&(u.setOrientation(...U),O=U);const Z=[i(V,_,6),i(V,_,7),i(V,_,8)];Z.some(($,H)=>$!==E[H])&&(u.setPosition(...Z),E=Z)},b.connect(z)},k=z=>V=>{V!==O[z]&&(O[z]=V,u.setOrientation(...O))},R=z=>V=>{V!==E[z]&&(E[z]=V,u.setPosition(...E))},L=(z,V,U)=>{const Z=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V});Z.connect(b,0,z),Z.start(),Object.defineProperty(Z.offset,"defaultValue",{get(){return V}});const $=n({context:c},y,Z.offset,Ye,on);return a($,"value",H=>()=>H.call($),H=>K=>{try{H.call($,K)}catch(st){if(st.code!==9)throw st}C(),y&&U(K)}),$.cancelAndHoldAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.cancelAndHoldAtTime),$.cancelScheduledValues=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.cancelScheduledValues),$.exponentialRampToValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.exponentialRampToValueAtTime),$.linearRampToValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.linearRampToValueAtTime),$.setTargetAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setTargetAtTime),$.setValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setValueAtTime),$.setValueCurveAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setValueCurveAtTime),$};return{forwardX:L(0,0,k(0)),forwardY:L(1,0,k(1)),forwardZ:L(2,-1,k(2)),positionX:L(6,0,R(0)),positionY:L(7,0,R(1)),positionZ:L(8,0,R(2)),upX:L(3,0,k(3)),upY:L(4,1,k(4)),upZ:L(5,0,k(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:w,upY:x,upZ:T}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return w},get upY(){return x},get upZ(){return T}}},uc=n=>"context"in n,ta=n=>uc(n[0]),Br=(n,t,e,s)=>{for(const r of n)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(t),!0},Cp=(n,t,[e,s],r)=>{Br(n,[t,e,s],i=>i[0]===t&&i[1]===e,r)},Ep=(n,[t,e,s],r)=>{const i=n.get(t);i===void 0?n.set(t,new Set([[e,s]])):Br(i,[e,s],o=>o[0]===e,r)},Ui=n=>"inputs"in n,hc=(n,t,e,s)=>{if(Ui(t)){const r=t.inputs[s];return n.connect(r,e,0),[r,e,0]}return n.connect(t,e,s),[t,e,s]},T_=(n,t,e)=>{for(const s of n)if(s[0]===t&&s[1]===e)return n.delete(s),s;return null},lS=(n,t,e)=>Jc(n,s=>s[0]===t&&s[1]===e),S_=(n,t)=>{if(!Ko(n).delete(t))throw new Error("Missing the expected event listener.")},x_=(n,t,e)=>{const s=Yn(n,t),r=Jc(s,i=>i[0]===e);return s.size===0&&n.delete(t),r},dc=(n,t,e,s)=>{Ui(t)?n.disconnect(t.inputs[s],e,0):n.disconnect(t,e,s)},Wt=n=>Yn(Qh,n),Vo=n=>Yn(td,n),Ir=n=>Xu.has(n),Ga=n=>!Ai.has(n),Ap=(n,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?e(!0):e(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),uu=(n,t)=>{const e=new Map;for(const s of n)for(const r of s){const i=e.get(r);e.set(r,i===void 0?1:i+1)}e.forEach((s,r)=>t(r,s))},fc=n=>"context"in n,uS=n=>{const t=new Map;n.connect=(e=>(s,r=0,i=0)=>{const o=fc(s)?e(s,r,i):e(s,r),a=t.get(s);return a===void 0?t.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(e=>(s,r,i)=>{if(e.apply(n),s===void 0)t.clear();else if(typeof s=="number")for(const[o,a]of t){const c=a.filter(l=>l.output!==s);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(s))if(r===void 0)t.delete(s);else{const o=t.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?t.delete(s):t.set(s,a)}}for(const[o,a]of t)a.forEach(c=>{fc(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},hS=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:i}=Qo(t),{outputs:o}=Ke(n),a=Ko(n),c=l=>{const u=Wt(n),h=Vo(t);if(l){const d=x_(i,n,e);Cp(r,n,d,!1),!s&&!Ir(n)&&u.connect(h,e)}else{const d=lS(r,n,e);Ep(i,d,!1),!s&&!Ir(n)&&u.disconnect(h,e)}};return Br(o,[t,e],l=>l[0]===t&&l[1]===e,!0)?(a.add(c),Os(n)?Cp(r,n,[e,c],!0):Ep(i,[n,e,c],!0),!0):!1},dS=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:i}=Ke(t),o=T_(r[s],n,e);return o===null?[v_(i,n,e,s)[2],!1]:[o[2],!0]},fS=(n,t,e)=>{const{activeInputs:s,passiveInputs:r}=Qo(t),i=T_(s,n,e);return i===null?[x_(r,n,e)[1],!1]:[i[2],!0]},nd=(n,t,e,s,r)=>{const[i,o]=dS(n,e,s,r);if(i!==null&&(S_(n,i),o&&!t&&!Ir(n)&&dc(Wt(n),Wt(e),s,r)),Os(e)){const{activeInputs:a}=Ke(e);Ju(e,a)}},sd=(n,t,e,s)=>{const[r,i]=fS(n,e,s);r!==null&&(S_(n,r),i&&!t&&!Ir(n)&&Wt(n).disconnect(Vo(e),s))},pS=(n,t)=>{const e=Ke(n),s=[];for(const r of e.outputs)ta(r)?nd(n,t,...r):sd(n,t,...r),s.push(r[0]);return e.outputs.clear(),s},mS=(n,t,e)=>{const s=Ke(n),r=[];for(const i of s.outputs)i[1]===e&&(ta(i)?nd(n,t,...i):sd(n,t,...i),r.push(i[0]),s.outputs.delete(i));return r},gS=(n,t,e,s,r)=>{const i=Ke(n);return Array.from(i.outputs).filter(o=>o[0]===e&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(ta(o)?nd(n,t,...o):sd(n,t,...o),i.outputs.delete(o),o[0]))},_S=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m)=>class extends l{constructor(g,v,w,x){super(w),this._context=g,this._nativeAudioNode=w;const T=u(g);h(T)&&e(Ap,()=>Ap(T,m))!==!0&&uS(w),Qh.set(this,w),g_.set(this,new Set),g.state!=="closed"&&v&&Ni(this),n(this,x,w)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(g){this._nativeAudioNode.channelCount=g}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(g){this._nativeAudioNode.channelCountMode=g}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(g){this._nativeAudioNode.channelInterpretation=g}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(g,v=0,w=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw r();const x=u(this._context),T=p(x);if(d(g)||f(g))throw i();if(uc(g)){const b=Wt(g);try{const y=hc(this._nativeAudioNode,b,v,w),S=Ga(this);(T||S)&&this._nativeAudioNode.disconnect(...y),this.context.state!=="closed"&&!S&&Ga(g)&&Ni(g)}catch(y){throw y.code===12?i():y}if(t(this,g,v,w,T)){const y=c([this],g);uu(y,s(T))}return g}const _=Vo(g);if(_.name==="playbackRate"&&_.maxValue===1024)throw o();try{this._nativeAudioNode.connect(_,v),(T||Ga(this))&&this._nativeAudioNode.disconnect(_,v)}catch(b){throw b.code===12?i():b}if(hS(this,g,v,T)){const b=c([this],g);uu(b,s(T))}}disconnect(g,v,w){let x;const T=u(this._context),_=p(T);if(g===void 0)x=pS(this,_);else if(typeof g=="number"){if(g<0||g>=this.numberOfOutputs)throw r();x=mS(this,_,g)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||uc(g)&&w!==void 0&&(w<0||w>=g.numberOfInputs))throw r();if(x=gS(this,_,g,v,w),x.length===0)throw i()}for(const b of x){const y=c([this],b);uu(y,a)}}},vS=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g=null,v=null)=>{const w=m.value,x=new AT(w),T=p?s(x):null,_={get defaultValue(){return w},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(b){m.value=b,_.setValueAtTime(b,f.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")T===null&&x.flush(f.context.currentTime),x.add(r(b)),m.cancelAndHoldAtTime(b);else{const y=Array.from(x).pop();T===null&&x.flush(f.context.currentTime),x.add(r(b));const S=Array.from(x).pop();m.cancelScheduledValues(b),y!==S&&S!==void 0&&(S.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(S.value,S.endTime):S.type==="linearRampToValue"?m.linearRampToValueAtTime(S.value,S.endTime):S.type==="setValue"?m.setValueAtTime(S.value,S.startTime):S.type==="setValueCurve"&&m.setValueCurveAtTime(S.values,S.startTime,S.duration))}return _},cancelScheduledValues(b){return T===null&&x.flush(f.context.currentTime),x.add(i(b)),m.cancelScheduledValues(b),_},exponentialRampToValueAtTime(b,y){if(b===0)throw new RangeError;if(!Number.isFinite(y)||y<0)throw new RangeError;const S=f.context.currentTime;return T===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(w,S)),m.setValueAtTime(w,S)),x.add(o(b,y)),m.exponentialRampToValueAtTime(b,y),_},linearRampToValueAtTime(b,y){const S=f.context.currentTime;return T===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(w,S)),m.setValueAtTime(w,S)),x.add(a(b,y)),m.linearRampToValueAtTime(b,y),_},setTargetAtTime(b,y,S){return T===null&&x.flush(f.context.currentTime),x.add(c(b,y,S)),m.setTargetAtTime(b,y,S),_},setValueAtTime(b,y){return T===null&&x.flush(f.context.currentTime),x.add(l(b,y)),m.setValueAtTime(b,y),_},setValueCurveAtTime(b,y,S){const O=b instanceof Float32Array?b:new Float32Array(b);if(h!==null&&h.name==="webkitAudioContext"){const E=y+S,C=f.context.sampleRate,k=Math.ceil(y*C),R=Math.floor(E*C),L=R-k,z=new Float32Array(L);for(let U=0;U<L;U+=1){const Z=(O.length-1)/S*((k+U)/C-y),$=Math.floor(Z),H=Math.ceil(Z);z[U]=$===H?O[$]:(1-(Z-$))*O[$]+(1-(H-Z))*O[H]}T===null&&x.flush(f.context.currentTime),x.add(u(z,y,S)),m.setValueCurveAtTime(z,y,S);const V=R/C;V<E&&d(_,z[z.length-1],V),d(_,O[O.length-1],E)}else T===null&&x.flush(f.context.currentTime),x.add(u(O,y,S)),m.setValueCurveAtTime(O,y,S);return _}};return e.set(_,m),t.set(_,f),n(_,T),_},yS=n=>({replay(t){for(const e of n)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=e;t.setTargetAtTime(r,s,i)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=e;t.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class M_{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const bS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},wS=(n,t,e,s,r,i,o,a,c,l,u,h,d,f)=>class extends t{constructor(p,m,g){var v;const w=a(p),x=c(w),T=u({...bS,...g});d(T);const _=Zu.get(w),b=_==null?void 0:_.get(m),y=x||w.state!=="closed"?w:(v=o(w))!==null&&v!==void 0?v:w,S=r(y,x?null:p.baseLatency,l,m,b,T),O=x?s(m,T,b):null;super(p,!0,S,O);const E=[];S.parameters.forEach((k,R)=>{const L=e(this,x,k);E.push([R,L])}),this._nativeAudioWorkletNode=S,this._onprocessorerror=null,this._parameters=new M_(E),x&&n(w,this);const{activeInputs:C}=i(this);h(S,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(p){const m=typeof p=="function"?f(this,p):null;this._nativeAudioWorkletNode.onprocessorerror=m;const g=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=g!==null&&g===m?p:g}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function pc(n,t,e,s,r){if(typeof n.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),n.copyFromChannel(t[e],s,r);else{const i=n.getChannelData(s);if(t[e].byteLength===0)t[e]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(o)}}}const C_=(n,t,e,s,r)=>{typeof n.copyToChannel=="function"?t[e].byteLength!==0&&n.copyToChannel(t[e],s,r):t[e].byteLength!==0&&n.getChannelData(s).set(t[e],r)},mc=(n,t)=>{const e=[];for(let s=0;s<n;s+=1){const r=[],i=typeof t=="number"?t:t[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));e.push(r)}return e},TS=(n,t)=>{const e=Yn(Ku,n),s=Wt(t);return Yn(e,s)},SS=async(n,t,e,s,r,i,o)=>{const a=t===null?Math.ceil(n.context.length/128)*128:t.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,v)=>g+v,0),u=l===0?null:e.createBuffer(l,a,e.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Ke(n),d=await TS(e,n),f=mc(s.numberOfInputs,s.channelCount),p=mc(s.numberOfOutputs,r),m=Array.from(n.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&t!==null)for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<s.channelCount;w+=1)pc(t,f[v],w,w,g);i.parameterDescriptors!==void 0&&t!==null&&i.parameterDescriptors.forEach(({name:v},w)=>{pc(t,m,v,c+w,g)});for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<r[v];w+=1)p[v][w].byteLength===0&&(p[v][w]=new Float32Array(128));try{const v=f.map((x,T)=>h.activeInputs[T].size===0?[]:x),w=o(g/e.sampleRate,e.sampleRate,()=>d.process(v,p,m));if(u!==null)for(let x=0,T=0;x<s.numberOfOutputs;x+=1){for(let _=0;_<r[x];_+=1)C_(u,p[x],_,T+_,g);T+=r[x]}if(!w)break}catch(v){n.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},xS=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m)=>(g,v,w)=>{const x=new WeakMap;let T=null;const _=async(b,y)=>{let S=u(b),O=null;const E=Be(S,y),C=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(h===null){const k=C.reduce((V,U)=>V+U,0),R=r(y,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),L=[];for(let V=0;V<b.numberOfOutputs;V+=1)L.push(s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[V]}));const z=o(y,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});z.connect=t.bind(null,L),z.disconnect=c.bind(null,L),O=[R,L,z]}else E||(S=new h(y,g));if(x.set(y,O===null?S:O[2]),O!==null){if(T===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=b.channelCount*b.numberOfInputs,Z=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,$=U+Z;T=SS(b,$===0?null:await(async()=>{const H=new d($,Math.ceil(b.context.length/128)*128,y.sampleRate),K=[],st=[];for(let J=0;J<v.numberOfInputs;J+=1)K.push(o(H,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),st.push(r(H,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Et=await Promise.all(Array.from(b.parameters.values()).map(async J=>{const lt=i(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J.value});return await f(H,J,lt.offset),lt})),Ot=s(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+Z)});for(let J=0;J<v.numberOfInputs;J+=1){K[J].connect(st[J]);for(let lt=0;lt<v.channelCount;lt+=1)st[J].connect(Ot,lt,J*v.channelCount+lt)}for(const[J,lt]of Et.entries())lt.connect(Ot,0,U+J),lt.start(0);return Ot.connect(H.destination),await Promise.all(K.map(J=>p(b,H,J))),m(H)})(),y,v,C,w,l)}const k=await T,R=e(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[L,z,V]=O;k!==null&&(R.buffer=k,R.start(0)),R.connect(L);for(let U=0,Z=0;U<b.numberOfOutputs;U+=1){const $=z[U];for(let H=0;H<C[U];H+=1)L.connect($,Z+H,H);Z+=C[U]}return V}if(E)for(const[k,R]of b.parameters.entries())await n(y,R,S.parameters.get(k));else for(const[k,R]of b.parameters.entries())await f(y,R,S.parameters.get(k));return await p(b,y,S),S};return{render(b,y){a(y,b);const S=x.get(y);return S!==void 0?Promise.resolve(S):_(b,y)}}},MS=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m,g,v,w,x)=>class extends p{constructor(T,_){super(T,_),this._nativeContext=T,this._audioWorklet=n===void 0?void 0:{addModule:(b,y)=>n(this,b,y)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(T,_,b){return new e({length:_,numberOfChannels:T,sampleRate:b})}createBufferSource(){return new s(this)}createChannelMerger(T=6){return new i(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(T=1){return new u(this,{maxDelayTime:T})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(T,_){return new f(this,{feedback:_,feedforward:T})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(T,_,b={disableNormalization:!1}){return new v(this,{...b,imag:_,real:T})}createStereoPanner(){return new w(this)}createWaveShaper(){return new x(this)}decodeAudioData(T,_,b){return l(this._nativeContext,T).then(y=>(typeof _=="function"&&_(y),y),y=>{throw typeof b=="function"&&b(y),y})}},CS={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ES=(n,t,e,s,r,i,o,a)=>class extends n{constructor(c,l){const u=i(c),h={...CS,...l},d=r(u,h),f=o(u),p=f?e():null;super(c,!1,d,p),this._Q=t(this,f,d.Q,Ye,on),this._detune=t(this,f,d.detune,1200*Math.log2(Ye),-1200*Math.log2(Ye)),this._frequency=t(this,f,d.frequency,c.sampleRate/2,0),this._gain=t(this,f,d.gain,40*Math.log10(Ye),on),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,l,u){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,l,u)}catch(h){throw h.code===11?s():h}if(c.length!==l.length||l.length!==u.length)throw s()}},AS=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Be(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},NS=(n,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const i=n.get(e);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(e,o),o.catch(()=>!1).then(a=>(n.delete(e),t.set(e,a),a))):(t.set(e,o),o)}catch{return t.set(e,!1),!1}},kS={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},OS=(n,t,e,s,r)=>class extends n{constructor(i,o){const a=s(i),c={...kS,...o},l=e(a,c),u=r(a)?t():null;super(i,!1,l,u)}},IS=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Be(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,c)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},PS={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},RS=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=s(o),l=i({...PS,...a}),u=e(c,l),h=r(c)?t():null;super(o,!1,u,h)}},DS=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Be(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,c)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},VS=n=>(t,e,s)=>n(e,t,s),FS=n=>(t,e,s=0,r=0)=>{const i=t[s];if(i===void 0)throw n();return fc(e)?i.connect(e,0,r):i.connect(e,0)},LS=n=>(t,e)=>{const s=n(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},qS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},BS=(n,t,e,s,r,i,o)=>class extends n{constructor(a,c){const l=r(a),u={...qS,...c},h=s(l,u),d=i(l),f=d?e():null;super(a,!1,h,f),this._constantSourceNodeRenderer=f,this._nativeConstantSourceNode=h,this._offset=t(this,d,h.offset,Ye,on),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?o(this,a):null;this._nativeConstantSourceNode.onended=c;const l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===c?a:l}start(a=0){if(this._nativeConstantSourceNode.start(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=a),this.context.state!=="closed"){Ni(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Os(this)&&Jo(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(a=0){this._nativeConstantSourceNode.stop(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=a)}},US=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=e(l);const d=Be(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},jS=n=>t=>(n[0]=t,n[0]),$S={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},WS=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=s(o),l={...$S,...a},u=e(c,l),h=r(c)?t():null;super(o,!1,u,h),this._isBufferNullified=!1,this._nativeConvolverNode=u,l.buffer!==null&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const a=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=a.createBuffer(1,1,a.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},GS=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Be(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,c)}return s.set(o,a),Ui(a)?await e(i,o,a.inputs[0]):await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zS=(n,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},HS=()=>new DOMException("","DataCloneError"),Np=n=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(n,[n])}catch{}finally{r()}})},YS=(n,t,e,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=e();return Promise.reject(p)}try{r.add(d)}catch{}return t(c,()=>c(f))?f.decodeAudioData(d).then(p=>(Np(d).catch(()=>{}),t(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await Np(d)}catch{}},v=w=>{m(w),g()};try{f.decodeAudioData(d,w=>{typeof w.copyFromChannel!="function"&&(l(w),ed(w)),n.add(w),g().then(()=>p(w))},w=>{v(w===null?s():w)})}catch(w){v(w)}})},XS=(n,t,e,s,r,i,o,a)=>(c,l)=>{const u=t.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(t.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=e(c);for(const m of p)if(ta(m)){const g=s(m[0]);n(f,g,m[1],m[2])}else{const g=r(m[0]);f.connect(g,m[1])}}}else t.set(c,u-l)},ZS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},KS=(n,t,e,s,r,i,o)=>class extends n{constructor(a,c){const l=r(a),u={...ZS,...c},h=s(l,u),d=i(l),f=d?e(u.maxDelayTime):null;super(a,!1,h,f),this._delayTime=t(this,d,h.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}},JS=(n,t,e,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=e(c);const h=Be(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=t(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},QS=n=>(t,e,s,r)=>n(t[r],i=>i[0]===e&&i[1]===s),tx=n=>(t,e)=>{n(t).delete(e)},ex=n=>"delayTime"in n,nx=(n,t,e)=>function s(r,i){const o=uc(i)?i:e(n,i);if(ex(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},xa=(n,t,e)=>{const s=t[e];if(s===void 0)throw n();return s},sx=n=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(i=>i.disconnect()):typeof e=="number"?xa(n,t,e).disconnect():fc(e)?s===void 0?t.forEach(i=>i.disconnect(e)):r===void 0?xa(n,t,s).disconnect(e,0):xa(n,t,s).disconnect(e,0,r):s===void 0?t.forEach(i=>i.disconnect(e)):xa(n,t,s).disconnect(e,0),rx={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ix=(n,t,e,s,r,i,o,a)=>class extends n{constructor(c,l){const u=i(c),h={...rx,...l},d=s(u,h),f=o(u),p=f?e():null;super(c,!1,d,p),this._attack=t(this,f,d.attack),this._knee=t(this,f,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=t(this,f,d.ratio),this._release=t(this,f,d.release),this._threshold=t(this,f,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=l,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},ox=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Be(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ax=()=>new DOMException("","EncodingError"),cx=n=>t=>new Promise((e,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),e()},i.src=a,i.type="module",r.appendChild(i)}}),lx=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,s){if(e!==null){let r=this._listeners.get(e);r===void 0&&(r=n(this,e),typeof e=="function"&&this._listeners.set(e,r)),this._nativeEventTarget.addEventListener(t,r,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,s){const r=e===null?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,r===void 0?null:r,s)}},ux=n=>(t,e,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},hx=n=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw n()},dx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},fx=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=r(o),l={...dx,...a},u=s(c,l),h=i(c),d=h?e():null;super(o,!1,u,d),this._gain=t(this,h,u.gain,Ye,on)}get gain(){return this._gain}},px=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Be(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},mx=(n,t)=>e=>t(n,e),gx=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},_x=n=>t=>{var e;return(e=n.get(t))!==null&&e!==void 0?e:0},vx=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},yx=n=>t=>n.get(t),Se=()=>new DOMException("","InvalidStateError"),bx=n=>t=>{const e=n.get(t);if(e===void 0)throw Se();return e},wx=(n,t)=>e=>{let s=n.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),n.set(e,s),s},Tx=n=>t=>{const e=n.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},Qc=()=>new DOMException("","InvalidAccessError"),Sx=n=>{n.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw Qc();return t.call(n,e,s,r)})(n.getFrequencyResponse)},xx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Mx=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=s(o),l=r(c),u={...xx,...a},h=t(c,l?null:o.baseLatency,u),d=l?e(u.feedback,u.feedforward):null;super(o,!1,h,d),Sx(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(o,a,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,a,c)}},E_=(n,t,e,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=e[0]*l[f];for(let m=1;m<r;m+=1){const g=d-m&c-1;p+=e[m]*i[g],p-=n[m]*o[g]}for(let m=r;m<s;m+=1)p+=e[m]*i[d-m&c-1];for(let m=r;m<t;m+=1)p-=n[m]*o[d-m&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},Cx=(n,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=t.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),g=d.getChannelData(p);u.fill(0),h.fill(0),E_(r,o,i,a,c,u,h,0,l,m,g)}return d},Ex=(n,t,e,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=t(u);const p=Be(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new e(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const v=await r(g);return Cx(v,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},Ax=(n,t,e,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=e(a);for(const d of h)if(ta(d)){const f=s(d[0]);t(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},Nx=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},kx=(n,t)=>e=>n.has(e)||t(e),Ox=(n,t)=>e=>n.has(e)||t(e),Ix=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},Px=n=>t=>n!==null&&t instanceof n,Rx=n=>t=>n!==null&&typeof n.AudioNode=="function"&&t instanceof n.AudioNode,Dx=n=>t=>n!==null&&typeof n.AudioParam=="function"&&t instanceof n.AudioParam,Vx=(n,t)=>e=>n(e)||t(e),Fx=n=>t=>n!==null&&t instanceof n,Lx=n=>n!==null&&n.isSecureContext,qx=(n,t,e,s)=>class extends n{constructor(r,i){const o=e(r),a=t(o,i);if(s(o))throw TypeError();super(r,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Bx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ux=(n,t,e,s)=>class extends n{constructor(r,i){const o=e(r);if(s(o))throw new TypeError;const a={...Bx,...i},c=t(o,a);super(r,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},jx=(n,t,e,s)=>class extends n{constructor(r,i){const o=e(r),a=t(o,i);if(s(o))throw new TypeError;super(r,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},$x=(n,t,e)=>class extends n{constructor(s,r){const i=e(s),o=t(i,r);super(s,!0,o,null)}},Wx=(n,t,e,s,r,i)=>class extends e{constructor(o,a){super(o),this._nativeContext=o,Kc.set(this,o),s(o)&&r.set(o,new Set),this._destination=new n(this,a),this._listener=t(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const a=typeof o=="function"?i(this,o):null;this._nativeContext.onstatechange=a;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===a?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Fo=n=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=n.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},Gx=(n,t)=>(e,s,r)=>{const i=new Set;return e.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(t(a))return o.call(e,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(e,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(e.connect),e.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(e),i.clear();else if(typeof a=="number"){o.call(e,a);for(const d of i)d[1]===a&&i.delete(d)}else{t(a)?o.call(e,a,c,l):o.call(e,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(e.disconnect),e},zt=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e]&&(n[e]=s)},ve=(n,t)=>{zt(n,t,"channelCount"),zt(n,t,"channelCountMode"),zt(n,t,"channelInterpretation")},kp=n=>typeof n.getFloatTimeDomainData=="function",zx=n=>{n.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);n.getByteTimeDomainData(e);const s=Math.max(e.length,n.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},Hx=(n,t)=>(e,s)=>{const r=e.createAnalyser();if(ve(r,s),!(s.maxDecibels>s.minDecibels))throw t();return zt(r,s,"fftSize"),zt(r,s,"maxDecibels"),zt(r,s,"minDecibels"),zt(r,s,"smoothingTimeConstant"),n(kp,()=>kp(r))||zx(r),r},Yx=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,te=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e].value&&(n[e].value=s)},Xx=n=>{n.start=(t=>{let e=!1;return(s=0,r=0,i)=>{if(e)throw Se();t.call(n,s,r,i),e=!0}})(n.start)},rd=n=>{n.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(n,e,s,r)})(n.start)},id=n=>{n.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(n,e)})(n.stop)},Zx=(n,t,e,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return ve(f,d),te(f,d,"playbackRate"),zt(f,d,"buffer"),zt(f,d,"loop"),zt(f,d,"loopEnd"),zt(f,d,"loopStart"),t(e,()=>e(h))||Xx(f),t(s,()=>s(h))||c(f),t(r,()=>r(h))||l(f,h),t(i,()=>i(h))||rd(f),t(o,()=>o(h))||u(f,h),t(a,()=>a(h))||id(f),n(h,f),f},Kx=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,Jx=(n,t)=>(e,s,r)=>{const i=e.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(e,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Qx=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,tM=n=>{const{port1:t}=new MessageChannel;try{t.postMessage(n)}finally{t.close()}},eM=(n,t,e,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=d.get(m[1]);v!==void 0?m[1]=v:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},d.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return tM(u),t(i,o,l,u)},A_=(n,t)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*t))))),nM=n=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),t(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),e(i)},r.postMessage(n)}),sM=async(n,t)=>{const e=await nM(t);return new n(e)},rM=(n,t,e,s)=>{let r=Ku.get(n);r===void 0&&(r=new WeakMap,Ku.set(n,r));const i=sM(e,s);return r.set(t,i),i},iM=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(M=>M<1))throw c();if(v.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,x=v.reduce((M,A)=>M+A,0),T=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+T>6||x>6)throw c();const _=new MessageChannel,b=[],y=[];for(let M=0;M<g.numberOfInputs;M+=1)b.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),y.push(r(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:M,maxValue:A,minValue:P,name:F}of m.parameterDescriptors){const D=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[F]!==void 0?g.parameterData[F]:M===void 0?0:M});Object.defineProperties(D.offset,{defaultValue:{get:()=>M===void 0?0:M},maxValue:{get:()=>A===void 0?Ye:A},minValue:{get:()=>P===void 0?on:P}}),S.push(D)}const O=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+T)}),E=A_(p,f.sampleRate),C=a(f,E,w+T,Math.max(1,x)),k=r(f,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),R=[];for(let M=0;M<g.numberOfOutputs;M+=1)R.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[M]}));for(let M=0;M<g.numberOfInputs;M+=1){b[M].connect(y[M]);for(let A=0;A<g.channelCount;A+=1)y[M].connect(O,A,M*g.channelCount+A)}const L=new M_(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:M},A)=>{const P=S[A];return P.connect(O,0,w+A),P.start(0),[M,P.offset]}));O.connect(C);let z=g.channelInterpretation,V=null;const U=g.numberOfOutputs===0?[C]:R,Z={get bufferSize(){return E},get channelCount(){return g.channelCount},set channelCount(M){throw e()},get channelCountMode(){return g.channelCountMode},set channelCountMode(M){throw e()},get channelInterpretation(){return z},set channelInterpretation(M){for(const A of b)A.channelInterpretation=M;z=M},get context(){return C.context},get inputs(){return b},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return V},set onprocessorerror(M){typeof V=="function"&&Z.removeEventListener("processorerror",V),V=typeof M=="function"?M:null,typeof V=="function"&&Z.addEventListener("processorerror",V)},get parameters(){return L},get port(){return _.port2},addEventListener(...M){return C.addEventListener(M[0],M[1],M[2])},connect:n.bind(null,U),disconnect:l.bind(null,U),dispatchEvent(...M){return C.dispatchEvent(M[0])},removeEventListener(...M){return C.removeEventListener(M[0],M[1],M[2])}},$=new Map;_.port1.addEventListener=(M=>(...A)=>{if(A[0]==="message"){const P=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(P!==null){const F=$.get(A[1]);F!==void 0?A[1]=F:(A[1]=D=>{u(f.currentTime,f.sampleRate,()=>P(D))},$.set(P,A[1]))}}return M.call(_.port1,A[0],A[1],A[2])})(_.port1.addEventListener),_.port1.removeEventListener=(M=>(...A)=>{if(A[0]==="message"){const P=$.get(A[1]);P!==void 0&&($.delete(A[1]),A[1]=P)}return M.call(_.port1,A[0],A[1],A[2])})(_.port1.removeEventListener);let H=null;Object.defineProperty(_.port1,"onmessage",{get:()=>H,set:M=>{typeof H=="function"&&_.port1.removeEventListener("message",H),H=typeof M=="function"?M:null,typeof H=="function"&&(_.port1.addEventListener("message",H),_.port1.start())}}),m.prototype.port=_.port1;let K=null;rM(f,Z,m,g).then(M=>K=M);const st=mc(g.numberOfInputs,g.channelCount),Et=mc(g.numberOfOutputs,v),Ot=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((M,{name:A})=>({...M,[A]:new Float32Array(128)}),{});let J=!0;const lt=()=>{g.numberOfOutputs>0&&C.disconnect(k);for(let M=0,A=0;M<g.numberOfOutputs;M+=1){const P=R[M];for(let F=0;F<v[M];F+=1)k.disconnect(P,A+F,F);A+=v[M]}},Ft=new Map;C.onaudioprocess=({inputBuffer:M,outputBuffer:A})=>{if(K!==null){const P=h(Z);for(let F=0;F<E;F+=128){for(let D=0;D<g.numberOfInputs;D+=1)for(let q=0;q<g.channelCount;q+=1)pc(M,st[D],q,q,F);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:D},q)=>{pc(M,Ot,D,w+q,F)});for(let D=0;D<g.numberOfInputs;D+=1)for(let q=0;q<v[D];q+=1)Et[D][q].byteLength===0&&(Et[D][q]=new Float32Array(128));try{const D=st.map((q,j)=>{if(P[j].size>0)return Ft.set(j,E/128),q;const X=Ft.get(j);return X===void 0?[]:(q.every(Y=>Y.every(rt=>rt===0))&&(X===1?Ft.delete(j):Ft.set(j,X-1)),q)});J=u(f.currentTime+F/f.sampleRate,f.sampleRate,()=>K.process(D,Et,Ot));for(let q=0,j=0;q<g.numberOfOutputs;q+=1){for(let X=0;X<v[q];X+=1)C_(A,Et[q],X,j+X,F);j+=v[q]}}catch(D){J=!1,Z.dispatchEvent(new ErrorEvent("processorerror",{colno:D.colno,filename:D.filename,lineno:D.lineno,message:D.message}))}if(!J){for(let D=0;D<g.numberOfInputs;D+=1){b[D].disconnect(y[D]);for(let q=0;q<g.channelCount;q+=1)y[F].disconnect(O,q,D*g.channelCount+q)}if(m.parameterDescriptors!==void 0){const D=m.parameterDescriptors.length;for(let q=0;q<D;q+=1){const j=S[q];j.disconnect(O,0,w+q),j.stop()}}O.disconnect(C),C.onaudioprocess=null,G?lt():Pe();break}}}};let G=!1;const we=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ce=()=>C.connect(we).connect(f.destination),Pe=()=>{C.disconnect(we),we.disconnect()},je=()=>{if(J){Pe(),g.numberOfOutputs>0&&C.connect(k);for(let M=0,A=0;M<g.numberOfOutputs;M+=1){const P=R[M];for(let F=0;F<v[M];F+=1)k.connect(P,A+F,F);A+=v[M]}}G=!0},N=()=>{J&&(ce(),lt()),G=!1};return ce(),d(Z,je,N)},N_=(n,t)=>{const e=n.createBiquadFilter();return ve(e,t),te(e,t,"Q"),te(e,t,"detune"),te(e,t,"frequency"),te(e,t,"gain"),zt(e,t,"type"),e},oM=(n,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&t(e,r),ve(r,s),r},aM=n=>{const t=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Se()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Se()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Se()}})},ea=(n,t)=>{const e=n.createChannelSplitter(t.numberOfOutputs);return ve(e,t),aM(e),e},cM=(n,t,e,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return e(i,o);const a=i.createConstantSource();return ve(a,o),te(a,o,"offset"),t(s,()=>s(i))||rd(a),t(r,()=>r(i))||id(a),n(i,a),a},ji=(n,t)=>(n.connect=t.connect.bind(t),n.disconnect=t.disconnect.bind(t),n),lM=(n,t,e,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=e(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(ji(h,l),d,f)},uM=(n,t)=>(e,s)=>{const r=e.createConvolver();if(ve(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),zt(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return t(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},k_=(n,t)=>{const e=n.createDelay(t.maxDelayTime);return ve(e,t),te(e,t,"delayTime"),e},hM=n=>(t,e)=>{const s=t.createDynamicsCompressor();if(ve(s,e),e.channelCount>2||e.channelCountMode==="max")throw n();return te(s,e,"attack"),te(s,e,"knee"),te(s,e,"ratio"),te(s,e,"release"),te(s,e,"threshold"),s},hn=(n,t)=>{const e=n.createGain();return ve(e,t),te(e,t,"gain"),e},dM=n=>(t,e,s)=>{if(t.createIIRFilter===void 0)return n(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return ve(r,s),r};function fM(n,t){const e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}function pM(n,t){return[n[0]*t[0]-n[1]*t[1],n[0]*t[1]+n[1]*t[0]]}function Op(n,t){let e=[0,0];for(let s=n.length-1;s>=0;s-=1)e=pM(e,t),e[0]+=n[s];return e}const mM=(n,t,e,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=A_(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(d[0]===0)throw t();if(m===0||m>20)throw s();if(f[0]===0)throw t();if(d[0]!==1){for(let y=0;y<m;y+=1)f[y]/=d[0];for(let y=1;y<p;y+=1)d[y]/=d[0]}const v=e(r,h,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=c;const w=32,x=[],T=[],_=[];for(let y=0;y<o;y+=1){x.push(0);const S=new Float32Array(w),O=new Float32Array(w);S.fill(0),O.fill(0),T.push(S),_.push(O)}v.onaudioprocess=y=>{const S=y.inputBuffer,O=y.outputBuffer,E=S.numberOfChannels;for(let C=0;C<E;C+=1){const k=S.getChannelData(C),R=O.getChannelData(C);x[C]=E_(d,p,f,m,g,T[C],_[C],x[C],w,k,R)}};const b=r.sampleRate/2;return ji({get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(y){v.channelCount=y},get channelCountMode(){return v.channelCountMode},set channelCountMode(y){v.channelCountMode=y},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(y){v.channelInterpretation=y},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...y){return v.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return v.dispatchEvent(y[0])},getFrequencyResponse(y,S,O){if(y.length!==S.length||S.length!==O.length)throw n();const E=y.length;for(let C=0;C<E;C+=1){const k=-Math.PI*(y[C]/b),R=[Math.cos(k),Math.sin(k)],L=Op(f,R),z=Op(d,R),V=fM(L,z);S[C]=Math.sqrt(V[0]*V[0]+V[1]*V[1]),O[C]=Math.atan2(V[1],V[0])}},removeEventListener(...y){return v.removeEventListener(y[0],y[1],y[2])}},v)},gM=(n,t)=>n.createMediaElementSource(t.mediaElement),_M=(n,t)=>{const e=n.createMediaStreamDestination();return ve(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},vM=(n,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=e.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},yM=(n,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=e.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(t(e))throw new TypeError;return i},bM=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,wM=(n,t,e,s,r,i)=>(o,a)=>{const c=o.createOscillator();return ve(c,a),te(c,a,"detune"),te(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):zt(c,a,"type"),t(e,()=>e(o))||rd(c),t(s,()=>s(o))||i(c,o),t(r,()=>r(o))||id(c),n(o,c),c},TM=n=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?n(t,e):(ve(s,e),te(s,e,"orientationX"),te(s,e,"orientationY"),te(s,e,"orientationZ"),te(s,e,"positionX"),te(s,e,"positionY"),te(s,e,"positionZ"),zt(s,e,"coneInnerAngle"),zt(s,e,"coneOuterAngle"),zt(s,e,"coneOuterGain"),zt(s,e,"distanceModel"),zt(s,e,"maxDistance"),zt(s,e,"panningModel"),zt(s,e,"refDistance"),zt(s,e,"rolloffFactor"),s)},SM=(n,t,e,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:w,panningModel:x,positionX:T,positionY:_,positionZ:b,refDistance:y,rolloffFactor:S,...O})=>{const E=u.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw o();ve(E,O);const C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=e(u,{...C,channelInterpretation:"speakers",numberOfInputs:6}),R=s(u,{...O,gain:1}),L=s(u,{...C,gain:1}),z=s(u,{...C,gain:0}),V=s(u,{...C,gain:0}),U=s(u,{...C,gain:0}),Z=s(u,{...C,gain:0}),$=s(u,{...C,gain:0}),H=r(u,256,6,1),K=i(u,{...C,curve:new Float32Array([1,1]),oversample:"none"});let st=[g,v,w],Et=[T,_,b];const Ot=new Float32Array(1);H.onaudioprocess=({inputBuffer:G})=>{const we=[c(G,Ot,0),c(G,Ot,1),c(G,Ot,2)];we.some((Pe,je)=>Pe!==st[je])&&(E.setOrientation(...we),st=we);const ce=[c(G,Ot,3),c(G,Ot,4),c(G,Ot,5)];ce.some((Pe,je)=>Pe!==Et[je])&&(E.setPosition(...ce),Et=ce)},Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(G){if(G>2)throw o();R.channelCount=G,E.channelCount=G},get channelCountMode(){return E.channelCountMode},set channelCountMode(G){if(G==="max")throw o();R.channelCountMode=G,E.channelCountMode=G},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(G){R.channelInterpretation=G,E.channelInterpretation=G},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(G){E.coneInnerAngle=G},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(G){E.coneOuterAngle=G},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(G){if(G<0||G>1)throw t();E.coneOuterGain=G},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(G){E.distanceModel=G},get inputs(){return[R]},get maxDistance(){return E.maxDistance},set maxDistance(G){if(G<0)throw new RangeError;E.maxDistance=G},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return L.gain},get orientationY(){return z.gain},get orientationZ(){return V.gain},get panningModel(){return E.panningModel},set panningModel(G){E.panningModel=G},get positionX(){return U.gain},get positionY(){return Z.gain},get positionZ(){return $.gain},get refDistance(){return E.refDistance},set refDistance(G){if(G<0)throw new RangeError;E.refDistance=G},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(G){if(G<0)throw new RangeError;E.rolloffFactor=G},addEventListener(...G){return R.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return R.dispatchEvent(G[0])},removeEventListener(...G){return R.removeEventListener(G[0],G[1],G[2])}};h!==J.coneInnerAngle&&(J.coneInnerAngle=h),d!==J.coneOuterAngle&&(J.coneOuterAngle=d),f!==J.coneOuterGain&&(J.coneOuterGain=f),p!==J.distanceModel&&(J.distanceModel=p),m!==J.maxDistance&&(J.maxDistance=m),g!==J.orientationX.value&&(J.orientationX.value=g),v!==J.orientationY.value&&(J.orientationY.value=v),w!==J.orientationZ.value&&(J.orientationZ.value=w),x!==J.panningModel&&(J.panningModel=x),T!==J.positionX.value&&(J.positionX.value=T),_!==J.positionY.value&&(J.positionY.value=_),b!==J.positionZ.value&&(J.positionZ.value=b),y!==J.refDistance&&(J.refDistance=y),S!==J.rolloffFactor&&(J.rolloffFactor=S),(st[0]!==1||st[1]!==0||st[2]!==0)&&E.setOrientation(...st),(Et[0]!==0||Et[1]!==0||Et[2]!==0)&&E.setPosition(...Et);const lt=()=>{R.connect(E),n(R,K,0,0),K.connect(L).connect(k,0,0),K.connect(z).connect(k,0,1),K.connect(V).connect(k,0,2),K.connect(U).connect(k,0,3),K.connect(Z).connect(k,0,4),K.connect($).connect(k,0,5),k.connect(H).connect(u.destination)},Ft=()=>{R.disconnect(E),a(R,K,0,0),K.disconnect(L),L.disconnect(k),K.disconnect(z),z.disconnect(k),K.disconnect(V),V.disconnect(k),K.disconnect(U),U.disconnect(k),K.disconnect(Z),Z.disconnect(k),K.disconnect($),$.disconnect(k),k.disconnect(H),H.disconnect(u.destination)};return l(ji(J,E),lt,Ft)},xM=n=>(t,{disableNormalization:e,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=t.createPeriodicWave(o,i,{disableNormalization:e});if(Array.from(s).length<2)throw n();return a},na=(n,t,e,s)=>n.createScriptProcessor(t,e,s),MM=(n,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return n(e,s);const i=e.createStereoPanner();return ve(i,s),te(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw t()}}),i},CM=(n,t,e,s,r,i)=>{const o=new Float32Array([1,1]),a=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...c,oversample:"none"},u=(f,p,m,g)=>{const v=new Float32Array(16385),w=new Float32Array(16385);for(let S=0;S<16385;S+=1){const O=S/16384*a;v[S]=Math.cos(O),w[S]=Math.sin(O)}const x=e(f,{...c,gain:0}),T=s(f,{...l,curve:v}),_=s(f,{...l,curve:o}),b=e(f,{...c,gain:0}),y=s(f,{...l,curve:w});return{connectGraph(){p.connect(x),p.connect(_.inputs===void 0?_:_.inputs[0]),p.connect(b),_.connect(m),m.connect(T.inputs===void 0?T:T.inputs[0]),m.connect(y.inputs===void 0?y:y.inputs[0]),T.connect(x.gain),y.connect(b.gain),x.connect(g,0,0),b.connect(g,0,1)},disconnectGraph(){p.disconnect(x),p.disconnect(_.inputs===void 0?_:_.inputs[0]),p.disconnect(b),_.disconnect(m),m.disconnect(T.inputs===void 0?T:T.inputs[0]),m.disconnect(y.inputs===void 0?y:y.inputs[0]),T.disconnect(x.gain),y.disconnect(b.gain),x.disconnect(g,0,0),b.disconnect(g,0,1)}}},h=(f,p,m,g)=>{const v=new Float32Array(16385),w=new Float32Array(16385),x=new Float32Array(16385),T=new Float32Array(16385),_=Math.floor(16385/2);for(let V=0;V<16385;V+=1)if(V>_){const U=(V-_)/(16384-_)*a;v[V]=Math.cos(U),w[V]=Math.sin(U),x[V]=0,T[V]=1}else{const U=V/(16384-_)*a;v[V]=1,w[V]=0,x[V]=Math.cos(U),T[V]=Math.sin(U)}const b=t(f,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=e(f,{...c,gain:0}),S=s(f,{...l,curve:v}),O=e(f,{...c,gain:0}),E=s(f,{...l,curve:w}),C=s(f,{...l,curve:o}),k=e(f,{...c,gain:0}),R=s(f,{...l,curve:x}),L=e(f,{...c,gain:0}),z=s(f,{...l,curve:T});return{connectGraph(){p.connect(b),p.connect(C.inputs===void 0?C:C.inputs[0]),b.connect(y,0),b.connect(O,0),b.connect(k,1),b.connect(L,1),C.connect(m),m.connect(S.inputs===void 0?S:S.inputs[0]),m.connect(E.inputs===void 0?E:E.inputs[0]),m.connect(R.inputs===void 0?R:R.inputs[0]),m.connect(z.inputs===void 0?z:z.inputs[0]),S.connect(y.gain),E.connect(O.gain),R.connect(k.gain),z.connect(L.gain),y.connect(g,0,0),k.connect(g,0,0),O.connect(g,0,1),L.connect(g,0,1)},disconnectGraph(){p.disconnect(b),p.disconnect(C.inputs===void 0?C:C.inputs[0]),b.disconnect(y,0),b.disconnect(O,0),b.disconnect(k,1),b.disconnect(L,1),C.disconnect(m),m.disconnect(S.inputs===void 0?S:S.inputs[0]),m.disconnect(E.inputs===void 0?E:E.inputs[0]),m.disconnect(R.inputs===void 0?R:R.inputs[0]),m.disconnect(z.inputs===void 0?z:z.inputs[0]),S.disconnect(y.gain),E.disconnect(O.gain),R.disconnect(k.gain),z.disconnect(L.gain),y.disconnect(g,0,0),k.disconnect(g,0,0),O.disconnect(g,0,1),L.disconnect(g,0,1)}}},d=(f,p,m,g,v)=>{if(p===1)return u(f,m,g,v);if(p===2)return h(f,m,g,v);throw r()};return(f,{channelCount:p,channelCountMode:m,pan:g,...v})=>{if(m==="max")throw r();const w=n(f,{...v,channelCount:1,channelCountMode:m,numberOfInputs:2}),x=e(f,{...v,channelCount:p,channelCountMode:m,gain:1}),T=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:g});let{connectGraph:_,disconnectGraph:b}=d(f,p,x,T,w);Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"maxValue",{get:()=>1}),Object.defineProperty(T.gain,"minValue",{get:()=>-1});const y={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(C){x.channelCount!==C&&(S&&b(),{connectGraph:_,disconnectGraph:b}=d(f,C,x,T,w),S&&_()),x.channelCount=C},get channelCountMode(){return x.channelCountMode},set channelCountMode(C){if(C==="clamped-max"||C==="max")throw r();x.channelCountMode=C},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(C){x.channelInterpretation=C},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return T.gain},addEventListener(...C){return x.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return x.dispatchEvent(C[0])},removeEventListener(...C){return x.removeEventListener(C[0],C[1],C[2])}};let S=!1;const O=()=>{_(),S=!0},E=()=>{b(),S=!1};return i(ji(y,w),O,E)}},EM=(n,t,e,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return e(a,c);ve(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw t();zt(l,{curve:u},"curve"),zt(l,c,"oversample");let h=null,d=!1;return o(l,"curve",f=>()=>f.call(l),f=>p=>(f.call(l,p),d&&(s(p)&&h===null?h=n(a,l):!s(p)&&h!==null&&(h(),h=null)),p)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},AM=(n,t,e,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();ve(l,c),ve(u,c);const h=e(i,{...c,gain:1}),d=e(i,{...c,gain:-1}),f=e(i,{...c,gain:1}),p=e(i,{...c,gain:-1});let m=null,g=!1,v=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,l.channelCount=_,f.channelCount=_,u.channelCount=_,p.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,l.channelCountMode=_,f.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,l.channelInterpretation=_,f.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_},get context(){return l.context},get curve(){return v},set curve(_){if(_!==null&&_.length<2)throw t();if(_===null)l.curve=_,u.curve=_;else{const b=_.length,y=new Float32Array(b+2-b%2),S=new Float32Array(b+2-b%2);y[0]=_[0],S[0]=-_[b-1];const O=Math.ceil((b+1)/2),E=(b+1)/2-1;for(let C=1;C<O;C+=1){const k=C/O*E,R=Math.floor(k),L=Math.ceil(k);y[C]=R===L?_[R]:(1-(k-R))*_[R]+(1-(L-k))*_[L],S[C]=R===L?-_[b-1-R]:-((1-(k-R))*_[b-1-R])-(1-(L-k))*_[b-1-L]}y[O]=b%2===1?_[O-1]:(_[O-2]+_[O-1])/2,l.curve=y,u.curve=S}v=_,g&&(s(v)&&m===null?m=n(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const x=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(p).connect(f),g=!0,s(v)&&(m=n(i,h))},T=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(p),p.disconnect(f),g=!1,m!==null&&(m(),m=null)};return r(ji(w,f),x,T)},Qe=()=>new DOMException("","NotSupportedError"),NM={numberOfChannels:1},kM=(n,t,e,s,r)=>class extends n{constructor(i,o,a){let c;if(typeof i=="number"&&o!==void 0&&a!==void 0)c={length:o,numberOfChannels:i,sampleRate:a};else if(typeof i=="object")c=i;else throw new Error("The given parameters are not valid.");const{length:l,numberOfChannels:u,sampleRate:h}={...NM,...c},d=s(u,l,h);t(Fo,()=>Fo(d))||d.addEventListener("statechange",(()=>{let f=0;const p=m=>{this._state==="running"&&(f>0?(d.removeEventListener("statechange",p),m.stopImmediatePropagation(),this._waitForThePromiseToSettle(m)):f+=1)};return p})()),super(d,u),this._length=l,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,w_(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}},OM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},IM=(n,t,e,s,r,i,o)=>class extends n{constructor(a,c){const l=r(a),u={...OM,...c},h=e(l,u),d=i(l),f=d?s():null,p=a.sampleRate/2;super(a,!1,h,f),this._detune=t(this,d,h.detune,153600,-153600),this._frequency=t(this,d,h.frequency,p,-p),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=f,this._oscillatorNodeRenderer!==null&&u.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?o(this,a):null;this._nativeOscillatorNode.onended=c;const l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===c?a:l}get type(){return this._nativeOscillatorNode.type}set type(a){this._nativeOscillatorNode.type=a,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(a){this._nativeOscillatorNode.setPeriodicWave(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=a)}start(a=0){if(this._nativeOscillatorNode.start(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=a),this.context.state!=="closed"){Ni(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Os(this)&&Jo(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(a=0){this._nativeOscillatorNode.stop(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=a)}},PM=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=e(u);const f=Be(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=t(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},RM={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},DM=(n,t,e,s,r,i,o)=>class extends n{constructor(a,c){const l=r(a),u={...RM,...c},h=e(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._nativePannerNode=h,this._orientationX=t(this,d,h.orientationX,Ye,on),this._orientationY=t(this,d,h.orientationY,Ye,on),this._orientationZ=t(this,d,h.orientationZ,Ye,on),this._positionX=t(this,d,h.positionX,Ye,on),this._positionY=t(this,d,h.positionY,Ye,on),this._positionZ=t(this,d,h.positionZ,Ye,on),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(a){this._nativePannerNode.coneInnerAngle=a}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(a){this._nativePannerNode.coneOuterAngle=a}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(a){this._nativePannerNode.coneOuterGain=a}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(a){this._nativePannerNode.distanceModel=a}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(a){this._nativePannerNode.maxDistance=a}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(a){this._nativePannerNode.panningModel=a}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(a){this._nativePannerNode.refDistance=a}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(a){this._nativePannerNode.rolloffFactor=a}},VM=(n,t,e,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let m=null,g=i(f);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},x=Be(g,p);if("bufferSize"in g)m=s(p,{...v,gain:1});else if(!x){const T={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,T)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new o(6,f.context.length,p.sampleRate),k=t(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(C.destination),h=(async()=>{const R=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(L,z)=>{const V=e(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z===0?1:0});return await a(C,L,V.offset),V}));for(let L=0;L<6;L+=1)R[L].connect(k,0,L),R[L].start(0);return l(C)})()}const T=await h,_=s(p,{...v,gain:1});await c(f,p,_);const b=[];for(let C=0;C<T.numberOfChannels;C+=1)b.push(T.getChannelData(C));let y=[b[0][0],b[1][0],b[2][0]],S=[b[3][0],b[4][0],b[5][0]],O=s(p,{...v,gain:1}),E=r(p,{...w,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:S[0],positionY:S[1],positionZ:S[2]});_.connect(O).connect(E.inputs[0]),E.connect(m);for(let C=128;C<T.length;C+=128){const k=[b[0][C],b[1][C],b[2][C]],R=[b[3][C],b[4][C],b[5][C]];if(k.some((L,z)=>L!==y[z])||R.some((L,z)=>L!==S[z])){y=k,S=R;const L=C/p.sampleRate;O.gain.setValueAtTime(0,L),O=s(p,{...v,gain:0}),E=r(p,{...w,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),O.gain.setValueAtTime(1,L),_.connect(O).connect(E.inputs[0]),E.connect(m)}}return m}return x?(await n(p,f.orientationX,g.orientationX),await n(p,f.orientationY,g.orientationY),await n(p,f.orientationZ,g.orientationZ),await n(p,f.positionX,g.positionX),await n(p,f.positionY,g.positionY),await n(p,f.positionZ,g.positionZ)):(await a(p,f.orientationX,g.orientationX),await a(p,f.orientationY,g.orientationY),await a(p,f.orientationZ,g.orientationZ),await a(p,f.positionX,g.positionX),await a(p,f.positionY,g.positionY),await a(p,f.positionZ,g.positionZ)),Ui(g)?await c(f,p,g.inputs[0]):await c(f,p,g),g};return{render(f,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},FM={disableNormalization:!1},LM=(n,t,e,s)=>class O_{constructor(i,o){const a=t(i),c=s({...FM,...o}),l=n(a,c);return e.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===O_.prototype||e.has(i)}},qM=(n,t)=>(e,s,r)=>(n(s).replay(r),t(s,e,r)),BM=(n,t,e)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const h=await t(l).render(l,r),d=s.context.destination;!e(l)&&(s!==d||!e(s))&&h.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},UM=(n,t,e)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const l=await n(a).render(a,r);e(a)||l.connect(i,c)}))},jM=(n,t,e,s)=>r=>n(Fo,()=>Fo(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=e(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),$M=n=>(t,e)=>{n.set(t,e)},WM=n=>(t,e)=>n.set(t,e),GM=(n,t,e,s,r,i,o,a)=>(c,l)=>e(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>e(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),ed(u)):t(i,()=>i(u))||a(u),n.add(u),u)),zM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},HM=(n,t,e,s,r,i)=>class extends n{constructor(o,a){const c=r(o),l={...zM,...a},u=e(c,l),h=i(c),d=h?s():null;super(o,!1,u,d),this._pan=t(this,h,u.pan)}get pan(){return this._pan}},YM=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Be(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),Ui(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},XM=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},ZM=(n,t)=>async()=>{if(n===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},KM=(n,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},JM=()=>new DOMException("","UnknownError"),QM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},tC=(n,t,e,s,r,i,o)=>class extends n{constructor(a,c){const l=r(a),u={...QM,...c},h=e(l,u),d=i(l)?s():null;super(a,!0,h,d),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(a){if(a===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(a.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=a}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(a){this._nativeWaveShaperNode.oversample=a}},eC=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Be(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,c)}return s.set(o,a),Ui(a)?await e(i,o,a.inputs[0]):await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},nC=()=>typeof window>"u"?null:window,sC=(n,t)=>e=>{e.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=e.numberOfChannels)throw t();const c=e.length,l=e.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},e.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=e.numberOfChannels)throw t();const c=e.length,l=e.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},rC=n=>t=>{t.copyFromChannel=(e=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<t.length)return e.call(t,s,a,o)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<t.length)return e.call(t,s,a,o)})(t.copyToChannel)},iC=n=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),n(t,"buffer",r=>()=>{const i=r.call(t);return i===s?null:i},r=>i=>r.call(t,i===null?s:i))},oC=(n,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=e.createBufferSource();t(s,()=>{const i=s.numberOfInputs;for(let o=0;o<i;o+=1)r.connect(s,0,o)},()=>r.disconnect(s))},I_=(n,t,e)=>n.copyFromChannel===void 0?n.getChannelData(e)[0]:(n.copyFromChannel(t,e),t[0]),P_=n=>{if(n===null)return!1;const t=n.length;return t%2!==0?n[Math.floor(t/2)]!==0:n[t/2-1]+n[t/2]!==0},sa=(n,t,e,s)=>{let r=n;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,{get:e(i),set:s(o)})},aC=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),cC=n=>({...n,channelCount:n.numberOfOutputs}),lC=n=>{const{imag:t,real:e}=n;return t===void 0?e===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(e,()=>0),real:e}:e===void 0?{...n,imag:t,real:Array.from(t,()=>0)}:{...n,imag:t,real:e}},R_=(n,t,e)=>{try{n.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;R_(n,t,e+1e-7)}},uC=n=>{const t=n.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},hC=n=>{const t=n.createBufferSource(),e=n.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},dC=n=>{const t=n.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},od=n=>{const t=n.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},D_=n=>{const t=n.createBuffer(1,1,44100),e=n.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},ad=n=>{const t=n.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},fC=n=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(n)}finally{t.close(),e.close()}},pC=n=>{n.start=(t=>(e=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?t.call(n,e,0,0):t.call(n,e,o,r)})(n.start)},V_=(n,t)=>{const e=t.createGain();n.connect(e);const s=(r=>()=>{r.call(n,e),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),ji(n,e),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{e.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},$i=(n,t)=>e=>{const s={value:n};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(n,e):t.handleEvent.call(n,e)},mC=DT(Br),gC=UT(Br),_C=QS(Jc),F_=new WeakMap,vC=_x(F_),Kn=NS(new Map,new WeakMap),ps=nC(),L_=Hx(Kn,gs),cd=gx(Ke),Oe=BM(Ke,cd,Ir),yC=zT(L_,Wt,Oe),Ut=bx(Kc),js=bM(ps),Dt=Fx(js),q_=new WeakMap,B_=lx($i),ra=Kx(ps),ld=Px(ra),ud=Rx(ps),U_=Dx(ps),Lo=Qx(ps),oe=_S(VT(p_),BT(mC,gC,hc,_C,dc,Ke,vC,Ko,Wt,Br,Os,Ir,Ga),Kn,Ax(Xu,dc,Ke,Wt,Vo,Os),gs,Qc,Qe,XS(hc,Xu,Ke,Wt,Vo,Ut,Os,Dt),nx(q_,Ke,Yn),B_,Ut,ld,ud,U_,Dt,Lo),bC=GT(oe,yC,gs,L_,Ut,Dt),hd=new WeakSet,Ip=Yx(ps),j_=jS(new Uint32Array(1)),dd=sC(j_,gs),fd=rC(j_),$_=YT(hd,Kn,Qe,Ip,js,XM(Ip),dd,fd),tl=jT(hn),W_=UM(cd,Qo,Ir),_s=VS(W_),Wi=Zx(tl,Kn,uC,hC,dC,od,D_,ad,pC,iC(sa),V_),vs=qM(vx(Qo),W_),wC=KT(_s,Wi,Wt,vs,Oe),Jn=vS(FT(m_),q_,td,yS,NT,kT,OT,IT,PT,zu,d_,ra,R_),TC=ZT(oe,wC,Jn,Se,Wi,Ut,Dt,$i),SC=oS(oe,aS,gs,Se,Jx(hn,sa),Ut,Dt,Oe),xC=AS(_s,N_,Wt,vs,Oe),Ur=WM(F_),MC=ES(oe,Jn,xC,Qc,N_,Ut,Dt,Ur),gr=Gx(Br,ud),CC=oC(Se,gr),_r=oM(ra,CC),EC=IS(_r,Wt,Oe),AC=OS(oe,EC,_r,Ut,Dt),NC=DS(ea,Wt,Oe),kC=RS(oe,NC,ea,Ut,Dt,cC),OC=lM(tl,Wi,hn,gr),Gi=cM(tl,Kn,OC,od,ad),IC=US(_s,Gi,Wt,vs,Oe),PC=BS(oe,Jn,IC,Gi,Ut,Dt,$i),G_=uM(Qe,sa),RC=GS(G_,Wt,Oe),DC=WS(oe,RC,G_,Ut,Dt,Ur),VC=JS(_s,k_,Wt,vs,Oe),FC=KS(oe,Jn,VC,k_,Ut,Dt,Ur),z_=hM(Qe),LC=ox(_s,z_,Wt,vs,Oe),qC=ix(oe,Jn,LC,z_,Qe,Ut,Dt,Ur),BC=px(_s,hn,Wt,vs,Oe),UC=fx(oe,Jn,BC,hn,Ut,Dt),jC=mM(Qc,Se,na,Qe),el=jM(Kn,hn,na,KM(hn,js)),$C=Ex(Wi,Wt,js,Oe,el),WC=dM(jC),GC=Mx(oe,WC,$C,Ut,Dt,Ur),zC=cS(Jn,_r,Gi,na,Qe,I_,Dt,sa),H_=new WeakMap,HC=Wx(SC,zC,B_,Dt,H_,$i),Y_=wM(tl,Kn,od,D_,ad,V_),YC=PM(_s,Y_,Wt,vs,Oe),XC=IM(oe,Jn,Y_,YC,Ut,Dt,$i),X_=LS(Wi),ZC=AM(X_,Se,hn,P_,gr),nl=EM(X_,Se,ZC,P_,gr,ra,sa),KC=SM(hc,Se,_r,hn,na,nl,Qe,dc,I_,gr),Z_=TM(KC),JC=VM(_s,_r,Gi,hn,Z_,Wt,js,vs,Oe,el),QC=DM(oe,Jn,Z_,JC,Ut,Dt,Ur),tE=xM(gs),eE=LM(tE,Ut,new WeakSet,lC),nE=CM(_r,ea,hn,nl,Qe,gr),K_=MM(nE,Qe),sE=YM(_s,K_,Wt,vs,Oe),rE=HM(oe,Jn,K_,sE,Ut,Dt),iE=eC(nl,Wt,Oe),oE=tC(oe,Se,nl,iE,Ut,Dt,Ur),J_=Lx(ps),pd=ux(ps),Q_=new WeakMap,aE=wx(Q_,js),cE=J_?qT(Kn,Qe,cx(ps),pd,hx(RT),Ut,aE,Dt,Lo,new WeakMap,new WeakMap,ZM(Lo,js),ps):void 0,lE=Vx(ld,Dt),uE=YS(hd,Kn,HS,ax,new WeakSet,Ut,lE,lc,Fo,dd,fd),t0=MS(cE,bC,$_,TC,MC,AC,kC,PC,DC,uE,FC,qC,UC,GC,HC,XC,QC,eE,rE,oE),hE=qx(oe,gM,Ut,Dt),dE=Ux(oe,_M,Ut,Dt),fE=jx(oe,vM,Ut,Dt),pE=yM(Se,Dt),mE=$x(oe,pE,Ut),gE=iS(t0,Se,Qe,JM,hE,dE,fE,mE,ra),md=Tx(H_),_E=$T(md),e0=FS(gs),vE=tx(md),n0=sx(gs),s0=new WeakMap,yE=mx(s0,Yn),bE=iM(e0,gs,Se,_r,ea,Gi,hn,na,Qe,n0,pd,yE,gr),wE=eM(Se,bE,hn,Qe,gr),TE=xS(_s,e0,Wi,_r,ea,Gi,hn,vE,n0,pd,Wt,Lo,js,vs,Oe,el),SE=yx(Q_),xE=$M(s0),Pp=J_?wS(_E,oe,Jn,TE,wE,Ke,SE,Ut,Dt,Lo,aC,xE,fC,$i):void 0,ME=zS(Qe,js),CE=GM(hd,Kn,cd,md,el,lc,dd,fd),EE=kM(t0,Kn,Se,ME,CE),AE=Nx(Kc,ld),NE=kx(Qh,ud),kE=Ox(td,U_),OE=Ix(Kc,Dt);function kn(n){return n===void 0}function yt(n){return n!==void 0}function IE(n){return typeof n=="function"}function Pr(n){return typeof n=="number"}function kr(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function PE(n){return typeof n=="boolean"}function zn(n){return Array.isArray(n)}function Ds(n){return typeof n=="string"}function Ma(n){return Ds(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function mt(n,t){if(!n)throw new Error(t)}function cr(n,t,e=1/0){if(!(t<=n&&n<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${n}`)}function r0(n){!n.isOffline&&n.state!=="running"&&gd('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let i0=!1,Rp=!1;function Dp(n){i0=n}function RE(n){kn(n)&&i0&&!Rp&&(Rp=!0,gd("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let o0=console;function DE(...n){o0.log(...n)}function gd(...n){o0.warn(...n)}function VE(n){return new gE(n)}function FE(n,t,e){return new EE(n,t,e)}const Un=typeof self=="object"?self:null,LE=Un&&(Un.hasOwnProperty("AudioContext")||Un.hasOwnProperty("webkitAudioContext"));function qE(n,t,e){return mt(yt(Pp),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(Un==null?void 0:Un.BaseAudioContext)?Un==null?void 0:Un.AudioWorkletNode:Pp)(n,t,e)}function Qn(n,t,e,s){var r=arguments.length,i=r<3?t:s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i}function fe(n,t,e,s){function r(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,t||[])).next())})}class BE{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Rr(n){return kE(n)}function ir(n){return NE(n)}function za(n){return OE(n)}function Qr(n){return AE(n)}function UE(n){return n instanceof $_}function jE(n,t){return n==="value"||Rr(t)||ir(t)||UE(t)}function vi(n,...t){if(!t.length)return n;const e=t.shift();if(kr(n)&&kr(e))for(const s in e)jE(s,e[s])?n[s]=e[s]:kr(e[s])?(n[s]||Object.assign(n,{[s]:{}}),vi(n[s],e[s])):Object.assign(n,{[s]:e[s]});return vi(n,...t)}function $E(n,t){return n.length===t.length&&n.every((e,s)=>t[s]===e)}function ft(n,t,e=[],s){const r={},i=Array.from(t);if(kr(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(o=>Reflect.has(n,o))||(vi(r,{[s]:i[0]}),e.splice(e.indexOf(s),1),i.shift())),i.length===1&&kr(i[0]))vi(r,i[0]);else for(let o=0;o<e.length;o++)yt(i[o])&&(r[e[o]]=i[o]);return vi(n,r)}function WE(n){return n.constructor.getDefaults()}function yi(n,t){return kn(n)?t:n}function Vp(n,t){return t.forEach(e=>{Reflect.has(n,e)&&delete n[e]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class $s{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Un&&this.toString()===Un.TONE_DEBUG_CLASS)&&DE(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}$s.version=h_;const _d=1e-6;function ki(n,t){return n>t+_d}function th(n,t){return ki(n,t)||qn(n,t)}function gc(n,t){return n+_d<t}function qn(n,t){return Math.abs(n-t)<_d}function GE(n,t,e){return Math.max(Math.min(n,e),t)}let ds=class a0 extends $s{constructor(){super(),this.name="Timeline",this._timeline=[];const t=ft(a0.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(mt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];mt(th(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(qn(this._timeline[e].time,t)){for(let s=e;s>=0&&qn(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&th(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(qn(a[e],t)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(qn(u[e],t))o=l;else break}return o}else{if(gc(a[e],t)&&ki(c[e],t))return o;ki(a[e],t)?i=o:s=o+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),i=this._search(e);return r!==-1&&i!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&qn(this._timeline[s].time,t)){let r=s;for(let i=s;i>=0&&qn(this._timeline[i].time,t);i--)r=i;this._iterate(i=>{e(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}};const c0=[];function sl(n){c0.push(n)}function zE(n){c0.forEach(t=>t(n))}const l0=[];function rl(n){l0.push(n)}function HE(n){l0.forEach(t=>t(n))}let vd=class u0 extends $s{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(s=>{kn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(s=>{if(kn(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(kn(e))this._events[s]=[];else{const r=this._events[s];for(let i=r.length-1;i>=0;i--)r[i]===e&&r.splice(i,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(u0.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}},h0=class extends vd{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}},yd=class d0 extends h0{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new ds,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=ft(d0.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=VE({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new BE(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(zE(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return mt(Qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return mt(Qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return mt(Qr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){mt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){mt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){mt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){mt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return qE(this.rawContext,t,e)}addAudioWorkletModule(t){return fe(this,void 0,void 0,function*(){mt(yt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return fe(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Qr(this._context)?this._context.resume():Promise.resolve()}close(){return fe(this,void 0,void 0,function*(){Qr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&HE(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:i+e})};return r(),s}};class YE extends h0{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return fe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function se(n,t){zn(t)?t.forEach(e=>se(n,e)):Object.defineProperty(n,t,{enumerable:!0,writable:!1})}function f0(n,t){zn(t)?t.forEach(e=>f0(n,e)):Object.defineProperty(n,t,{writable:!0})}const Pt=()=>{};let lr=class Ee extends $s{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Pt;const t=ft(Ee.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Ds(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Pt,onload:Pt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Cn().sampleRate}set(t){return t instanceof Ee?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return fe(this,void 0,void 0,function*(){const e=Ee.load(t).then(s=>{this.set(s),this.onload(this)});Ee.downloads.push(e);try{yield e}finally{const s=Ee.downloads.indexOf(e);Ee.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=zn(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,i=Cn(),o=i.createBuffer(s,r,i.sampleRate),a=!e&&s===1?[t]:t;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(Pr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)e[o]+=i[o]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(Pr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){mt(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);mt(s<r,"The start time must be less than the end time");const i=r-s,o=Cn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Ee(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Ee().fromArray(t)}static fromUrl(t){return fe(this,void 0,void 0,function*(){return yield new Ee().load(t)})}static load(t){return fe(this,void 0,void 0,function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const a=e[1].split("|");let c=a[0];for(const l of a)if(Ee.supportsType(l)){c=l;break}t=t.replace(e[0],c)}const s=Ee.baseUrl===""||Ee.baseUrl.endsWith("/")?Ee.baseUrl:Ee.baseUrl+"/",r=document.createElement("a");r.href=s+t,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${t}`);const o=yield i.arrayBuffer();return yield Cn().decodeAudioData(o)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return fe(this,void 0,void 0,function*(){for(yield Promise.resolve();Ee.downloads.length;)yield Ee.downloads[0]})}};lr.baseUrl="";lr.downloads=[];class bd extends yd{constructor(){super({clockSource:"offline",context:za(arguments[0])?arguments[0]:FE(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:za(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=za(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return fe(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return fe(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new lr(e)})}close(){return Promise.resolve()}}const p0=new YE;let si=p0;function Cn(){return si===p0&&LE&&XE(new yd),si}function XE(n,t=!1){t&&si.dispose(),Qr(n)?si=new yd(n):za(n)?si=new bd(n):si=n}if(Un&&!Un.TONE_SILENCE_LOGGING){const n=` * Tone.js v${h_} * `;console.log(`%c${n}`,"background: #000; color: #fff")}function ZE(n){return Math.pow(10,n/20)}function KE(n){return 20*(Math.log(n)/Math.LN10)}function m0(n){return Math.pow(2,n/12)}let il=440;function JE(){return il}function QE(n){il=n}function eh(n){return Math.round(g0(n))}function g0(n){return 69+12*Math.log2(n/il)}function tA(n){return il*Math.pow(2,(n-69)/12)}let eA=class _0 extends $s{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof _0&&this.fromType(this._val),kn(this._val))return this._noArg();if(Ds(this._val)&&kn(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(kr(this._val)){let t=0;for(const e in this._val)if(yt(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(yt(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Ds(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}},Cr=class Ha extends eA{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Ha(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),i=Math.round(r/s)*s-r;return r+i*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);e.push(o+"n."),e.push(o+"n"),e.push(o+"t")}e.push("0");let s=e[0],r=new Ha(this.context,e[0]).toSeconds();return e.forEach(i=>{const o=new Ha(this.context,i).toSeconds();Math.abs(o-t)<Math.abs(r-t)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return eh(this.toFrequency())}_now(){return this.context.now()}},rr=class ho extends Cr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return JE()}static set A4(t){QE(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:ho.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const s=nA[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?s:ho.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new ho(this.context,this.valueOf()*m0(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return eh(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/ho.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),sA[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return tA(t)}static ftom(t){return eh(t)}};const nA={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},sA=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Fp(n,t){return new rr(Cn(),n,t)}class bo extends Cr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class cn extends $s{constructor(){super();const t=ft(cn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Cn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return RE(t),new Cr(this.context,t).toSeconds()}toFrequency(t){return new rr(this.context,t).toFrequency()}toTicks(t){return new bo(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{kn(t[s])&&delete e[s]}),e}get(){const t=WE(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];yt(s)&&yt(s.value)&&yt(s.setValueAtTime)?t[e]=s.value:s instanceof cn?t[e]=s._getPartialProperties(t[e]):zn(s)||Pr(s)||Ds(s)||PE(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&yt(this[e])&&(this[e]&&yt(this[e].value)&&yt(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof cn?this[e].set(t[e]):this[e]=t[e])}),this}}let wd=class extends ds{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return cr(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===t)return i}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===t)return i}}},he=class nh extends cn{constructor(){const t=ft(nh.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,mt(yt(t.param)&&(Rr(t.param)||t.param instanceof nh),"param must be an AudioParam");!Rr(t.param);)t.param=t.param._param;this._swappable=yt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new ds(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,yt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(cn.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return yt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return yt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return yt(this.maxValue)&&yt(this.minValue)&&cr(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?ZE(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?KE(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return mt(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,e))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,e):i=this._exponentialInterpolate(r.time,o,s.time,s.value,e)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return mt(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=qn(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return mt(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);mt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(r),mt(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);const o=s/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(c),e+a*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return mt(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));mt(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),i=this._events.getAfter(e);return r&&qn(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:e+2,o=(i-e)/10;for(let a=e;a<i;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){mt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,i){return s+(e-s)*Math.exp(-(i-t)/r)}_linearInterpolate(t,e,s,r,i){return e+(r-e)*((i-t)/(s-t))}_exponentialInterpolate(t,e,s,r,i){return e*Math.pow(r/e,(i-t)/(s-t))}},xt=class Ya extends cn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return yt(this.input)?Rr(this.input)||this.input instanceof he?1:this.input.numberOfInputs:0}get numberOfOutputs(){return yt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return yt(t)&&(t instanceof Ya||ir(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();mt(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return zi(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return gd("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return rA(this,t,e,s),this}chain(...t){return sh(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),yt(this.input)&&(this.input instanceof Ya?this.input.dispose():ir(this.input)&&this.input.disconnect()),yt(this.output)&&(this.output instanceof Ya?this.output.dispose():ir(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function sh(...n){const t=n.shift();n.reduce((e,s)=>(e instanceof xt?e.connect(s):ir(e)&&zi(e,s),s),t)}function zi(n,t,e=0,s=0){for(mt(yt(n),"Cannot connect from undefined node"),mt(yt(t),"Cannot connect to undefined node"),(t instanceof xt||ir(t))&&mt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),mt(n.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof xt||t instanceof he;)yt(t.input)&&(t=t.input);for(;n instanceof xt;)yt(n.output)&&(n=n.output);Rr(t)?n.connect(t,e):n.connect(t,e,s)}function rA(n,t,e=0,s=0){if(yt(t))for(;t instanceof xt;)t=t.input;for(;!ir(n);)yt(n.output)&&(n=n.output);Rr(t)?n.disconnect(t,e):ir(t)?n.disconnect(t,e,s):n.disconnect()}let ln=class v0 extends xt{constructor(){const t=ft(v0.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new he({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),se(this,"gain")}static getDefaults(){return Object.assign(xt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};class Oi extends xt{constructor(t){super(t),this.onended=Pt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ln({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(xt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Pt})}_startGain(t,e=1){mt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){mt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Pt&&(this.onended(this),this.onended=Pt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),mt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Pt,this}}let iA=class y0 extends Oi{constructor(){const t=ft(y0.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),zi(this._source,this._gainNode),this.offset=new he({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Oi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}},qe=class b0 extends xt{constructor(){const t=ft(b0.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new iA({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(xt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return Td(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}};function Td(n,t,e,s){(t instanceof he||Rr(t)||t instanceof qe&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof qe&&(t.overridden=!0)),zi(n,t,e,s)}let oA=class w0 extends he{constructor(){const t=ft(w0.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new ds(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(he.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+e,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max((e-r.time)*10,1)),o=(e-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,e,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(kn(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),o=Math.sqrt(Math.pow(r,2)-2*i*(e.ticks-t)),a=(-r+o)/i,c=(-r-o)/i;return(a>0?a:c)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}},aA=class T0 extends qe{constructor(){const t=ft(T0.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new oA({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}},cA=class S0 extends cn{constructor(){const t=ft(S0.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new wd,this._tickOffset=new ds,this._ticksAtTime=new ds,this._secondsAtTime=new ds,this.frequency=new aA({context:this.context,units:t.units,value:t.frequency}),se(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},cn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),yt(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let i=r||e,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,t+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=qn(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<e;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}};class ol extends cn{constructor(){const t=ft(ol.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Pt,this._lastUpdate=0,this._state=new wd("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new cA({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,se(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(cn.getDefaults(),{callback:Pt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){r0(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}vd.mixin(ol);class Hi extends xt{constructor(){const t=ft(Hi.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ln({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,se(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(xt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let lA=class x0 extends xt{constructor(){const t=ft(x0.getDefaults(),arguments);super(t),this.name="Destination",this.input=new Hi({context:this.context}),this.output=new ln({context:this.context}),this.volume=this.input.volume,sh(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(xt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),sh(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};sl(n=>{n.destination=new lA({context:n})});rl(n=>{n.destination.dispose()});class uA extends xt{constructor(){super(...arguments),this.name="Listener",this.positionX=new he({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new he({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new he({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new he({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new he({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new he({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new he({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new he({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new he({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(xt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sl(n=>{n.listener=new uA({context:n})});rl(n=>{n.listener.dispose()});let hA=class M0 extends $s{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=ft(M0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Pt,onload:Pt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return mt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=Pt,r=Pt){return Ds(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new lr(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new lr(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}};class ri extends bo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class dA extends cn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new ds,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sl(n=>{n.draw=new dA({context:n})});rl(n=>{n.draw.dispose()});class fA extends $s{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){mt(yt(t.time),"Events must have a time property"),mt(yt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new pA(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class pA{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class mA extends $s{constructor(t){super(),this.name="TimelineValue",this._timeline=new ds({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let _c=class C0 extends xt{constructor(){super(ft(C0.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return Td(this,t,e,s),this}},Sd=class E0 extends _c{constructor(){const t=ft(E0.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,zn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):IE(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(qe.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,i=e;r<i;r++){const o=r/(i-1)*2-1;s[r]=t(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));mt(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}},gA=class A0 extends _c{constructor(){const t=ft(A0.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Sd({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(_c.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}};class ur{constructor(t,e){this.id=ur._eventId++,this._remainderTime=0;const s=Object.assign(ur.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Pt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ur._eventId=0;let _A=class N0 extends ur{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(N0.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ur.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return gc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ri(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){gc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ri(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);ki(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}};class al extends cn{constructor(){const t=ft(al.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new mA(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new ds,this._repeatedEvents=new fA,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new ol({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),se(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(cn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new ri(this.context,this._swingTicks*2/3).toSeconds()*r}Dp(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),Dp(!1)}schedule(t,e){const s=new ur(this,{callback:t,time:new bo(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const i=new _A(this,{callback:t,duration:new Cr(this.context,r).toTicks(),interval:new Cr(this.context,e).toTicks(),time:new bo(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const s=new ur(this,{callback:t,once:!0,time:new bo(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ri(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return yt(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){zn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Cr(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Cr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ri(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ri(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),i=e+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(t.units==="time"){const c=.015625/i,l=new ln(c),u=new gA(-1),h=new ln(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/i:e=0);const a=new ln(e);return r.connect(a),a.connect(t._param),o.push(a),this._syncedSignals.push({initial:t.value,nodes:o,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),f0(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}vd.mixin(al);sl(n=>{n.transport=new al({context:n})});rl(n=>{n.transport.dispose()});class wn extends xt{constructor(t){super(t),this.input=void 0,this._state=new wd("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Pt,this._syncedStop=Pt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Hi({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,se(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(xt.getDefaults(),{mute:!1,onstop:Pt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")mt(ki(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(yi(e,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,e,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else r0(this.context),this._start(r,e,s);return this}stop(t){let e=kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||yt(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(ki(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Pt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}let k0=class O0 extends Oi{constructor(){const t=ft(O0.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,zi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new he({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new lr(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Oi.getDefaults(),{url:new lr,loop:!1,loopEnd:0,loopStart:0,onload:Pt,onerror:Pt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){mt(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),this.loop?e=yi(e,this.loopStart):e=yi(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;th(o,a)&&(o=(o-c)%l+c),qn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,gc(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),yt(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};function jr(n,t){return fe(this,void 0,void 0,function*(){const e=t/n.context.sampleRate,s=new bd(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}let vA=class I0 extends Oi{constructor(){const t=ft(I0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],zi(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new he({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new he({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),se(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}},bn=class Mr extends wn{constructor(){const t=ft(Mr.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new qe({context:this.context,units:"frequency",value:t.frequency}),se(this,"frequency"),this.detune=new qe({context:this.context,units:"cents",value:t.detune}),se(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new vA({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Mr._periodicWaveCache.find(t=>t.phase===this._phase&&$E(t.partials,this._partials));{const t=Mr._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(yt(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Mr._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Mr._periodicWaveCache.length>100&&Mr._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){cr(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let s=2048;const r=new Float32Array(s),i=new Float32Array(s);let o=1;if(t==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,s=o,this._partials.length===0)return[r,i]}else{const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);a?(o=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),t=a[1],o=Math.max(o,2),s=o):this._partialCount=0,this._partials=[]}for(let a=1;a<s;++a){const c=2/(a*Math.PI);let l;switch(t){case"sine":l=a<=o?1:0,this._partials[a-1]=l;break;case"square":l=a&1?2*c:0,this._partials[a-1]=l;break;case"sawtooth":l=c*(a&1?1:-1),this._partials[a-1]=l;break;case"triangle":a&1?l=2*(c*c)*(a-1>>1&1?-1:1):l=0,this._partials[a-1]=l;break;case"custom":l=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}l!==0?(r[a]=-l*Math.sin(e*a),i[a]=l*Math.cos(e*a)):(r[a]=0,i[a]=0)}return[r,i]}_inverseFFT(t,e,s){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*s)+e[o]*Math.sin(o*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(t,e,o/i*r),s);return GE(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}};bn._periodicWaveCache=[];class yA extends _c{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Sd({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}let vc=class P0 extends qe{constructor(){const t=ft(P0.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ln({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(qe.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};class cl extends wn{constructor(){const t=ft(cl.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new yA({context:this.context}),this._modulationNode=new ln({context:this.context}),this._carrier=new bn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new bn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new vc({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),se(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(bn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ll extends wn{constructor(){const t=ft(ll.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ln({context:this.context,gain:0}),this._carrier=new bn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new qe({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new bn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new vc({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new vc({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),se(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(bn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}let xd=class R0 extends wn{constructor(){const t=ft(R0.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ln({context:this.context,gain:0}),this._thresh=new Sd({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new qe({context:this.context,units:"audioRange",value:t.width}),this._triangle=new bn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),se(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};class ul extends wn{constructor(){const t=ft(ul.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new qe({context:this.context,units:"frequency",value:t.frequency}),this.detune=new qe({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,se(this,["frequency","detune"])}static getDefaults(){return Object.assign(bn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=e+s*i)}}get count(){return this._oscillators.length}set count(t){if(cr(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new bn({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):Pt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class hl extends wn{constructor(){const t=ft(hl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new vc({context:this.context,value:2}),this._pulse=new xd({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new bn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),se(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Lp={am:cl,fat:ul,fm:ll,oscillator:bn,pulse:xd,pwm:hl};let qp=class D0 extends wn{constructor(){const t=ft(D0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new qe({context:this.context,units:"frequency",value:t.frequency}),this.detune=new qe({context:this.context,units:"cents",value:t.detune}),se(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(bn.getDefaults(),ll.getDefaults(),cl.getDefaults(),ul.getDefaults(),xd.getDefaults(),hl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Lp[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof Lp[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Pr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Pr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ds(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return fe(this,arguments,void 0,function*(t=1024){return jr(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};function V0(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(i){cr(i,n,t),e.set(this,i)}})}}function Ws(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(i){cr(this.toSeconds(i),n,t),e.set(this,i)}})}}class dl extends wn{constructor(){const t=ft(dl.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new lr({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(wn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Pt,onerror:Pt,playbackRate:1,reverse:!1})}load(t){return fe(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Pt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=yi(e,this._loopStart):e=yi(e,0);const r=this.toSeconds(e),i=s;s=yi(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,t=this.toSeconds(t);const a=new k0({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&kn(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Qn([Ws(0)],dl.prototype,"fadeIn",void 0);Qn([Ws(0)],dl.prototype,"fadeOut",void 0);class vr extends xt{constructor(){const t=ft(vr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new qe({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(xt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Ds(t))return t;{let s;for(s in Ca)if(Ca[s][e]===t)return s;return t}}_setCurve(t,e,s){if(Ds(s)&&Reflect.has(Ca,s)){const r=Ca[s];kr(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(zn(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let s=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0){const o=1/s;s=(1-i)/o}if(s<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,s,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,s,t);else{this._sig.cancelAndHoldAtTime(t);let o=this._attackCurve;for(let a=1;a<o.length;a++)if(o[a-1]<=i&&i<=o[a]){o=this._attackCurve.slice(a),o[0]=i;break}this._sig.setValueCurveAtTime(o,t,s,e)}if(r&&this.sustain<1){const o=e*this.sustain,a=t+s;this.log("decay",a),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,r+a):this._sig.exponentialApproachValueAtTime(o,a,r)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(mt(zn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return Td(this,t,e,s),this}asArray(){return fe(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new bd(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(e*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Qn([Ws(0)],vr.prototype,"attack",void 0);Qn([Ws(0)],vr.prototype,"decay",void 0);Qn([V0(0,1)],vr.prototype,"sustain",void 0);Qn([Ws(0)],vr.prototype,"release",void 0);const Ca=(()=>{let n,t;const e=[];for(n=0;n<128;n++)e[n]=Math.sin(n/127*(Math.PI/2));const s=[],r=6.4;for(n=0;n<127;n++){t=n/127;const h=Math.sin(t*(Math.PI*2)*r-Math.PI/2)+1;s[n]=h/10+t*.83}s[127]=1;const i=[],o=5;for(n=0;n<128;n++)i[n]=Math.ceil(n/127*o)/o;const a=[];for(n=0;n<128;n++)t=n/127,a[n]=.5*(1-Math.cos(Math.PI*t));const c=[];for(n=0;n<128;n++){t=n/127;const h=Math.pow(t,3)*4+.2,d=Math.cos(h*Math.PI*2*t);c[n]=Math.abs(d*(1-t))}function l(h){const d=new Array(h.length);for(let f=0;f<h.length;f++)d[f]=1-h[f];return d}function u(h){return h.slice(0).reverse()}return{bounce:{In:l(c),Out:c},cosine:{In:e,Out:u(e)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:l(s)},sine:{In:a,Out:l(a)},step:{In:i,Out:l(i)}}})();let yc=class F0 extends xt{constructor(){const t=ft(F0.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Hi({context:this.context,volume:t.volume}),this.volume=this._volume.volume,se(this,"volume")}static getDefaults(){return Object.assign(xt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const i=r[e],o=this.context.transport.schedule(a=>{r[e]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const i=this.toSeconds(s),o=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Ii extends yc{constructor(){const t=ft(Ii.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(yc.getDefaults(),{detune:0,onsilence:Pt,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof rr?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Qn([Ws(0)],Ii.prototype,"portamento",void 0);let bA=class L0 extends vr{constructor(){super(ft(L0.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ln({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}},Bp=class q0 extends Ii{constructor(){const t=ft(q0.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new qp(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new bA(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),se(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ii.getDefaults(),{envelope:Object.assign(Vp(vr.getDefaults(),Object.keys(xt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Vp(qp.getDefaults(),[...Object.keys(wn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class fl extends Bp{constructor(){const t=ft(fl.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,se(this,["oscillator","envelope"])}static getDefaults(){return vi(Ii.getDefaults(),Bp.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof rr?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Qn([V0(0)],fl.prototype,"octaves",void 0);Qn([Ws(0)],fl.prototype,"pitchDecay",void 0);const B0=new Set;function Md(n){B0.add(n)}function U0(n,t){const e=`registerProcessor("${n}", ${t})`;B0.add(e)}const wA=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Md(wA);const TA=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Md(TA);const SA=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Md(SA);const xA="feedback-comb-filter",MA=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;U0(xA,MA);class pl extends yc{constructor(){const t=ft(pl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(mt(Ma(s)||Pr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ma(s)){const i=new rr(this.context,s).toMidi();e[i]=t.urls[s]}else Pr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new hA({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(yc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Pt,onerror:Pt,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=g0(new rr(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=m0(c+a),d=new k0({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(e,0,u.duration/h,s),zn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new rr(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);e=this.toSeconds(e),i.forEach(o=>{o.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(t,i,r),zn(e)?(mt(zn(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=e[Math.min(a,e.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,s){if(mt(Ma(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ma(t)){const r=new rr(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}Qn([Ws(0)],pl.prototype,"attack",void 0);Qn([Ws(0)],pl.prototype,"release",void 0);let CA=class j0 extends xt{constructor(){const t=ft(j0.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new he({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",se(this,"pan")}static getDefaults(){return Object.assign(xt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};const EA="bit-crusher",AA=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;U0(EA,AA);class le extends xt{constructor(){const t=ft(le.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ln({context:this.context}),le._allSolos.has(this.context)||le._allSolos.set(this.context,new Set),le._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(xt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),le._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){le._soloed.has(this.context)||le._soloed.set(this.context,new Set),le._soloed.get(this.context).add(this)}_removeSolo(){le._soloed.has(this.context)&&le._soloed.get(this.context).delete(this)}_isSoloed(){return le._soloed.has(this.context)&&le._soloed.get(this.context).has(this)}_noSolos(){return!le._soloed.has(this.context)||le._soloed.has(this.context)&&le._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),le._allSolos.get(this.context).delete(this),this._removeSolo(),this}}le._allSolos=new Map;le._soloed=new Map;let NA=class $0 extends xt{constructor(){const t=ft($0.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new CA({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Hi({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,se(this,["pan","volume"])}static getDefaults(){return Object.assign(xt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};class ii extends xt{constructor(){const t=ft(ii.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new le({solo:t.solo,context:this.context}),this._panVol=this.output=new NA({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),se(this,["pan","volume"])}static getDefaults(){return Object.assign(xt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ii.buses.has(t)||ii.buses.set(t,new ln({context:this.context})),ii.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new ln({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ii.buses=new Map;Cn().transport;Cn().destination;Cn().destination;Cn().listener;Cn().draw;Cn();var Er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kA(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),e}var OA={},ml={};function IA(n){var t=new tn(n),e=t.readChunk();if(e.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+e.id+"'";for(var s=PA(e.data),r=[],i=0;!t.eof()&&i<s.numTracks;i++){var o=t.readChunk();if(o.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+o.id+"'";var a=RA(o.data);r.push(a)}return{header:s,tracks:r}}function PA(n){var t=new tn(n),e=t.readUInt16(),s=t.readUInt16(),r={format:e,numTracks:s},i=t.readUInt16();return i&32768?(r.framesPerSecond=256-(i>>8),r.ticksPerFrame=i&255):r.ticksPerBeat=i,r}function RA(n){for(var t=new tn(n),e=[];!t.eof();){var s=i();e.push(s)}return e;var r;function i(){var o={};o.deltaTime=t.readVarInt();var a=t.readUInt8();if((a&240)===240)if(a===255){o.meta=!0;var c=t.readUInt8(),l=t.readVarInt();switch(c){case 0:if(o.type="sequenceNumber",l!==2)throw"Expected length for sequenceNumber event is 2, got "+l;return o.number=t.readUInt16(),o;case 1:return o.type="text",o.text=t.readString(l),o;case 2:return o.type="copyrightNotice",o.text=t.readString(l),o;case 3:return o.type="trackName",o.text=t.readString(l),o;case 4:return o.type="instrumentName",o.text=t.readString(l),o;case 5:return o.type="lyrics",o.text=t.readString(l),o;case 6:return o.type="marker",o.text=t.readString(l),o;case 7:return o.type="cuePoint",o.text=t.readString(l),o;case 32:if(o.type="channelPrefix",l!=1)throw"Expected length for channelPrefix event is 1, got "+l;return o.channel=t.readUInt8(),o;case 33:if(o.type="portPrefix",l!=1)throw"Expected length for portPrefix event is 1, got "+l;return o.port=t.readUInt8(),o;case 47:if(o.type="endOfTrack",l!=0)throw"Expected length for endOfTrack event is 0, got "+l;return o;case 81:if(o.type="setTempo",l!=3)throw"Expected length for setTempo event is 3, got "+l;return o.microsecondsPerBeat=t.readUInt24(),o;case 84:if(o.type="smpteOffset",l!=5)throw"Expected length for smpteOffset event is 5, got "+l;var u=t.readUInt8(),h={0:24,32:25,64:29,96:30};return o.frameRate=h[u&96],o.hour=u&31,o.min=t.readUInt8(),o.sec=t.readUInt8(),o.frame=t.readUInt8(),o.subFrame=t.readUInt8(),o;case 88:if(o.type="timeSignature",l!=2&&l!=4)throw"Expected length for timeSignature event is 4 or 2, got "+l;return o.numerator=t.readUInt8(),o.denominator=1<<t.readUInt8(),l===4?(o.metronome=t.readUInt8(),o.thirtyseconds=t.readUInt8()):(o.metronome=36,o.thirtyseconds=8),o;case 89:if(o.type="keySignature",l!=2)throw"Expected length for keySignature event is 2, got "+l;return o.key=t.readInt8(),o.scale=t.readUInt8(),o;case 127:return o.type="sequencerSpecific",o.data=t.readBytes(l),o;default:return o.type="unknownMeta",o.data=t.readBytes(l),o.metatypeByte=c,o}}else if(a==240){o.type="sysEx";var l=t.readVarInt();return o.data=t.readBytes(l),o}else if(a==247){o.type="endSysEx";var l=t.readVarInt();return o.data=t.readBytes(l),o}else throw"Unrecognised MIDI event type byte: "+a;else{var d;if(a&128)d=t.readUInt8(),r=a;else{if(r===null)throw"Running status byte encountered before status byte";d=a,a=r,o.running=!0}var f=a>>4;switch(o.channel=a&15,f){case 8:return o.type="noteOff",o.noteNumber=d,o.velocity=t.readUInt8(),o;case 9:var p=t.readUInt8();return o.type=p===0?"noteOff":"noteOn",o.noteNumber=d,o.velocity=p,p===0&&(o.byte9=!0),o;case 10:return o.type="noteAftertouch",o.noteNumber=d,o.amount=t.readUInt8(),o;case 11:return o.type="controller",o.controllerType=d,o.value=t.readUInt8(),o;case 12:return o.type="programChange",o.programNumber=d,o;case 13:return o.type="channelAftertouch",o.amount=d,o;case 14:return o.type="pitchBend",o.value=d+(t.readUInt8()<<7)-8192,o;default:throw"Unrecognised MIDI event type: "+f}}}}function tn(n){this.buffer=n,this.bufferLen=this.buffer.length,this.pos=0}tn.prototype.eof=function(){return this.pos>=this.bufferLen};tn.prototype.readUInt8=function(){var n=this.buffer[this.pos];return this.pos+=1,n};tn.prototype.readInt8=function(){var n=this.readUInt8();return n&128?n-256:n};tn.prototype.readUInt16=function(){var n=this.readUInt8(),t=this.readUInt8();return(n<<8)+t};tn.prototype.readInt16=function(){var n=this.readUInt16();return n&32768?n-65536:n};tn.prototype.readUInt24=function(){var n=this.readUInt8(),t=this.readUInt8(),e=this.readUInt8();return(n<<16)+(t<<8)+e};tn.prototype.readInt24=function(){var n=this.readUInt24();return n&8388608?n-16777216:n};tn.prototype.readUInt32=function(){var n=this.readUInt8(),t=this.readUInt8(),e=this.readUInt8(),s=this.readUInt8();return(n<<24)+(t<<16)+(e<<8)+s};tn.prototype.readBytes=function(n){var t=this.buffer.slice(this.pos,this.pos+n);return this.pos+=n,t};tn.prototype.readString=function(n){var t=this.readBytes(n);return String.fromCharCode.apply(null,t)};tn.prototype.readVarInt=function(){for(var n=0;!this.eof();){var t=this.readUInt8();if(t&128)n+=t&127,n<<=7;else return n+t}return n};tn.prototype.readChunk=function(){var n=this.readString(4),t=this.readUInt32(),e=this.readBytes(t);return{id:n,length:t,data:e}};var DA=IA;function VA(n,t){if(typeof n!="object")throw"Invalid MIDI data";t=t||{};var e=n.header||{},s=n.tracks||[],r,i=s.length,o=new ye;for(FA(o,e,i),r=0;r<i;r++)LA(o,s[r],t);return o.buffer}function FA(n,t,e){var s=t.format==null?1:t.format,r=128;t.timeDivision?r=t.timeDivision:t.ticksPerFrame&&t.framesPerSecond?r=-(t.framesPerSecond&255)<<8|t.ticksPerFrame&255:t.ticksPerBeat&&(r=t.ticksPerBeat&32767);var i=new ye;i.writeUInt16(s),i.writeUInt16(e),i.writeUInt16(r),n.writeChunk("MThd",i.buffer)}function LA(n,t,e){var s=new ye,r,i=t.length,o=null;for(r=0;r<i;r++)(e.running===!1||!e.running&&!t[r].running)&&(o=null),o=qA(s,t[r],o,e.useByte9ForNoteOff);n.writeChunk("MTrk",s.buffer)}function qA(n,t,e,s){var r=t.type,i=t.deltaTime,o=t.text||"",a=t.data||[],c=null;switch(n.writeVarInt(i),r){case"sequenceNumber":n.writeUInt8(255),n.writeUInt8(0),n.writeVarInt(2),n.writeUInt16(t.number);break;case"text":n.writeUInt8(255),n.writeUInt8(1),n.writeVarInt(o.length),n.writeString(o);break;case"copyrightNotice":n.writeUInt8(255),n.writeUInt8(2),n.writeVarInt(o.length),n.writeString(o);break;case"trackName":n.writeUInt8(255),n.writeUInt8(3),n.writeVarInt(o.length),n.writeString(o);break;case"instrumentName":n.writeUInt8(255),n.writeUInt8(4),n.writeVarInt(o.length),n.writeString(o);break;case"lyrics":n.writeUInt8(255),n.writeUInt8(5),n.writeVarInt(o.length),n.writeString(o);break;case"marker":n.writeUInt8(255),n.writeUInt8(6),n.writeVarInt(o.length),n.writeString(o);break;case"cuePoint":n.writeUInt8(255),n.writeUInt8(7),n.writeVarInt(o.length),n.writeString(o);break;case"channelPrefix":n.writeUInt8(255),n.writeUInt8(32),n.writeVarInt(1),n.writeUInt8(t.channel);break;case"portPrefix":n.writeUInt8(255),n.writeUInt8(33),n.writeVarInt(1),n.writeUInt8(t.port);break;case"endOfTrack":n.writeUInt8(255),n.writeUInt8(47),n.writeVarInt(0);break;case"setTempo":n.writeUInt8(255),n.writeUInt8(81),n.writeVarInt(3),n.writeUInt24(t.microsecondsPerBeat);break;case"smpteOffset":n.writeUInt8(255),n.writeUInt8(84),n.writeVarInt(5);var l={24:0,25:32,29:64,30:96},u=t.hour&31|l[t.frameRate];n.writeUInt8(u),n.writeUInt8(t.min),n.writeUInt8(t.sec),n.writeUInt8(t.frame),n.writeUInt8(t.subFrame);break;case"timeSignature":n.writeUInt8(255),n.writeUInt8(88),n.writeVarInt(4),n.writeUInt8(t.numerator);var h=Math.floor(Math.log(t.denominator)/Math.LN2)&255;n.writeUInt8(h),n.writeUInt8(t.metronome),n.writeUInt8(t.thirtyseconds||8);break;case"keySignature":n.writeUInt8(255),n.writeUInt8(89),n.writeVarInt(2),n.writeInt8(t.key),n.writeUInt8(t.scale);break;case"sequencerSpecific":n.writeUInt8(255),n.writeUInt8(127),n.writeVarInt(a.length),n.writeBytes(a);break;case"unknownMeta":t.metatypeByte!=null&&(n.writeUInt8(255),n.writeUInt8(t.metatypeByte),n.writeVarInt(a.length),n.writeBytes(a));break;case"sysEx":n.writeUInt8(240),n.writeVarInt(a.length),n.writeBytes(a);break;case"endSysEx":n.writeUInt8(247),n.writeVarInt(a.length),n.writeBytes(a);break;case"noteOff":var d=s!==!1&&t.byte9||s&&t.velocity==0?144:128;c=d|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.velocity);break;case"noteOn":c=144|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.velocity);break;case"noteAftertouch":c=160|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.noteNumber),n.writeUInt8(t.amount);break;case"controller":c=176|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.controllerType),n.writeUInt8(t.value);break;case"programChange":c=192|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.programNumber);break;case"channelAftertouch":c=208|t.channel,c!==e&&n.writeUInt8(c),n.writeUInt8(t.amount);break;case"pitchBend":c=224|t.channel,c!==e&&n.writeUInt8(c);var f=8192+t.value,p=f&127,m=f>>7&127;n.writeUInt8(p),n.writeUInt8(m);break;default:throw"Unrecognized event type: "+r}return c}function ye(){this.buffer=[]}ye.prototype.writeUInt8=function(n){this.buffer.push(n&255)};ye.prototype.writeInt8=ye.prototype.writeUInt8;ye.prototype.writeUInt16=function(n){var t=n>>8&255,e=n&255;this.writeUInt8(t),this.writeUInt8(e)};ye.prototype.writeInt16=ye.prototype.writeUInt16;ye.prototype.writeUInt24=function(n){var t=n>>16&255,e=n>>8&255,s=n&255;this.writeUInt8(t),this.writeUInt8(e),this.writeUInt8(s)};ye.prototype.writeInt24=ye.prototype.writeUInt24;ye.prototype.writeUInt32=function(n){var t=n>>24&255,e=n>>16&255,s=n>>8&255,r=n&255;this.writeUInt8(t),this.writeUInt8(e),this.writeUInt8(s),this.writeUInt8(r)};ye.prototype.writeInt32=ye.prototype.writeUInt32;ye.prototype.writeBytes=function(n){this.buffer=this.buffer.concat(Array.prototype.slice.call(n,0))};ye.prototype.writeString=function(n){var t,e=n.length,s=[];for(t=0;t<e;t++)s.push(n.codePointAt(t));this.writeBytes(s)};ye.prototype.writeVarInt=function(n){if(n<0)throw"Cannot write negative variable-length integer";if(n<=127)this.writeUInt8(n);else{var t=n,e=[];for(e.push(t&127),t>>=7;t;){var s=t&127|128;e.push(s),t>>=7}this.writeBytes(e.reverse())}};ye.prototype.writeChunk=function(n,t){this.writeString(n),this.writeUInt32(t.length),this.writeBytes(t)};var BA=VA;ml.parseMidi=DA;ml.writeMidi=BA;var bc={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.insert=Dr.search=void 0;function G0(n,t,e){e===void 0&&(e="ticks");var s=0,r=n.length,i=r;if(r>0&&n[r-1][e]<=t)return r-1;for(;s<i;){var o=Math.floor(s+(i-s)/2),a=n[o],c=n[o+1];if(a[e]===t){for(var l=o;l<n.length;l++){var u=n[l];u[e]===t&&(o=l)}return o}else{if(a[e]<t&&c[e]>t)return o;a[e]>t?i=o:a[e]<t&&(s=o+1)}}return-1}Dr.search=G0;function UA(n,t,e){if(e===void 0&&(e="ticks"),n.length){var s=G0(n,t[e],e);n.splice(s+1,0,t)}else n.push(t)}Dr.insert=UA;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Header=n.keySignatureKeys=void 0;var t=Dr,e=new WeakMap;n.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function r(i){var o=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",e.set(this,480),i){e.set(this,i.header.ticksPerBeat),i.tracks.forEach(function(c){c.forEach(function(l){l.meta&&(l.type==="timeSignature"?o.timeSignatures.push({ticks:l.absoluteTime,timeSignature:[l.numerator,l.denominator]}):l.type==="setTempo"?o.tempos.push({bpm:6e7/l.microsecondsPerBeat,ticks:l.absoluteTime}):l.type==="keySignature"&&o.keySignatures.push({key:n.keySignatureKeys[l.key+7],scale:l.scale===0?"major":"minor",ticks:l.absoluteTime}))})});var a=0;i.tracks[0].forEach(function(c){a+=c.deltaTime,c.meta&&(c.type==="trackName"?o.name=c.text:(c.type==="text"||c.type==="cuePoint"||c.type==="marker"||c.type==="lyrics")&&o.meta.push({text:c.text,ticks:a,type:c.type}))}),this.update()}}return r.prototype.update=function(){var i=this,o=0,a=0;this.tempos.sort(function(c,l){return c.ticks-l.ticks}),this.tempos.forEach(function(c,l){var u=l>0?i.tempos[l-1].bpm:i.tempos[0].bpm,h=c.ticks/i.ppq-a,d=60/u*h;c.time=d+o,o=c.time,a+=h}),this.timeSignatures.sort(function(c,l){return c.ticks-l.ticks}),this.timeSignatures.forEach(function(c,l){var u=l>0?i.timeSignatures[l-1]:i.timeSignatures[0],h=(c.ticks-u.ticks)/i.ppq,d=h/u.timeSignature[0]/(u.timeSignature[1]/4);u.measures=u.measures||0,c.measures=d+u.measures})},r.prototype.ticksToSeconds=function(i){var o=(0,t.search)(this.tempos,i);if(o!==-1){var a=this.tempos[o],c=a.time,l=(i-a.ticks)/this.ppq;return c+60/a.bpm*l}else{var u=i/this.ppq;return 60/120*u}},r.prototype.ticksToMeasures=function(i){var o=(0,t.search)(this.timeSignatures,i);if(o!==-1){var a=this.timeSignatures[o],c=(i-a.ticks)/this.ppq;return a.measures+c/(a.timeSignature[0]/a.timeSignature[1])/4}else return i/this.ppq/4},Object.defineProperty(r.prototype,"ppq",{get:function(){return e.get(this)},enumerable:!1,configurable:!0}),r.prototype.secondsToTicks=function(i){var o=(0,t.search)(this.tempos,i,"time");if(o!==-1){var a=this.tempos[o],c=a.time,l=i-c,u=l/(60/a.bpm);return Math.round(a.ticks+u*this.ppq)}else{var h=i/.5;return Math.round(h*this.ppq)}},r.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(i){return{bpm:i.bpm,ticks:i.ticks}}),timeSignatures:this.timeSignatures}},r.prototype.fromJSON=function(i){this.name=i.name,this.tempos=i.tempos.map(function(o){return Object.assign({},o)}),this.timeSignatures=i.timeSignatures.map(function(o){return Object.assign({},o)}),this.keySignatures=i.keySignatures.map(function(o){return Object.assign({},o)}),this.meta=i.meta.map(function(o){return Object.assign({},o)}),e.set(this,i.ppq),this.update()},r.prototype.setTempo=function(i){this.tempos=[{bpm:i,ticks:0}],this.update()},r}();n.Header=s})(bc);var qo={},Cd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControlChange=n.controlChangeIds=n.controlChangeNames=void 0,n.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},n.controlChangeIds=Object.keys(n.controlChangeNames).reduce(function(r,i){return r[n.controlChangeNames[i]]=i,r},{});var t=new WeakMap,e=new WeakMap,s=function(){function r(i,o){t.set(this,o),e.set(this,i.controllerType),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(r.prototype,"number",{get:function(){return e.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return n.controlChangeNames[this.number]?n.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){var i=t.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var o=t.get(this);this.ticks=o.secondsToTicks(i)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},r}();n.ControlChange=s})(Cd);var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.createControlChanges=void 0;var Ea=Cd;function jA(){return new Proxy({},{get:function(n,t){if(n[t])return n[t];if(Ea.controlChangeIds.hasOwnProperty(t))return n[Ea.controlChangeIds[t]]},set:function(n,t,e){return Ea.controlChangeIds.hasOwnProperty(t)?n[Ea.controlChangeIds[t]]=e:n[t]=e,!0}})}gl.createControlChanges=jA;var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.PitchBend=void 0;var hu=new WeakMap,$A=function(){function n(t,e){hu.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(n.prototype,"time",{get:function(){var t=hu.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var e=hu.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},n}();_l.PitchBend=$A;var vl={},or={};Object.defineProperty(or,"__esModule",{value:!0});or.DrumKitByPatchID=or.InstrumentFamilyByID=or.instrumentByPatchID=void 0;or.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];or.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];or.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(vl,"__esModule",{value:!0});vl.Instrument=void 0;var Aa=or,Up=new WeakMap,WA=function(){function n(t,e){if(this.number=0,Up.set(this,e),this.number=0,t){var s=t.find(function(r){return r.type==="programChange"});s&&(this.number=s.programNumber)}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.percussion?Aa.DrumKitByPatchID[this.number]:Aa.instrumentByPatchID[this.number]},set:function(t){var e=Aa.instrumentByPatchID.indexOf(t);e!==-1&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"family",{get:function(){return this.percussion?"drums":Aa.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"percussion",{get:function(){var t=Up.get(this);return t.channel===9},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},n.prototype.fromJSON=function(t){this.number=t.number},n}();vl.Instrument=WA;var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.Note=void 0;function GA(n){var t=Math.floor(n/12)-1;return z0(n)+t.toString()}function z0(n){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e=n%12;return t[e]}function zA(n){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.indexOf(n)}var HA=function(){var n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,t={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(e){var s=n.exec(e),r=s[1],i=s[2],o=t[r.toLowerCase()];return o+(parseInt(i,10)+1)*12}}(),Zr=new WeakMap,YA=function(){function n(t,e,s){Zr.set(this,s),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(n.prototype,"name",{get:function(){return GA(this.midi)},set:function(t){this.midi=HA(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=e*12},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pitch",{get:function(){return z0(this.midi)},set:function(t){this.midi=12*(this.octave+1)+zA(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var t=Zr.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=Zr.get(this),s=e.secondsToTicks(this.time+t);this.durationTicks=s-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){var t=Zr.get(this);return t.ticksToSeconds(this.ticks)},set:function(t){var e=Zr.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bars",{get:function(){var t=Zr.get(this);return t.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},n}();yl.Note=YA;Object.defineProperty(qo,"__esModule",{value:!0});qo.Track=void 0;var du=Dr,XA=Cd,ZA=gl,KA=_l,jp=vl,JA=yl,Na=new WeakMap,QA=function(){function n(t,e){var s=this;if(this.name="",this.notes=[],this.controlChanges=(0,ZA.createControlChanges)(),this.pitchBends=[],Na.set(this,e),t){var r=t.find(function(d){return d.type==="trackName"});this.name=r?r.text:""}if(this.instrument=new jp.Instrument(t,this),this.channel=0,t){for(var i=t.filter(function(d){return d.type==="noteOn"}),o=t.filter(function(d){return d.type==="noteOff"}),a=function(){var d=i.shift();c.channel=d.channel;var f=o.findIndex(function(m){return m.noteNumber===d.noteNumber&&m.absoluteTime>=d.absoluteTime});if(f!==-1){var p=o.splice(f,1)[0];c.addNote({durationTicks:p.absoluteTime-d.absoluteTime,midi:d.noteNumber,noteOffVelocity:p.velocity/127,ticks:d.absoluteTime,velocity:d.velocity/127})}},c=this;i.length;)a();var l=t.filter(function(d){return d.type==="controller"});l.forEach(function(d){s.addCC({number:d.controllerType,ticks:d.absoluteTime,value:d.value/127})});var u=t.filter(function(d){return d.type==="pitchBend"});u.forEach(function(d){s.addPitchBend({ticks:d.absoluteTime,value:d.value/Math.pow(2,13)})});var h=t.find(function(d){return d.type==="endOfTrack"});this.endOfTrackTicks=h!==void 0?h.absoluteTime:void 0}}return n.prototype.addNote=function(t){var e=Na.get(this),s=new JA.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(s,t),(0,du.insert)(this.notes,s,"ticks"),this},n.prototype.addCC=function(t){var e=Na.get(this),s=new XA.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(s,t),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),(0,du.insert)(this.controlChanges[s.number],s,"ticks"),this},n.prototype.addPitchBend=function(t){var e=Na.get(this),s=new KA.PitchBend({},e);return Object.assign(s,t),(0,du.insert)(this.pitchBends,s,"ticks"),this},Object.defineProperty(n.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var s=this.notes[e].time+this.notes[e].duration;t<s&&(t=s)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var s=this.notes[e].ticks+this.notes[e].durationTicks;t<s&&(t=s)}return t},enumerable:!1,configurable:!0}),n.prototype.fromJSON=function(t){var e=this;this.name=t.name,this.channel=t.channel,this.instrument=new jp.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),t.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=t.endOfTrackTicks);for(var s in t.controlChanges)t.controlChanges[s]&&t.controlChanges[s].forEach(function(r){e.addCC({number:r.number,ticks:r.ticks,value:r.value})});t.notes.forEach(function(r){e.addNote({durationTicks:r.durationTicks,midi:r.midi,ticks:r.ticks,velocity:r.velocity})})},n.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(r){return r.toJSON()}));var s={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(r){return r.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(r){return r.toJSON()})};return this.endOfTrackTicks!==void 0&&(s.endOfTrackTicks=this.endOfTrackTicks),s},n}();qo.Track=QA;var bl={};function tN(n){var t=[];return H0(n,t),t}function H0(n,t){for(var e=0;e<n.length;e++){var s=n[e];Array.isArray(s)?H0(s,t):t.push(s)}}const eN=Object.freeze(Object.defineProperty({__proto__:null,flatten:tN},Symbol.toStringTag,{value:"Module"})),nN=kA(eN);var Xs=Er&&Er.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return n.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(bl,"__esModule",{value:!0});bl.encode=void 0;var sN=ml,rN=bc,iN=nN;function oN(n,t){return[{absoluteTime:n.ticks,channel:t,deltaTime:0,noteNumber:n.midi,type:"noteOn",velocity:Math.floor(n.velocity*127)},{absoluteTime:n.ticks+n.durationTicks,channel:t,deltaTime:0,noteNumber:n.midi,type:"noteOff",velocity:Math.floor(n.noteOffVelocity*127)}]}function aN(n){return(0,iN.flatten)(n.notes.map(function(t){return oN(t,n.channel)}))}function cN(n,t){return{absoluteTime:n.ticks,channel:t,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(n.value*127)}}function lN(n){for(var t=[],e=0;e<127;e++)n.controlChanges.hasOwnProperty(e)&&n.controlChanges[e].forEach(function(s){t.push(cN(s,n.channel))});return t}function uN(n,t){return{absoluteTime:n.ticks,channel:t,deltaTime:0,type:"pitchBend",value:n.value}}function hN(n){var t=[];return n.pitchBends.forEach(function(e){t.push(uN(e,n.channel))}),t}function dN(n){return{absoluteTime:0,channel:n.channel,deltaTime:0,programNumber:n.instrument.number,type:"programChange"}}function fN(n){return{absoluteTime:0,deltaTime:0,meta:!0,text:n,type:"trackName"}}function pN(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/n.bpm),type:"setTempo"}}function mN(n){return{absoluteTime:n.ticks,deltaTime:0,denominator:n.timeSignature[1],meta:!0,metronome:24,numerator:n.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function gN(n){var t=rN.keySignatureKeys.indexOf(n.key);return{absoluteTime:n.ticks,deltaTime:0,key:t+7,meta:!0,scale:n.scale==="major"?0:1,type:"keySignature"}}function _N(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,text:n.text,type:n.type}}function vN(n){var t={header:{format:1,numTracks:n.tracks.length+1,ticksPerBeat:n.header.ppq},tracks:Xs([Xs(Xs(Xs(Xs([{absoluteTime:0,deltaTime:0,meta:!0,text:n.header.name,type:"trackName"}],n.header.keySignatures.map(function(e){return gN(e)}),!0),n.header.meta.map(function(e){return _N(e)}),!0),n.header.tempos.map(function(e){return pN(e)}),!0),n.header.timeSignatures.map(function(e){return mN(e)}),!0)],n.tracks.map(function(e){return Xs(Xs(Xs([fN(e.name),dN(e)],aN(e),!0),lN(e),!0),hN(e),!0)}),!0)};return t.tracks=t.tracks.map(function(e){e=e.sort(function(r,i){return r.absoluteTime-i.absoluteTime});var s=0;return e.forEach(function(r){r.deltaTime=r.absoluteTime-s,s=r.absoluteTime,delete r.absoluteTime}),e.push({deltaTime:0,meta:!0,type:"endOfTrack"}),e}),new Uint8Array((0,sN.writeMidi)(t))}bl.encode=vN;(function(n){var t=Er&&Er.__awaiter||function(h,d,f,p){function m(g){return g instanceof f?g:new f(function(v){v(g)})}return new(f||(f=Promise))(function(g,v){function w(_){try{T(p.next(_))}catch(b){v(b)}}function x(_){try{T(p.throw(_))}catch(b){v(b)}}function T(_){_.done?g(_.value):m(_.value).then(w,x)}T((p=p.apply(h,d||[])).next())})},e=Er&&Er.__generator||function(h,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(T){return function(_){return x([T,_])}}function x(T){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,m&&(g=T[0]&2?m.return:T[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,T[1])).done)return g;switch(m=0,g&&(T=[T[0]&2,g.value]),T[0]){case 0:case 1:g=T;break;case 4:return f.label++,{value:T[1],done:!1};case 5:f.label++,m=T[1],T=[0];continue;case 7:T=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(T[0]===6||T[0]===2)){f=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){f.label=T[1];break}if(T[0]===6&&f.label<g[1]){f.label=g[1],g=T;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(T);break}g[2]&&f.ops.pop(),f.trys.pop();continue}T=d.call(h,f)}catch(_){T=[6,_],m=0}finally{p=g=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Header=n.Track=n.Midi=void 0;var s=ml,r=bc,i=qo,o=bl,a=function(){function h(d){var f=this,p=null;if(d){var m=d instanceof ArrayBuffer?new Uint8Array(d):d;p=(0,s.parseMidi)(m),p.tracks.forEach(function(g){var v=0;g.forEach(function(w){v+=w.deltaTime,w.absoluteTime=v})}),p.tracks=u(p.tracks)}this.header=new r.Header(p),this.tracks=[],d&&(this.tracks=p.tracks.map(function(g){return new i.Track(g,f.header)}),p.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return h.fromUrl=function(d){return t(this,void 0,void 0,function(){var f,p;return e(this,function(m){switch(m.label){case 0:return[4,fetch(d)];case 1:return f=m.sent(),f.ok?[4,f.arrayBuffer()]:[3,3];case 2:return p=m.sent(),[2,new h(p)];case 3:throw new Error("Could not load '".concat(d,"'"))}})})},Object.defineProperty(h.prototype,"name",{get:function(){return this.header.name},set:function(d){this.header.name=d},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){var d=this.tracks.map(function(f){return f.duration});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"durationTicks",{get:function(){var d=this.tracks.map(function(f){return f.durationTicks});return Math.max.apply(Math,d)},enumerable:!1,configurable:!0}),h.prototype.addTrack=function(){var d=new i.Track(void 0,this.header);return this.tracks.push(d),d},h.prototype.toArray=function(){return(0,o.encode)(this)},h.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(d){return d.toJSON()})}},h.prototype.fromJSON=function(d){var f=this;this.header=new r.Header,this.header.fromJSON(d.header),this.tracks=d.tracks.map(function(p){var m=new i.Track(void 0,f.header);return m.fromJSON(p),m})},h.prototype.clone=function(){var d=new h;return d.fromJSON(this.toJSON()),d},h}();n.Midi=a;var c=qo;Object.defineProperty(n,"Track",{enumerable:!0,get:function(){return c.Track}});var l=bc;Object.defineProperty(n,"Header",{enumerable:!0,get:function(){return l.Header}});function u(h){for(var d=[],f=0;f<h.length;f++)for(var p=d.length,m=new Map,g=Array(16).fill(0),v=0,w=h[f];v<w.length;v++){var x=w[v],T=p,_=x.channel;if(_!==void 0){x.type==="programChange"&&(g[_]=x.programNumber);var b=g[_],y="".concat(b," ").concat(_);m.has(y)?T=m.get(y):(T=p+m.size,m.set(y,T))}d[T]||d.push([]),d[T].push(x)}return d}})(OA);let Yi=class fo{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,e,s={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==fo.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof e!="function")throw new TypeError("The callback must be a function.");const r=new $p(t,this,e,s);return this.eventMap[t]||(this.eventMap[t]=[]),s.prepend?this.eventMap[t].unshift(r):this.eventMap[t].push(r),r}addOneTimeListener(t,e,s={}){s.remaining=1,this.addListener(t,e,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,e){return t===void 0?this.eventMap[fo.ANY_EVENT]&&this.eventMap[fo.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[t]&&this.eventMap[t].length>0?e instanceof $p?this.eventMap[t].filter(s=>s===e).length>0:typeof e=="function"?this.eventMap[t].filter(s=>s.callback===e).length>0:e==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(e=>{e.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(e=>{e.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...e){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],r=this.eventMap[fo.ANY_EVENT]||[];return this.eventMap[t]&&(r=r.concat(this.eventMap[t])),r.forEach(i=>{if(i.suspended)return;let o=[...e];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(s.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),s}removeListener(t,e,s={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let r=this.eventMap[t].filter(i=>e&&i.callback!==e||s.remaining&&s.remaining!==i.remaining||s.context&&s.context!==i.context);r.length?this.eventMap[t]=r:delete this.eventMap[t]}async waitFor(t,e={}){return e.duration=parseInt(e.duration),(isNaN(e.duration)||e.duration<=0)&&(e.duration=1/0),new Promise((s,r)=>{let i,o=this.addListener(t,()=>{clearTimeout(i),s()},{remaining:1});e.duration!==1/0&&(i=setTimeout(()=>{o.remove(),r("The duration expired before the event was emitted.")},e.duration))})}get eventCount(){return Object.keys(this.eventMap).length}},$p=class{constructor(t,e,s,r={}){if(typeof t!="string"&&!(t instanceof String)&&t!==Yi.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!e)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");r.arguments!==void 0&&!Array.isArray(r.arguments)&&(r.arguments=[r.arguments]),r=Object.assign({context:e,remaining:1/0,arguments:void 0,duration:1/0},r),r.duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=s,this.context=r.context,this.count=0,this.event=t,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=e}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}};/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */let W=class po{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),po.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),po.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),po.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),po.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}};/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */let oi=class{constructor(t,e={}){this.duration=tt.defaults.note.duration,this.attack=tt.defaults.note.attack,this.release=tt.defaults.note.release,e.duration!=null&&(this.duration=e.duration),e.attack!=null&&(this.attack=e.attack),e.rawAttack!=null&&(this.attack=Q.from7bitToFloat(e.rawAttack)),e.release!=null&&(this.release=e.release),e.rawRelease!=null&&(this.release=Q.from7bitToFloat(e.rawRelease)),Number.isInteger(t)?this.identifier=Q.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const e=Q.getNoteDetails(t);if(tt.validation&&!t)throw new Error("Invalid note identifier");this._name=e.name,this._accidental=e.accidental,this._octave=e.octave}get name(){return this._name}set name(t){if(tt.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(tt.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(tt.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(tt.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(tt.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(tt.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return Q.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=Q.from7bitToFloat(t)}get rawRelease(){return Q.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=Q.from7bitToFloat(t)}get number(){return Q.toNoteNumber(this.identifier)}getOffsetNumber(t=0,e=0){return tt.validation&&(t=parseInt(t)||0,e=parseInt(e)||0),Math.min(Math.max(this.number+t*12+e,0),127)}};/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Q{static toNoteNumber(t,e=0){if(e=e==null?0:parseInt(e),isNaN(e))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const s=this.getNoteDetails(t);if(!s)throw new TypeError("Invalid note identifier");const r={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let i=(s.octave+1+e)*12;if(i+=r[s.name],s.accidental&&(s.accidental.startsWith("b")?i-=s.accidental.length:i+=s.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const e=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!e)throw new TypeError("Invalid note identifier");const s=e[1].toUpperCase(),r=parseInt(e[3]);let i=e[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:s+(i||"")+r,name:s,octave:r}}static sanitizeChannels(t){let e;if(tt.validation){if(t==="all")e=["all"];else if(t==="none")return[]}return Array.isArray(t)?e=t:e=[t],e.indexOf("all")>-1&&(e=W.MIDI_CHANNEL_NUMBERS),e.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(t){let e=!1;const s=parseFloat(t);return isNaN(s)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?s>=0&&(e=tt.time+s):s>=0&&(e=s),e)}static guessNoteNumber(t,e){e=parseInt(e)||0;let s=!1;if(Number.isInteger(t)&&t>=0&&t<=127)s=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)s=parseInt(t);else if(typeof t=="string"||t instanceof String)try{s=this.toNoteNumber(t.trim(),e)}catch{return!1}return s}static toNoteIdentifier(t,e){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(e=e==null?0:parseInt(e),isNaN(e))throw new RangeError("Invalid octaveOffset value");const s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=Math.floor(t/12-1)+e;return s[t%12]+r.toString()}static buildNote(t,e={}){if(e.octaveOffset=parseInt(e.octaveOffset)||0,t instanceof oi)return t;let s=this.guessNoteNumber(t,e.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return e.octaveOffset=void 0,new oi(s,e)}static buildNoteArray(t,e={}){let s=[];return Array.isArray(t)||(t=[t]),t.forEach(r=>{s.push(this.buildNote(r,e))}),s}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,e=0){tt.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),e=Math.min(Math.max(parseInt(e)||0,0),127));const s=((t<<7)+e)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(t){tt.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const e=Math.round(t*16383);return{msb:e>>7,lsb:e&127}}static offsetNumber(t,e=0,s=0){if(tt.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");e=parseInt(e)||0,s=parseInt(s)||0}return Math.min(Math.max(t+e*12+s,0),127)}static getPropertyByValue(t,e){return Object.keys(t).find(s=>t[s]===e)}static getCcNameByNumber(t){if(!(tt.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return W.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let e=W.CONTROL_CHANGE_MESSAGES.find(s=>s.name===t);return e?e.number:W.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let e in W.CHANNEL_MODE_MESSAGES)if(W.CHANNEL_MODE_MESSAGES.hasOwnProperty(e)&&t===W.CHANNEL_MODE_MESSAGES[e])return e;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */let yN=class extends Yi{constructor(t,e){super(),this._output=t,this._number=e,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,e={time:0}){return this.output.send(t,e),this}sendKeyAftertouch(t,e,s={}){if(tt.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(e)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(e=Q.fromFloatTo7Bit(e));const r=tt.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),Q.buildNoteArray(t).forEach(i=>{this.send([(W.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(r),e],{time:Q.toTimestamp(s.time)})}),this}sendControlChange(t,e,s={}){if(typeof t=="string"&&(t=Q.getCcNumberByName(t)),Array.isArray(e)||(e=[e]),tt.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(e=e.map(r=>{const i=Math.min(Math.max(parseInt(r),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),e.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return e.forEach((r,i)=>{this.send([(W.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+i*32,e[i]],{time:Q.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(t,e={}){return this.sendControlChange(99,t[0],e),this.sendControlChange(98,t[1],e),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,e={}){return this.sendControlChange(101,t[0],e),this.sendControlChange(100,t[1],e),this}_setCurrentParameter(t,e={}){return t=[].concat(t),this.sendControlChange(6,t[0],e),t.length<2?this:(this.sendControlChange(38,t[1],e),this)}sendRpnDecrement(t,e={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),tt.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(W.REGISTERED_PARAMETERS).forEach(r=>{W.REGISTERED_PARAMETERS[r][0]===t[0]&&W.REGISTERED_PARAMETERS[r][1]===t[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,e),this.sendControlChange(97,0,e),this._deselectRegisteredParameter(e),this}sendRpnIncrement(t,e={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),tt.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(W.REGISTERED_PARAMETERS).forEach(r=>{W.REGISTERED_PARAMETERS[r][0]===t[0]&&W.REGISTERED_PARAMETERS[r][1]===t[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,e),this.sendControlChange(96,0,e),this._deselectRegisteredParameter(e),this}playNote(t,e={}){this.sendNoteOn(t,e);const s=Array.isArray(t)?t:[t];for(let r of s)if(parseInt(r.duration)>0){const i={time:(Q.toTimestamp(e.time)||tt.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(r,i)}else if(parseInt(e.duration)>0){const i={time:(Q.toTimestamp(e.time)||tt.time)+parseInt(e.duration),release:e.release,rawRelease:e.rawRelease};this.sendNoteOff(r,i)}return this}sendNoteOff(t,e={}){if(tt.validation){if(e.rawRelease!=null&&!(e.rawRelease>=0&&e.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(e.release!=null&&!(e.release>=0&&e.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");e.rawVelocity&&(e.rawRelease=e.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),e.velocity&&(e.release=e.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;e.rawRelease!=null?s=e.rawRelease:isNaN(e.release)||(s=Math.round(e.release*127));const r=tt.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Q.buildNoteArray(t,{rawRelease:parseInt(s)}).forEach(i=>{this.send([(W.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(r),i.rawRelease],{time:Q.toTimestamp(e.time)})}),this}stopNote(t,e={}){return this.sendNoteOff(t,e)}sendNoteOn(t,e={}){if(tt.validation){if(e.rawAttack!=null&&!(e.rawAttack>=0&&e.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(e.attack!=null&&!(e.attack>=0&&e.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");e.rawVelocity&&(e.rawAttack=e.velocity,e.rawRelease=e.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),e.velocity&&(e.attack=e.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;e.rawAttack!=null?s=e.rawAttack:isNaN(e.attack)||(s=Math.round(e.attack*127));const r=tt.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Q.buildNoteArray(t,{rawAttack:s}).forEach(i=>{this.send([(W.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(r),i.rawAttack],{time:Q.toTimestamp(e.time)})}),this}sendChannelMode(t,e=0,s={}){if(typeof t=="string"&&(t=W.CHANNEL_MODE_MESSAGES[t]),tt.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(e))||e<0||e>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(W.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,e],{time:Q.toTimestamp(s.time)}),this}sendOmniMode(t,e={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,e):this.sendChannelMode("omnimodeoff",0,e),this}sendChannelAftertouch(t,e={}){if(tt.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(e.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return e.rawValue||(t=Q.fromFloatTo7Bit(t)),this.send([(W.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:Q.toTimestamp(e.time)}),this}sendMasterTuning(t,e={}){if(t=parseFloat(t)||0,tt.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(t)+64,r=t-Math.floor(t);r=Math.round((r+1)/2*16383);let i=r>>7&127,o=r&127;return this.sendRpnValue("channelcoarsetuning",s,e),this.sendRpnValue("channelfinetuning",[i,o],e),this}sendModulationRange(t,e,s={}){if(tt.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(e!=null&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return e>=0&&e<=127||(e=0),this.sendRpnValue("modulationrange",[t,e],s),this}sendNrpnValue(t,e,s={}){if(e=[].concat(e),tt.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");e.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,s),this._setCurrentParameter(e,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(t,e={}){if(tt.validation)if(e.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(e.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let s=0,r=0;if(e.rawValue&&Array.isArray(t))s=t[0],r=t[1];else if(e.rawValue&&!Array.isArray(t))s=t;else{const i=Q.fromFloatToMsbLsb((t+1)/2);s=i.msb,r=i.lsb}return this.send([(W.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,s],{time:Q.toTimestamp(e.time)}),this}sendPitchBendRange(t,e,s={}){if(tt.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,e],s),this}sendProgramChange(t,e={}){if(t=parseInt(t)||0,tt.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(W.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:Q.toTimestamp(e.time)}),this}sendRpnValue(t,e,s={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),tt.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(e).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,s),this._setCurrentParameter(e,s),this._deselectRegisteredParameter(s),this}sendTuningBank(t,e={}){if(tt.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,e),this}sendTuningProgram(t,e={}){if(tt.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,e),this}sendLocalControl(t,e={}){return t?this.sendChannelMode("localcontrol",127,e):this.sendChannelMode("localcontrol",0,e)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,e={}){return t==="mono"?this.sendChannelMode("monomodeon",0,e):this.sendChannelMode("polymodeon",0,e)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}};/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let rh=class extends Yi{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new yN(this,e);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let e={timestamp:tt.time};t.port.connection==="open"?(e.type="opened",e.target=this,e.port=e.target,this.emit("opened",e)):t.port.connection==="closed"&&t.port.state==="connected"?(e.type="closed",e.target=this,e.port=e.target,this.emit("closed",e)):t.port.connection==="closed"&&t.port.state==="disconnected"?(e.type="disconnected",e.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",e)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,e={time:0},s=0){if(t instanceof Y0&&(t=Q.isNode?t.data:t.rawData),t instanceof Uint8Array&&Q.isNode&&(t=Array.from(t)),tt.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(e)&&(t=t.concat(e)),e=isNaN(s)?{time:0}:{time:s}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(r=>{if(r=parseInt(r),!(r>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),e||(e={time:0})}return this._midiOutput.send(t,Q.toTimestamp(e.time)),this}sendSysex(t,e=[],s={}){if(t=[].concat(t),e instanceof Uint8Array){const r=new Uint8Array(1+t.length+e.length+1);r[0]=W.SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(t),1),r.set(e,1+t.length),r[r.length-1]=W.SYSTEM_MESSAGES.sysexend,this.send(r,{time:s.time})}else{const r=t.concat(e,W.SYSTEM_MESSAGES.sysexend);this.send([W.SYSTEM_MESSAGES.sysex].concat(r),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():tt.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,e={}){if(tt.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([W.SYSTEM_MESSAGES.timecode,t],{time:e.time}),this}sendSongPosition(t=0,e={}){t=Math.floor(t)||0;var s=t>>7&127,r=t&127;return this.send([W.SYSTEM_MESSAGES.songposition,s,r],{time:e.time}),this}sendSongSelect(t=0,e={}){if(tt.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([W.SYSTEM_MESSAGES.songselect,t],{time:e.time}),this}sendTuneRequest(t={}){return this.send([W.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([W.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([W.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([W.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([W.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([W.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([W.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return tt.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,e,s={}){return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(t,e,s)}),this}sendControlChange(t,e,s={},r={}){if(tt.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;s=r,s.channels=i,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendControlChange(t,e,s)}),this}sendPitchBendRange(t=0,e=0,s={}){return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendPitchBendRange(t,e,s)}),this}setPitchBendRange(t=0,e=0,s="all",r={}){return tt.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,e,r)}sendRpnValue(t,e,s={}){return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendRpnValue(t,e,s)}),this}setRegisteredParameter(t,e=[],s="all",r={}){return tt.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,e,r)}sendChannelAftertouch(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(t,e)}),this}sendPitchBend(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendPitchBend(t,e)}),this}sendProgramChange(t=0,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendProgramChange(t,e)}),this}sendModulationRange(t,e,s={}){return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendModulationRange(t,e,s)}),this}setModulationRange(t=0,e=0,s="all",r={}){return tt.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,e,r)}sendMasterTuning(t,e={}){return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendMasterTuning(t,e)}),this}setMasterTuning(t,e={},s={}){return tt.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=e,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,s)}sendTuningProgram(t,e={}){return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendTuningProgram(t,e)}),this}setTuningProgram(t,e="all",s={}){return tt.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=e,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,s)}sendTuningBank(t=0,e={}){return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendTuningBank(t,e)}),this}setTuningBank(t,e="all",s={}){return tt.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=e,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,s)}sendChannelMode(t,e=0,s={},r={}){if(tt.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;s=r,s.channels=i,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendChannelMode(t,e,s)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(t.channels).forEach(e=>{this.channels[e].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(t.channels).forEach(e=>{this.channels[e].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},e={}){if(tt.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=e,t.channels=s,t.channels==="all"&&(t.channels=W.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(t,e)}),this}sendLocalControl(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendLocalControl(t,e)}),this}sendOmniMode(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendOmniMode(t,e)}),this}sendNrpnValue(t,e,s={}){return s.channels==null&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendNrpnValue(t,e,s)}),this}setNonRegisteredParameter(t,e=[],s="all",r={}){return tt.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,e,r)}sendRpnIncrement(t,e={}){return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendRpnIncrement(t,e)}),this}incrementRegisteredParameter(t,e="all",s={}){return tt.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=e,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,s)}sendRpnDecrement(t,e={}){return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendRpnDecrement(t,e)}),this}decrementRegisteredParameter(t,e="all",s={}){return tt.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=e,s.channels==="all"&&(s.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,s)}sendNoteOff(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendNoteOff(t,e)}),this}stopNote(t,e){return this.sendNoteOff(t,e)}playNote(t,e={},s={}){if(tt.validation&&(e.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),e.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].playNote(t,e)}),this}sendNoteOn(t,e={},s={}){if(tt.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=s,e.channels=r,e.channels==="all"&&(e.channels=W.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendNoteOn(t,e)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}};/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */let Wp=class{constructor(t=[],e={}){this.destinations=[],this.types=[...Object.keys(W.SYSTEM_MESSAGES),...Object.keys(W.CHANNEL_MESSAGES)],this.channels=W.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),e.types&&!Array.isArray(e.types)&&(e.types=[e.types]),e.channels&&!Array.isArray(e.channels)&&(e.channels=[e.channels]),tt.validation&&(t.forEach(s=>{if(!(s instanceof rh))throw new TypeError("Destinations must be of type 'Output'.")}),e.types!==void 0&&e.types.forEach(s=>{if(!W.SYSTEM_MESSAGES.hasOwnProperty(s)&&!W.CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),e.channels!==void 0&&e.channels.forEach(s=>{if(!W.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,e.types&&(this.types=e.types),e.channels&&(this.channels=e.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(e=>{tt.validation&&!(e instanceof rh)||e.send(t)}))}};/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */let bN=class extends Yi{constructor(t,e){super(),this._input=t,this._number=e,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const e=Object.assign({},t);e.port=this.input,e.target=this,e.type="midimessage",this.emit(e.type,e),this._parseEventForStandardMessages(e)}_parseEventForStandardMessages(t){const e=Object.assign({},t);e.type=e.message.type||"unknownmessage";const s=t.message.dataBytes[0],r=t.message.dataBytes[1];if(e.type==="noteoff"||e.type==="noteon"&&r===0)this.notesState[s]=!1,e.type="noteoff",e.note=new oi(Q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+tt.octaveOffset),{rawAttack:0,rawRelease:r}),e.value=Q.from7bitToFloat(r),e.rawValue=r,e.velocity=e.note.release,e.rawVelocity=e.note.rawRelease;else if(e.type==="noteon")this.notesState[s]=!0,e.note=new oi(Q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+tt.octaveOffset),{rawAttack:r}),e.value=Q.from7bitToFloat(r),e.rawValue=r,e.velocity=e.note.attack,e.rawVelocity=e.note.rawAttack;else if(e.type==="keyaftertouch")e.note=new oi(Q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+tt.octaveOffset)),e.value=Q.from7bitToFloat(r),e.rawValue=r,e.identifier=e.note.identifier,e.key=e.note.number,e.rawKey=s;else if(e.type==="controlchange"){e.controller={number:s,name:W.CONTROL_CHANGE_MESSAGES[s].name,description:W.CONTROL_CHANGE_MESSAGES[s].description,position:W.CONTROL_CHANGE_MESSAGES[s].position},e.subtype=e.controller.name||"controller"+s,e.value=Q.from7bitToFloat(r),e.rawValue=r;const i=Object.assign({},e);i.type=`${e.type}-controller${s}`,delete i.subtype,this.emit(i.type,i);const o=Object.assign({},e);o.type=`${e.type}-`+W.CONTROL_CHANGE_MESSAGES[s].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),e.message.dataBytes[0]>=120&&this._parseChannelModeMessage(e),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(e.message.dataBytes[0])&&this._parseEventForParameterNumber(e)}else e.type==="programchange"?(e.value=s,e.rawValue=e.value):e.type==="channelaftertouch"?(e.value=Q.from7bitToFloat(s),e.rawValue=s):e.type==="pitchbend"?(e.value=((r<<7)+s-8192)/8192,e.rawValue=(r<<7)+s):e.type="unknownmessage";this.emit(e.type,e)}_parseChannelModeMessage(t){const e=Object.assign({},t);e.type=e.controller.name,e.type==="localcontrol"&&(e.value=e.message.data[2]===127,e.rawValue=e.message.data[2]),e.type==="omnimodeon"?(e.type="omnimode",e.value=!0,e.rawValue=e.message.data[2]):e.type==="omnimodeoff"&&(e.type="omnimode",e.value=!1,e.rawValue=e.message.data[2]),e.type==="monomodeon"?(e.type="monomode",e.value=!0,e.rawValue=e.message.data[2]):e.type==="polymodeon"&&(e.type="monomode",e.value=!1,e.rawValue=e.message.data[2]),this.emit(e.type,e)}_parseEventForParameterNumber(t){const e=t.message.dataBytes[0],s=t.message.dataBytes[1];e===99||e===101?(this._nrpnBuffer=[],this._rpnBuffer=[],e===99?this._nrpnBuffer=[t.message]:s!==127&&(this._rpnBuffer=[t.message])):e===98||e===100?e===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(e===6||e===38||e===96||e===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,e,s,r){t=t==="nrpn"?"nrpn":"rpn";const i={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:e,parameterLsb:s,value:Q.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};t==="rpn"?i.parameter=Object.keys(W.REGISTERED_PARAMETERS).find(c=>W.REGISTERED_PARAMETERS[c][0]===e&&W.REGISTERED_PARAMETERS[c][1]===s):i.parameter=(e<<7)+s;const o=W.CONTROL_CHANGE_MESSAGES[r.message.dataBytes[0]].name;i.type=`${t}-${o}`,this.emit(i.type,i);const a=Object.assign({},i);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),i.type=t,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(t){return tt.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),Q.getChannelModeByNumber(t)}getCcNameByNumber(t){if(tt.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return Q.getCcNameByNumber(t)}getNoteState(t){t instanceof oi&&(t=t.identifier);const e=Q.guessNoteNumber(t,tt.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[e]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}};/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */let Y0=class{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=Q.getPropertyByValue(W.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=Q.getPropertyByValue(W.SYSTEM_MESSAGES,this.command)),this.statusByte===W.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}};/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let wN=class extends Yi{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new bN(this,e);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let e={timestamp:tt.time,target:this,port:this};t.port.connection==="open"?(e.type="opened",this.emit("opened",e)):t.port.connection==="closed"&&t.port.state==="connected"?(e.type="closed",this.emit("closed",e)):t.port.connection==="closed"&&t.port.state==="disconnected"?(e.type="disconnected",e.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",e)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const e=new Y0(t.data),s={port:this,target:this,message:e,timestamp:t.timeStamp,type:"midimessage",data:e.data,rawData:e.data,statusByte:e.data[0],dataBytes:e.dataBytes};this.emit("midimessage",s),e.isSystemMessage?this._parseEvent(s):e.isChannelMessage&&this.channels[e.channel]._processMidiMessageEvent(s),this._forwarders.forEach(r=>r.forward(e))}_parseEvent(t){const e=Object.assign({},t);e.type=e.message.type||"unknownmidimessage",e.type==="songselect"&&(e.song=t.data[1]+1,e.value=t.data[1],e.rawValue=e.value),this.emit(e.type,e)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){tt.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,e,s={}){if(tt.validation&&typeof s=="function"){let r=e!=null?[].concat(e):void 0;e=s,s={channels:r}}if(W.CHANNEL_EVENTS.includes(t)){s.channels===void 0&&(s.channels=W.MIDI_CHANNEL_NUMBERS);let r=[];return Q.sanitizeChannels(s.channels).forEach(i=>{r.push(this.channels[i].addListener(t,e,s))}),r}else return super.addListener(t,e,s)}addOneTimeListener(t,e,s={}){return s.remaining=1,this.addListener(t,e,s)}on(t,e,s,r){return this.addListener(t,e,s,r)}hasListener(t,e,s={}){if(tt.validation&&typeof s=="function"){let r=[].concat(e);e=s,s={channels:r}}return W.CHANNEL_EVENTS.includes(t)?(s.channels===void 0&&(s.channels=W.MIDI_CHANNEL_NUMBERS),Q.sanitizeChannels(s.channels).every(r=>this.channels[r].hasListener(t,e))):super.hasListener(t,e)}removeListener(t,e,s={}){if(tt.validation&&typeof s=="function"){let r=[].concat(e);e=s,s={channels:r}}if(s.channels===void 0&&(s.channels=W.MIDI_CHANNEL_NUMBERS),t==null)return Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();W.CHANNEL_EVENTS.includes(t)?Q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].removeListener(t,e,s)}):super.removeListener(t,e,s)}addForwarder(t,e={}){let s;return t instanceof Wp?s=t:s=new Wp(t,e),this._forwarders.push(s),s}removeForwarder(t){this._forwarders=this._forwarders.filter(e=>e!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return tt.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}};/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let TN=class extends Yi{constructor(){super(),this.defaults={note:{attack:Q.from7bitToFloat(64),release:Q.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},e=!1){if(Q.isNode)try{window.navigator}catch{let o=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,o)}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:e}),e&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const s={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(o){return s.error=o,this.emit("error",s),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return s.error=o,this.emit("error",s),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(this._disconnectedInputs[s].id===t.toString())return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(this.inputs[s].id===t.toString())return this.inputs[s]}getInputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(~this._disconnectedInputs[s].name.indexOf(t))return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(~this.inputs[s].name.indexOf(t))return this.inputs[s]}getOutputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(~this._disconnectedOutputs[s].name.indexOf(t))return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(~this.outputs[s].name.indexOf(t))return this.outputs[s]}getOutputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(this._disconnectedOutputs[s].id===t.toString())return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(this.outputs[s].id===t.toString())return this.outputs[s]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),Q.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?Q.getNoteDetails(Q.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),Q.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),Q.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),Q.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),Q.buildNoteArray(t,e)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),Q.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(e=>t.push(e.destroy())),this.outputs.forEach(e=>t.push(e.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let e={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?e.port=this.getOutputById(t.port.id):t.port.type==="input"&&(e.port=this.getInputById(t.port.id)),this.emit(t.port.state,e);const s=Object.assign({},e);s.type="portschanged",this.emit(s.type,s)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?e.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(e.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,e);const s=Object.assign({},e);s.type="portschanged",this.emit(s.type,s)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){const s=this._inputs[e];Array.from(this.interface.inputs.values()).find(r=>r===s._midiInput)||(this._disconnectedInputs.push(s),this._inputs.splice(e,1))}let t=[];return this.interface.inputs.forEach(e=>{if(!this._inputs.find(s=>s._midiInput===e)){let s=this._disconnectedInputs.find(r=>r._midiInput===e);s||(s=new wN(e)),this._inputs.push(s),t.push(s.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){const s=this._outputs[e];Array.from(this.interface.outputs.values()).find(r=>r===s._midiOutput)||(this._disconnectedOutputs.push(s),this._outputs.splice(e,1))}let t=[];return this.interface.outputs.forEach(e=>{if(!this._outputs.find(s=>s._midiOutput===e)){let s=this._disconnectedOutputs.find(r=>r._midiOutput===e);s||(s=new rh(e)),this._outputs.push(s),t.push(s.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),Q.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),Q.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.11"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),W.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),W.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),W.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),W.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),W.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};const tt=new TN;tt.constructor=null;function X0(n){return n!==null&&typeof n=="object"&&"name"in n&&typeof n.name=="string"}function Z0(n){return n!==null&&typeof n=="object"&&"step"in n&&typeof n.step=="number"&&"alt"in n&&typeof n.alt=="number"&&!isNaN(n.step)&&!isNaN(n.alt)}var K0=[0,2,4,-1,1,3,5],J0=K0.map(n=>Math.floor(n*7/12));function Q0(n){const{step:t,alt:e,oct:s,dir:r=1}=n,i=K0[t]+7*e;if(s===void 0)return[r*i];const o=s-J0[t]-4*e;return[r*i,r*o]}var SN=[3,0,4,1,5,2,6];function xN(n){const[t,e,s]=n,r=SN[MN(t)],i=Math.floor((t+1)/7);if(e===void 0)return{step:r,alt:i,dir:s};const o=e+4*i+J0[r];return{step:r,alt:i,oct:o,dir:s}}function MN(n){const t=(n+1)%7;return t<0?7+t:t}var Gp=(n,t)=>Array(Math.abs(t)+1).join(n),ih=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),CN="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",EN="(AA|A|P|M|m|d|dd)([-+]?\\d+)",AN=new RegExp("^"+CN+"|"+EN+"$");function NN(n){const t=AN.exec(`${n}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var zp={};function wc(n){return typeof n=="string"?zp[n]||(zp[n]=kN(n)):Z0(n)?wc(IN(n)):X0(n)?wc(n.name):ih}var Hp=[0,2,4,5,7,9,11],tv="PMMPPMM";function kN(n){const t=NN(n);if(t[0]==="")return ih;const e=+t[0],s=t[1],r=(Math.abs(e)-1)%7,i=tv[r];if(i==="M"&&s==="P")return ih;const o=i==="M"?"majorable":"perfectable",a=""+e+s,c=e<0?-1:1,l=e===8||e===-8?e:c*(r+1),u=ON(o,s),h=Math.floor((Math.abs(e)-1)/7),d=c*(Hp[r]+u+12*h),f=(c*(Hp[r]+u)%12+12)%12,p=Q0({step:r,alt:u,oct:h,dir:c});return{empty:!1,name:a,num:e,q:s,step:r,alt:u,dir:c,type:o,simple:l,semitones:d,chroma:f,coord:p,oct:h}}function ON(n,t){return t==="M"&&n==="majorable"||t==="P"&&n==="perfectable"?0:t==="m"&&n==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(n==="perfectable"?t.length:t.length+1):0}function IN(n){const{step:t,alt:e,oct:s=0,dir:r}=n;if(!r)return"";const i=t+1+7*s,o=i===0?t+1:i,a=r<0?"-":"",c=tv[t]==="M"?"majorable":"perfectable";return a+o+PN(c,e)}function PN(n,t){return t===0?n==="majorable"?"M":"P":t===-1&&n==="majorable"?"m":t>0?Gp("A",t):Gp("d",n==="perfectable"?t:t+1)}var Yp=(n,t)=>Array(Math.abs(t)+1).join(n),ev=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Xp=new Map,RN=n=>"CDEFGAB".charAt(n),DN=n=>n<0?Yp("b",-n):Yp("#",n),VN=n=>n[0]==="b"?-n.length:n.length;function ke(n){const t=JSON.stringify(n),e=Xp.get(t);if(e)return e;const s=typeof n=="string"?UN(n):Z0(n)?ke(jN(n)):X0(n)?ke(n.name):ev;return Xp.set(t,s),s}var FN=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function LN(n){const t=FN.exec(n);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function qN(n){return ke(xN(n))}var BN=(n,t)=>(n%t+t)%t,fu=[0,2,4,5,7,9,11];function UN(n){const t=LN(n);if(t[0]===""||t[3]!=="")return ev;const e=t[0],s=t[1],r=t[2],i=(e.charCodeAt(0)+3)%7,o=VN(s),a=r.length?+r:void 0,c=Q0({step:i,alt:o,oct:a}),l=e+s+r,u=e+s,h=(fu[i]+o+120)%12,d=a===void 0?BN(fu[i]+o,12)-12*99:fu[i]+o+12*(a+1),f=d>=0&&d<=127?d:null,p=a===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:s,alt:o,chroma:h,coord:c,freq:p,height:d,letter:e,midi:f,name:l,oct:a,pc:u,step:i}}function jN(n){const{step:t,alt:e,oct:s}=n,r=RN(t);if(!r)return"";const i=r+DN(e);return s||s===0?i+s:i}function nv(n,t){const e=ke(n),s=Array.isArray(t)?t:wc(t).coord;if(e.empty||!s||s.length<2)return"";const r=e.coord,i=r.length===1?[r[0]+s[0]]:[r[0]+s[0],r[1]+s[1]];return qN(i).name}function wl(n,t){const e=t.length,s=(n%e+e)%e;return t.slice(s,e).concat(t.slice(0,s))}function $N(n){return n.filter(t=>t===0||t)}var Vr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},sv=n=>Number(n).toString(2).padStart(12,"0"),Zp=n=>parseInt(n,2),WN=/^[01]{12}$/;function rv(n){return WN.test(n)}var GN=n=>typeof n=="number"&&n>=0&&n<=4095,zN=n=>n&&rv(n.chroma),Kp={[Vr.chroma]:Vr};function Tl(n){const t=rv(n)?n:GN(n)?sv(n):Array.isArray(n)?QN(n):zN(n)?n.chroma:Vr.chroma;return Kp[t]=Kp[t]||JN(t)}var HN=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function YN(n){const t=[];for(let e=0;e<12;e++)n.charAt(e)==="1"&&t.push(HN[e]);return t}function XN(n,t=!0){const e=Tl(n).chroma.split("");return $N(e.map((s,r)=>{const i=wl(r,e);return t&&i[0]==="0"?null:i.join("")}))}function ZN(n){const t=Tl(n);return e=>{const s=ke(e);return t&&!s.empty&&t.chroma.charAt(s.chroma)==="1"}}function KN(n){const t=n.split("");return t.map((e,s)=>wl(s,t).join(""))}function JN(n){const t=Zp(n),e=KN(n).map(Zp).filter(i=>i>=2048).sort()[0],s=sv(e),r=YN(n);return{empty:!1,name:"",setNum:t,chroma:n,normalized:s,intervals:r}}function QN(n){if(n.length===0)return Vr.chroma;let t;const e=[0,0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<n.length;s++)t=ke(n[s]),t.empty&&(t=wc(n[s])),t.empty||(e[t.chroma]=1);return e.join("")}var tk=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],ek=tk;({...Vr});var Ed=[],Xa={};function nk(){return Ed.slice()}function iv(n,t,e){const s=rk(n),r={...Tl(n),name:e||"",quality:s,intervals:n,aliases:t};Ed.push(r),r.name&&(Xa[r.name]=r),Xa[r.setNum]=r,Xa[r.chroma]=r,r.aliases.forEach(i=>sk(r,i))}function sk(n,t){Xa[t]=n}function rk(n){const t=e=>n.indexOf(e)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}ek.forEach(([n,t,e])=>iv(n.split(" "),e.split(" "),t));Ed.sort((n,t)=>n.setNum-t.setNum);var ik=n=>{const t=n.reduce((e,s)=>{const r=ke(s).chroma;return r!==void 0&&(e[r]=e[r]||ke(s).name),e},{});return e=>t[e]};function ok(n,t={}){const e=n.map(s=>ke(s).pc).filter(s=>s);return ke.length===0?[]:fk(e,1,t).filter(s=>s.weight).sort((s,r)=>r.weight-s.weight).map(s=>s.name)}var Sl={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},xl=n=>t=>!!(t&n),ak=xl(Sl.anyThirds),ck=xl(Sl.perfectFifth),lk=xl(Sl.anySeventh),uk=xl(Sl.nonPerfectFifths);function hk(n){const t=parseInt(n.chroma,2);return ak(t)&&ck(t)&&lk(t)}function dk(n){const t=parseInt(n,2);return uk(t)?n:(t|16).toString(2)}function fk(n,t,e){const s=n[0],r=ke(s).chroma,i=ik(n),o=XN(n,!1),a=[];return o.forEach((c,l)=>{const u=e.assumePerfectFifth&&dk(c);nk().filter(h=>e.assumePerfectFifth&&hk(h)?h.chroma===u:h.chroma===c).forEach(h=>{const d=h.aliases[0],f=i(l);l!==r?a.push({weight:.5*t,name:`${f}${d}/${s}`}):a.push({weight:1*t,name:`${f}${d}`})})}),a}var pk=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],mk=pk,gk={...Vr,intervals:[],aliases:[]},wo={};function Ad(n){return wo[n]||gk}function _k(n,t,e=[]){const s={...Tl(n),name:t,intervals:n,aliases:e};return wo[s.name]=s,wo[s.setNum]=s,wo[s.chroma]=s,s.aliases.forEach(r=>vk(s,r)),s}function vk(n,t){wo[t]=n}mk.forEach(([n,t,...e])=>_k(n.split(" "),t,e));var yk="C C# D D# E F F# G G# A A# B".split(" "),bk="C Db D Eb E F Gb G Ab A Bb B".split(" ");function wk(n,t={}){if(isNaN(n)||n===-1/0||n===1/0)return"";n=Math.round(n);const e=(t.sharps===!0?yk:bk)[n%12];if(t.pitchClass)return e;const s=Math.floor(n/12)-1;return e+s}var Tk=n=>n.name,Sk=n=>n.map(ke).filter(t=>!t.empty),xk=ke,Jp=n=>xk(n).pc,ov=(n,t)=>n.height-t.height;function Mk(n,t){return t=t||ov,Sk(n).sort(t).map(Tk)}function Ck(n){return Mk(n,ov).filter((t,e,s)=>e===0||t!==s[e-1])}var Nd=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Qp={...Vr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Ek=Nd.map(Ak),oh={};Ek.forEach(n=>{oh[n.name]=n,n.aliases.forEach(t=>{oh[t]=n})});function av(n){return typeof n=="string"?oh[n.toLowerCase()]||Qp:n&&n.name?av(n.name):Qp}function Ak(n){const[t,e,s,r,i,o,a]=n,c=a?[a]:[],l=Number(e).toString(2);return{empty:!1,intervals:Ad(r).intervals,modeNum:t,chroma:l,normalized:l,name:r,setNum:e,alt:s,triad:i,seventh:o,aliases:c}}function cv(n){return(t,e)=>{const s=av(t);if(s.empty)return[];const r=wl(s.modeNum,n),i=s.intervals.map(o=>nv(e,o));return r.map((o,a)=>i[a]+o)}}cv(Nd.map(n=>n[4]));cv(Nd.map(n=>n[5]));var Nk={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function kk(n){if(typeof n!="string")return["",""];const t=n.indexOf(" "),e=ke(n.substring(0,t));if(e.empty){const r=ke(n);return r.empty?["",n]:[r.name,""]}const s=n.substring(e.name.length+1).toLowerCase();return[e.name,s.length?s:""]}function Ok(n){const t=Array.isArray(n)?n:kk(n),e=ke(t[0]).name,s=Ad(t[1]);if(s.empty)return Nk;const r=s.name,i=e?s.intervals.map(a=>nv(e,a)):[],o=e?e+" "+r:r;return{...s,name:o,type:r,tonic:e,notes:i}}function Ik(n){const t=n.map(r=>ke(r).pc).filter(r=>r),e=t[0],s=Ck(t);return wl(s.indexOf(e),s)}var Pk=function(n,t,e,s){var r=e?e.call(s,n,t):void 0;if(r!==void 0)return!!r;if(n===t)return!0;if(typeof n!="object"||!n||typeof t!="object"||!t)return!1;var i=Object.keys(n),o=Object.keys(t);if(i.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<i.length;c++){var l=i[c];if(!a(l))return!1;var u=n[l],h=t[l];if(r=e?e.call(s,u,h,l):void 0,r===!1||r===void 0&&u!==h)return!1}return!0};const Rk=W0(Pk);var Dk=function(n,t,e,s,r,i,o,a){if(!n){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,s,r,i,o,a],u=0;c=new Error(t.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Vk=Dk;const Fk=W0(Vk);var Lk={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,h||c,d),p=e?e+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new s:delete c._events[l]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},a.prototype.listeners=function(c){var l=e?e+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,d=u.length,f=new Array(d);h<d;h++)f[h]=u[h].fn;return f},a.prototype.listenerCount=function(c){var l=e?e+c:c,u=this._events[l];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,l,u,h,d,f){var p=e?e+c:c;if(!this._events[p])return!1;var m=this._events[p],g=arguments.length,v,w;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,h),!0;case 5:return m.fn.call(m.context,l,u,h,d),!0;case 6:return m.fn.call(m.context,l,u,h,d,f),!0}for(w=1,v=new Array(g-1);w<g;w++)v[w-1]=arguments[w];m.fn.apply(m.context,v)}else{var x=m.length,T;for(w=0;w<x;w++)switch(m[w].once&&this.removeListener(c,m[w].fn,void 0,!0),g){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,l);break;case 3:m[w].fn.call(m[w].context,l,u);break;case 4:m[w].fn.call(m[w].context,l,u,h);break;default:if(!v)for(T=1,v=new Array(g-1);T<g;T++)v[T-1]=arguments[T];m[w].fn.apply(m[w].context,v)}}return!0},a.prototype.on=function(c,l,u){return i(this,c,l,u,!1)},a.prototype.once=function(c,l,u){return i(this,c,l,u,!0)},a.prototype.removeListener=function(c,l,u,h){var d=e?e+c:c;if(!this._events[d])return this;if(!l)return o(this,d),this;var f=this._events[d];if(f.fn)f.fn===l&&(!h||f.once)&&(!u||f.context===u)&&o(this,d);else{for(var p=0,m=[],g=f.length;p<g;p++)(f[p].fn!==l||h&&!f[p].once||u&&f[p].context!==u)&&m.push(f[p]);m.length?this._events[d]=m.length===1?m[0]:m:o(this,d)}return this},a.prototype.removeAllListeners=function(c){var l;return c?(l=e?e+c:c,this._events[l]&&o(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(Lk);var lv=Object.defineProperty,qk=Object.defineProperties,Bk=Object.getOwnPropertyDescriptors,tm=Object.getOwnPropertySymbols,Uk=Object.prototype.hasOwnProperty,jk=Object.prototype.propertyIsEnumerable,em=(n,t,e)=>t in n?lv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Qt=(n,t)=>{for(var e in t||(t={}))Uk.call(t,e)&&em(n,e,t[e]);if(tm)for(var e of tm(t))jk.call(t,e)&&em(n,e,t[e]);return n},$k=(n,t)=>qk(n,Bk(t)),ys=(n,t)=>{for(var e in t)lv(n,e,{get:t[e],enumerable:!0})},uv={};ys(uv,{_1:()=>hv,_2:()=>dv,_3:()=>pv,_4:()=>mv,_5:()=>gv,_6:()=>_v,_7:()=>vv,_8:()=>yv,__1:()=>kd,__2:()=>fv,__3:()=>Wk,__4:()=>Gk,__5:()=>zk,__6:()=>Hk,__7:()=>Yk,__8:()=>Xk,app:()=>_t});function nm(n,t,e){for(var s=new Array(e),r=0,i=t;r<e;)s[r]=n[i],r=r+1|0,i=i+1|0;return s}function _t(n,t){for(;;){var e=t,s=n,r=s.length,i=r===0?1:r,o=e.length,a=i-o|0;if(a===0)return s.apply(null,e);if(a>=0)return function(c,l){return function(u){return _t(c,l.concat([u]))}}(s,e);t=nm(e,i,-a|0),n=s.apply(null,nm(e,0,i))}}function hv(n,t){var e=n.length;if(e===1)return n(t);switch(e){case 1:return n(t);case 2:return function(s){return n(t,s)};case 3:return function(s,r){return n(t,s,r)};case 4:return function(s,r,i){return n(t,s,r,i)};case 5:return function(s,r,i,o){return n(t,s,r,i,o)};case 6:return function(s,r,i,o,a){return n(t,s,r,i,o,a)};case 7:return function(s,r,i,o,a,c){return n(t,s,r,i,o,a,c)};default:return _t(n,[t])}}function kd(n){var t=n.length;return t===1?n:function(e){return hv(n,e)}}function dv(n,t,e){var s=n.length;if(s===2)return n(t,e);switch(s){case 1:return _t(n(t),[e]);case 2:return n(t,e);case 3:return function(r){return n(t,e,r)};case 4:return function(r,i){return n(t,e,r,i)};case 5:return function(r,i,o){return n(t,e,r,i,o)};case 6:return function(r,i,o,a){return n(t,e,r,i,o,a)};case 7:return function(r,i,o,a,c){return n(t,e,r,i,o,a,c)};default:return _t(n,[t,e])}}function fv(n){var t=n.length;return t===2?n:function(e,s){return dv(n,e,s)}}function pv(n,t,e,s){var r=n.length;if(r===3)return n(t,e,s);switch(r){case 1:return _t(n(t),[e,s]);case 2:return _t(n(t,e),[s]);case 3:return n(t,e,s);case 4:return function(i){return n(t,e,s,i)};case 5:return function(i,o){return n(t,e,s,i,o)};case 6:return function(i,o,a){return n(t,e,s,i,o,a)};case 7:return function(i,o,a,c){return n(t,e,s,i,o,a,c)};default:return _t(n,[t,e,s])}}function Wk(n){var t=n.length;return t===3?n:function(e,s,r){return pv(n,e,s,r)}}function mv(n,t,e,s,r){var i=n.length;if(i===4)return n(t,e,s,r);switch(i){case 1:return _t(n(t),[e,s,r]);case 2:return _t(n(t,e),[s,r]);case 3:return _t(n(t,e,s),[r]);case 4:return n(t,e,s,r);case 5:return function(o){return n(t,e,s,r,o)};case 6:return function(o,a){return n(t,e,s,r,o,a)};case 7:return function(o,a,c){return n(t,e,s,r,o,a,c)};default:return _t(n,[t,e,s,r])}}function Gk(n){var t=n.length;return t===4?n:function(e,s,r,i){return mv(n,e,s,r,i)}}function gv(n,t,e,s,r,i){var o=n.length;if(o===5)return n(t,e,s,r,i);switch(o){case 1:return _t(n(t),[e,s,r,i]);case 2:return _t(n(t,e),[s,r,i]);case 3:return _t(n(t,e,s),[r,i]);case 4:return _t(n(t,e,s,r),[i]);case 5:return n(t,e,s,r,i);case 6:return function(a){return n(t,e,s,r,i,a)};case 7:return function(a,c){return n(t,e,s,r,i,a,c)};default:return _t(n,[t,e,s,r,i])}}function zk(n){var t=n.length;return t===5?n:function(e,s,r,i,o){return gv(n,e,s,r,i,o)}}function _v(n,t,e,s,r,i,o){var a=n.length;if(a===6)return n(t,e,s,r,i,o);switch(a){case 1:return _t(n(t),[e,s,r,i,o]);case 2:return _t(n(t,e),[s,r,i,o]);case 3:return _t(n(t,e,s),[r,i,o]);case 4:return _t(n(t,e,s,r),[i,o]);case 5:return _t(n(t,e,s,r,i),[o]);case 6:return n(t,e,s,r,i,o);case 7:return function(c){return n(t,e,s,r,i,o,c)};default:return _t(n,[t,e,s,r,i,o])}}function Hk(n){var t=n.length;return t===6?n:function(e,s,r,i,o,a){return _v(n,e,s,r,i,o,a)}}function vv(n,t,e,s,r,i,o,a){var c=n.length;if(c===7)return n(t,e,s,r,i,o,a);switch(c){case 1:return _t(n(t),[e,s,r,i,o,a]);case 2:return _t(n(t,e),[s,r,i,o,a]);case 3:return _t(n(t,e,s),[r,i,o,a]);case 4:return _t(n(t,e,s,r),[i,o,a]);case 5:return _t(n(t,e,s,r,i),[o,a]);case 6:return _t(n(t,e,s,r,i,o),[a]);case 7:return n(t,e,s,r,i,o,a);default:return _t(n,[t,e,s,r,i,o,a])}}function Yk(n){var t=n.length;return t===7?n:function(e,s,r,i,o,a,c){return vv(n,e,s,r,i,o,a,c)}}function yv(n,t,e,s,r,i,o,a,c){var l=n.length;if(l===8)return n(t,e,s,r,i,o,a,c);switch(l){case 1:return _t(n(t),[e,s,r,i,o,a,c]);case 2:return _t(n(t,e),[s,r,i,o,a,c]);case 3:return _t(n(t,e,s),[r,i,o,a,c]);case 4:return _t(n(t,e,s,r),[i,o,a,c]);case 5:return _t(n(t,e,s,r,i),[o,a,c]);case 6:return _t(n(t,e,s,r,i,o),[a,c]);case 7:return _t(n(t,e,s,r,i,o,a),[c]);default:return _t(n,[t,e,s,r,i,o,a,c])}}function Xk(n){var t=n.length;return t===8?n:function(e,s,r,i,o,a,c,l){return yv(n,e,s,r,i,o,a,c,l)}}var bv={};ys(bv,{$$Map:()=>_O,$$Set:()=>vO,RenderDelegate:()=>yO,mount:()=>Nv,renderWithDelegate:()=>bO,stepGarbageCollector:()=>wO,visit:()=>kv});var wv={};ys(wv,{create:()=>Ev,isNode:()=>mO,shallowCopy:()=>Av,symbol:()=>Od});function sm(n){var t=typeof n;return t==="undefined"?3:n===null?2:t==="number"?{TAG:0,_0:n}:t==="bigint"?{TAG:5,_0:n}:t==="string"?{TAG:1,_0:n}:t==="boolean"?n===!0?1:0:t==="symbol"?{TAG:4,_0:n}:t==="function"?{TAG:2,_0:n}:{TAG:3,_0:n}}function Zk(n,t){switch(t){case 0:return typeof n>"u";case 1:return n===null;case 2:return typeof n=="boolean";case 3:return typeof n=="number";case 4:return typeof n=="string";case 5:return typeof n=="function";case 6:return typeof n=="object";case 7:return typeof n=="symbol";case 8:return typeof n=="bigint"}}function Kk(n){return n===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:n!==null&&n.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:n.BS_PRIVATE_NESTED_SOME_NONE+1|0}:n}function Jk(n){if(!(n!==null&&n.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return n;var t=n.BS_PRIVATE_NESTED_SOME_NONE;if(t!==0)return{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}function Qk(n,t){return{hd:t,tl:n}}function tO(n,t){for(;;){var e=t,s=n;if(!s)return e;var r={hd:s.hd,tl:0};e.tl=r,t=r,n=s.tl}}function eO(n,t,e){for(;;){var s=t,r=n;if(!r)return;var i={hd:e(r.hd),tl:0};s.tl=i,t=i,n=r.tl}}function nO(n,t,e,s){for(;;){var r=s,i=e,o=t;if(!i)return;var a={hd:n(o,i.hd),tl:0};r.tl=a,s=a,e=i.tl,t=o+1|0}}function sO(n,t){if(!n)return t;var e={hd:n.hd,tl:0};return tO(n.tl,e).tl=t,e}function rO(n,t){if(!n)return 0;var e={hd:t(n.hd),tl:0};return eO(n.tl,e,t),e}function Tv(n,t){return rO(n,kd(t))}function iO(n,t){if(!n)return 0;var e={hd:t(0,n.hd),tl:0};return nO(t,1,n.tl,e),e}function oO(n,t){return iO(n,fv(t))}function Sv(n){for(var t=n,e=0;;){var s=e,r=t;if(!r)return s;e=s+1|0,t=r.tl}}function aO(n,t,e){for(;;){var s=e,r=t;if(!s)return;n[r]=s.hd,e=s.tl,t=r+1|0}}function xv(n){for(var t=n.length-1|0,e=0;;){var s=e,r=t;if(r<0)return s;e={hd:n[r],tl:s},t=r-1|0}}function cO(n){var t=Sv(n),e=new Array(t);return aO(e,0,n),e}function lO(n,t){for(;;){var e=n;if(!e)return;t(e.hd),n=e.tl}}function Mv(n,t){lO(n,kd(t))}function uO(n,t,e){for(;;){var s=t,r=n;if(!r)return s;t=e(s,r.hd),n=r.tl}}function hO(n,t,e,s){for(let r in s)if(s.hasOwnProperty(r)){const i=s[r];(!e.hasOwnProperty(r)||!Rk(e[r],i))&&((typeof i>"u"||i===null||typeof i=="number"&&isNaN(i)||typeof i=="number"&&!isFinite(i))&&console.warn(`Warning: applying a potentially erroneous property value. ${r}: ${i}`),n.setProperty(t,r,i),e[r]=i)}}function dO(n,t){if(t in n)return Kk(n[t])}function fO(n){if(n!==void 0)return Jk(n);throw new Error("getExn")}function rm(n,t,e,s){hO(n,t,e,s)}function Cv(n,t){return Math.imul(n^t,16777619)}function pu(n,t){for(var e=n,s=0,r=t.length;s<=r;++s)e=Cv(e,t.charCodeAt(s)|0);return e}function pO(n,t,e){var s=pu(-2128831035,n),r=dO(t,"key"),i=r!==void 0&&Zk(r,4)?pu(s,r):pu(s,fO(JSON.stringify(t)));return uO(e,i,Cv)&2147483647}var Od="__ELEM_NODE__";function Ev(n,t,e){var s=xv(e),r=Tv(s,function(i){return i.hash});return{symbol:Od,hash:pO(n,t,r),kind:n,props:t,children:s}}function mO(n){var t=sm(n);if(typeof t=="number"||t.TAG!==3)return!1;var e=sm(n.symbol);return typeof e=="number"||e.TAG!==1?!1:e._0===Od}function Av(n){return{symbol:n.symbol,hash:n.hash,kind:n.kind,props:Object.assign({},n.props),generation:{contents:0}}}function gO(n){return Array.from(n.values())}var _O={valuesArray:gO},vO={},yO={};function Nv(n,t){var e=n.getNodeMap();if(e.has(t.hash)){var s=e.get(t.hash);rm(n,s.hash,s.props,t.props),s.generation.contents=0;return}n.createNode(t.hash,t.kind),rm(n,t.hash,{},t.props),Mv(t.children,function(r){n.appendChild(t.hash,r.hash)}),e.set(t.hash,Av(t))}function kv(n,t,e){for(;;){var s=e,r=function(a){t.add(a.hash)};if(!s)return;var i=s.tl,o=s.hd;if(t.has(o.hash)){e=i;continue}r(o),Nv(n,o),e=sO(o.children,i)}}function bO(n,t){var e=new Set,s=oO(xv(t),function(r,i){return Ev("root",{channel:r},[i])});kv(n,e,s),n.activateRoots(cO(Tv(s,function(r){return r.hash}))),n.commitUpdates()}function wO(n){var t=n.getNodeMap(),e=n.getTerminalGeneration(),s=Array.from(t.values()).reduce(function(r,i){return i.generation.contents=i.generation.contents+1|0,i.generation.contents>=e?(n.deleteNode(i.hash),Qk(r,i)):r},0);if(Sv(s)>0)return n.commitUpdates(),Mv(s,function(r){t.delete(r.hash)})}var TO=bv;TO.stepGarbageCollector;var SO=uv,Id=wv,Ov=function(n,t,e){return SO._3(Id.create,n,t,e)},xO=Id.isNode;Id.shallowCopy;function I(n){return typeof n=="number"?Ov("const",{value:n},[]):(Fk(et(n),`Whoops, expecting a Node type here! Got: ${typeof n}`),n)}function et(n){return xO(n)}function B(n,t,e){return Ov(n,t,e.map(I))}var $r={};ys($r,{accum:()=>AO,biquad:()=>t2,capture:()=>a2,constant:()=>Iv,convolve:()=>LO,counter:()=>EO,delay:()=>YO,env:()=>zO,fft:()=>o2,latch:()=>OO,maxhold:()=>IO,meter:()=>s2,metro:()=>DO,mm1p:()=>KO,once:()=>PO,phasor:()=>NO,pole:()=>GO,prewarp:()=>ZO,rand:()=>RO,sample:()=>VO,sampleseq:()=>$O,sampleseq2:()=>WO,scope:()=>i2,sdelay:()=>XO,seq:()=>qO,seq2:()=>BO,snapshot:()=>r2,sparseq:()=>UO,sparseq2:()=>jO,sr:()=>MO,svf:()=>JO,svfshelf:()=>QO,syncphasor:()=>kO,table:()=>FO,tapIn:()=>e2,tapOut:()=>n2,time:()=>CO,z:()=>HO});function Iv(n){return B("const",n,[])}function MO(){return B("sr",{},[])}function CO(){return B("time",{},[])}function EO(n,t){return typeof n=="number"||et(n)?B("counter",{},[I(n)]):B("counter",n,[I(t)])}function AO(n,t,e){return typeof n=="number"||et(n)?B("accum",{},[I(n),I(t)]):B("accum",n,[I(t),I(e)])}function NO(n,t){return typeof n=="number"||et(n)?B("phasor",{},[I(n)]):B("phasor",n,[I(t)])}function kO(n,t,e){return typeof n=="number"||et(n)?B("sphasor",{},[I(n),I(t)]):B("sphasor",n,[I(t),I(e)])}function OO(n,t,e){return typeof n=="number"||et(n)?B("latch",{},[I(n),I(t)]):B("latch",n,[I(t),I(e)])}function IO(n,t,e){return typeof n=="number"||et(n)?B("maxhold",{},[I(n),I(t)]):B("maxhold",n,[I(t),I(e)])}function PO(n,t){return typeof n=="number"||et(n)?B("once",{},[I(n)]):B("once",n,[I(t)])}function RO(n){return typeof n<"u"?B("rand",n,[]):B("rand",{},[])}function DO(n){return typeof n<"u"?B("metro",n,[]):B("metro",{},[])}function VO(n,t,e){return B("sample",n,[I(t),I(e)])}function FO(n,t){return B("table",n,[I(t)])}function LO(n,t){return B("convolve",n,[I(t)])}function qO(n,t,e){return B("seq",n,[I(t),I(e)])}function BO(n,t,e){return B("seq2",n,[I(t),I(e)])}function UO(n,t,e){return B("sparseq",n,[I(t),I(e)])}function jO(n,t){return B("sparseq2",n,[I(t)])}function $O(n,t){return B("sampleseq",n,[I(t)])}function WO(n,t){return B("sampleseq2",n,[I(t)])}function GO(n,t,e){return typeof n=="number"||et(n)?B("pole",{},[I(n),I(t)]):B("pole",n,[I(t),I(e)])}function zO(n,t,e,s){return typeof n=="number"||et(n)?B("env",{},[I(n),I(t),I(e)]):B("env",n,[I(t),I(e),I(s)])}function HO(n,t){return typeof n=="number"||et(n)?B("z",{},[I(n)]):B("z",n,[I(t)])}function YO(n,t,e,s){return typeof n=="number"||et(n)?B("delay",{},[I(n),I(t),I(e)]):B("delay",n,[I(t),I(e),I(s)])}function XO(n,t){return B("sdelay",n,[I(t)])}function ZO(n){return B("prewarp",{},[n])}function KO(n,t,e){return typeof n=="number"||et(n)?B("mm1p",{},[I(n),I(t)]):B("mm1p",n,[I(t),I(e)])}function JO(n,t,e,s){return typeof n=="number"||et(n)?B("svf",{},[I(n),I(t),I(e)]):B("svf",n,[I(t),I(e),I(s)])}function QO(n,t,e,s,r){return typeof n=="number"||et(n)?B("svfshelf",{},[I(n),I(t),I(e),I(s)]):B("svfshelf",n,[I(t),I(e),I(s),I(r)])}function t2(n,t,e,s,r,i,o){return typeof n=="number"||et(n)?B("biquad",{},[I(n),I(t),I(e),I(s),I(r),I(i)]):B("biquad",n,[I(t),I(e),I(s),I(r),I(i),I(o)])}function e2(n){return B("tapIn",n,[])}function n2(n,t){return B("tapOut",n,[I(t)])}function s2(n,t){return typeof n=="number"||et(n)?B("meter",{},[I(n)]):B("meter",n,[I(t)])}function r2(n,t,e){return typeof n=="number"||et(n)?B("snapshot",{},[I(n),I(t)]):B("snapshot",n,[I(t),I(e)])}function i2(n,...t){return typeof n=="number"||et(n)?B("scope",{},[n,...t].map(I)):B("scope",n,t.map(I))}function o2(n,t){return typeof n=="number"||et(n)?B("fft",{},[I(n)]):B("fft",n,[I(t)])}function a2(n,t,e){return typeof n=="number"||et(n)?B("capture",{},[I(n),I(t)]):B("capture",n,[I(t),I(e)])}var Pv={};ys(Pv,{compress:()=>j2,skcompress:()=>$2});var Wr={};ys(Wr,{abs:()=>w2,add:()=>k2,and:()=>A2,asinh:()=>d2,ceil:()=>g2,cos:()=>l2,div:()=>P2,eq:()=>E2,exp:()=>b2,floor:()=>_2,ge:()=>x2,geq:()=>M2,identity:()=>Rv,le:()=>T2,leq:()=>S2,ln:()=>f2,log:()=>p2,log2:()=>m2,max:()=>V2,min:()=>D2,mod:()=>R2,mul:()=>I2,or:()=>N2,pow:()=>C2,round:()=>v2,sin:()=>c2,sqrt:()=>y2,sub:()=>O2,tan:()=>u2,tanh:()=>h2});function Rv(n,t){return typeof n=="number"||et(n)?B("in",{},[I(n)]):typeof t=="number"||et(t)?B("in",n,[I(t)]):B("in",n,[])}function c2(n,t){return typeof n=="number"||et(n)?B("sin",{},[I(n)]):B("sin",n,[I(t)])}function l2(n,t){return typeof n=="number"||et(n)?B("cos",{},[I(n)]):B("cos",n,[I(t)])}function u2(n,t){return typeof n=="number"||et(n)?B("tan",{},[I(n)]):B("tan",n,[I(t)])}function h2(n,t){return typeof n=="number"||et(n)?B("tanh",{},[I(n)]):B("tanh",n,[I(t)])}function d2(n,t){return typeof n=="number"||et(n)?B("asinh",{},[I(n)]):B("asinh",n,[I(t)])}function f2(n,t){return typeof n=="number"||et(n)?B("ln",{},[I(n)]):B("ln",n,[I(t)])}function p2(n,t){return typeof n=="number"||et(n)?B("log",{},[I(n)]):B("log",n,[I(t)])}function m2(n,t){return typeof n=="number"||et(n)?B("log2",{},[I(n)]):B("log2",n,[I(t)])}function g2(n,t){return typeof n=="number"||et(n)?B("ceil",{},[I(n)]):B("ceil",n,[I(t)])}function _2(n,t){return typeof n=="number"||et(n)?B("floor",{},[I(n)]):B("floor",n,[I(t)])}function v2(n,t){return typeof n=="number"||et(n)?B("round",{},[I(n)]):B("round",n,[I(t)])}function y2(n,t){return typeof n=="number"||et(n)?B("sqrt",{},[I(n)]):B("sqrt",n,[I(t)])}function b2(n,t){return typeof n=="number"||et(n)?B("exp",{},[I(n)]):B("exp",n,[I(t)])}function w2(n,t){return typeof n=="number"||et(n)?B("abs",{},[I(n)]):B("abs",n,[I(t)])}function T2(n,t,e){return typeof n=="number"||et(n)?B("le",{},[I(n),I(t)]):B("le",n,[I(t),I(e)])}function S2(n,t,e){return typeof n=="number"||et(n)?B("leq",{},[I(n),I(t)]):B("leq",n,[I(t),I(e)])}function x2(n,t,e){return typeof n=="number"||et(n)?B("ge",{},[I(n),I(t)]):B("ge",n,[I(t),I(e)])}function M2(n,t,e){return typeof n=="number"||et(n)?B("geq",{},[I(n),I(t)]):B("geq",n,[I(t),I(e)])}function C2(n,t,e){return typeof n=="number"||et(n)?B("pow",{},[I(n),I(t)]):B("pow",n,[I(t),I(e)])}function E2(n,t,e){return typeof n=="number"||et(n)?B("eq",{},[I(n),I(t)]):B("eq",n,[I(t),I(e)])}function A2(n,t,e){return typeof n=="number"||et(n)?B("and",{},[I(n),I(t)]):B("and",n,[I(t),I(e)])}function N2(n,t,e){return typeof n=="number"||et(n)?B("or",{},[I(n),I(t)]):B("or",n,[I(t),I(e)])}function k2(n,...t){return typeof n=="number"||et(n)?B("add",{},[n,...t].map(I)):B("add",n,t.map(I))}function O2(n,...t){return typeof n=="number"||et(n)?B("sub",{},[n,...t].map(I)):B("sub",n,t.map(I))}function I2(n,...t){return typeof n=="number"||et(n)?B("mul",{},[n,...t].map(I)):B("mul",n,t.map(I))}function P2(n,...t){return typeof n=="number"||et(n)?B("div",{},[n,...t].map(I)):B("div",n,t.map(I))}function R2(n,...t){return typeof n=="number"||et(n)?B("mod",{},[n,...t].map(I)):B("mod",n,t.map(I))}function D2(n,...t){return typeof n=="number"||et(n)?B("min",{},[n,...t].map(I)):B("min",n,t.map(I))}function V2(n,...t){return typeof n=="number"||et(n)?B("max",{},[n,...t].map(I)):B("max",n,t.map(I))}var ia={};ys(ia,{db2gain:()=>q2,gain2db:()=>B2,hann:()=>U2,ms2samps:()=>F2,select:()=>Dv,tau2pole:()=>L2});var ie=Qt(Qt({},$r),Wr);function F2(n){return ie.mul(ie.sr(),ie.div(n,1e3))}function L2(n){return ie.exp(ie.div(-1,ie.mul(n,ie.sr())))}function q2(n){return ie.pow(10,ie.mul(n,1/20))}function B2(n){return Dv(ie.ge(n,0),ie.max(-120,ie.mul(20,ie.log(n))),-120)}function Dv(n,t,e){return ie.add(ie.mul(n,t),ie.mul(ie.sub(1,n),e))}function U2(n){return ie.mul(.5,ie.sub(1,ie.cos(ie.mul(2*Math.PI,n))))}var pt=Qt(Qt(Qt({},$r),Wr),ia);function j2(n,t,e,s,r,i){const o=pt.env(pt.tau2pole(pt.mul(.001,n)),pt.tau2pole(pt.mul(.001,t)),r),a=pt.gain2db(o),c=pt.sub(1,pt.div(1,s)),l=pt.mul(c,pt.sub(e,a)),u=pt.min(0,l),h=pt.db2gain(u);return pt.mul(i,h)}function $2(n,t,e,s,r,i,o){const a=pt.env(pt.tau2pole(pt.mul(.001,n)),pt.tau2pole(pt.mul(.001,t)),i),c=pt.gain2db(a),l=pt.sub(e,pt.div(r,2)),u=pt.add(e,pt.div(r,2)),h=pt.and(pt.geq(c,l),pt.leq(c,u)),d=pt.sub(1,pt.div(1,s)),f=pt.select(h,pt.mul(pt.div(d,2),pt.mul(pt.div(pt.sub(c,l),r),pt.sub(l,c))),pt.mul(d,pt.sub(e,c))),p=pt.min(0,f),m=pt.db2gain(p);return pt.mul(o,m)}var Vv={};ys(Vv,{adsr:()=>nI});var Ml={};ys(Ml,{allpass:()=>K2,bandpass:()=>X2,dcblock:()=>G2,df11:()=>z2,highpass:()=>Y2,highshelf:()=>tI,lowpass:()=>H2,lowshelf:()=>Q2,notch:()=>Z2,peak:()=>J2,pink:()=>eI,sm:()=>W2,smooth:()=>ah,zero:()=>Pd});var dt=Qt(Qt(Qt({},$r),Wr),ia);function ah(n,t,e){return typeof n=="number"||et(n)?dt.pole(n,dt.mul(dt.sub(1,n),t)):dt.pole(n,t,dt.mul(dt.sub(1,t),e))}function W2(n,t){return typeof n=="number"||et(n)?ah(dt.tau2pole(.02),n):ah(n,dt.tau2pole(.02),t)}function Pd(n,t,e,s){let[r,i,o]=typeof n=="number"||et(n)?[n,t,e]:[t,e,s];return dt.sub(dt.mul(r,o),dt.mul(i,dt.z(o)))}function G2(n,t){let e=typeof n=="number"||et(n)?n:t;return dt.pole(.995,Pd(1,1,e))}function z2(n,t,e,s,r){let[i,o,a,c]=typeof n=="number"||et(n)?[n,t,e,s]:[t,e,s,r];return dt.pole(a,Pd(i,o,c))}function H2(n,t,e,s){return typeof n=="number"||et(n)?dt.svf({mode:"lowpass"},n,t,e):dt.svf(Object.assign({},n,{mode:"lowpass"}),t,e,s)}function Y2(n,t,e,s){return typeof n=="number"||et(n)?dt.svf({mode:"highpass"},n,t,e):dt.svf(Object.assign({},n,{mode:"highpass"}),t,e,s)}function X2(n,t,e,s){return typeof n=="number"||et(n)?dt.svf({mode:"bandpass"},n,t,e):dt.svf(Object.assign({},n,{mode:"bandpass"}),t,e,s)}function Z2(n,t,e,s){return typeof n=="number"||et(n)?dt.svf({mode:"notch"},n,t,e):dt.svf(Object.assign({},n,{mode:"notch"}),t,e,s)}function K2(n,t,e,s){return typeof n=="number"||et(n)?dt.svf({mode:"allpass"},n,t,e):dt.svf(Object.assign({},n,{mode:"allpass"}),t,e,s)}function J2(n,t,e,s,r){return typeof n=="number"||et(n)?dt.svfshelf({mode:"peak"},n,t,e,s):dt.svfshelf(Object.assign({},n,{mode:"peak"}),t,e,s,r)}function Q2(n,t,e,s,r){return typeof n=="number"||et(n)?dt.svfshelf({mode:"lowshelf"},n,t,e,s):dt.svfshelf(Object.assign({},n,{mode:"lowshelf"}),t,e,s,r)}function tI(n,t,e,s,r){return typeof n=="number"||et(n)?dt.svfshelf({mode:"highshelf"},n,t,e,s):dt.svfshelf(Object.assign({},n,{mode:"highshelf"}),t,e,s,r)}function eI(n,t){let e=typeof n=="number"||et(n)?n:t;return((s,r,i)=>dt.min(r,dt.max(s,i)))(-1,1,dt.mul(dt.db2gain(-30),dt.add(dt.pole(.99765,dt.mul(e,.099046)),dt.pole(.963,dt.mul(e,.2965164)),dt.pole(.57,dt.mul(e,1.0526913)),dt.mul(.1848,e))))}var Rn=Qt(Qt(Qt(Qt({},$r),Wr),Ml),ia);function nI(n,t,e,s,r,i){let o=typeof n=="number"||et(n)?[n,t,e,s,r]:[t,e,s,r,i],[a,c,l,u,h]=o,d=Rn.mul(a,Rn.sr()),f=Rn.le(Rn.counter(h),d),p=Rn.select(h,Rn.select(f,1,l),0),m=Rn.select(h,Rn.select(f,a,c),u),g=Rn.tau2pole(Rn.div(m,6.91));return Rn.smooth(g,p)}var Fv={};ys(Fv,{blepsaw:()=>oI,blepsquare:()=>aI,bleptriangle:()=>cI,cycle:()=>sI,noise:()=>uh,pinknoise:()=>lI,saw:()=>lh,square:()=>rI,train:()=>ch,triangle:()=>iI});var St=Qt(Qt(Qt({},$r),Wr),Ml);function ch(n,t){return typeof n=="number"||et(n)?St.le(St.phasor(n,0),.5):St.le(St.phasor(n,t,0),.5)}function sI(n,t){return typeof n=="number"||et(n)?St.sin(St.mul(2*Math.PI,St.phasor(n,0))):St.sin(St.mul(2*Math.PI,St.phasor(n,t,0)))}function lh(n,t){return typeof n=="number"||et(n)?St.sub(St.mul(2,St.phasor(n,0)),1):St.sub(St.mul(2,St.phasor(n,t,0)),1)}function rI(n,t){return typeof n=="number"||et(n)?St.sub(St.mul(2,ch(n)),1):St.sub(St.mul(2,ch(n,t)),1)}function iI(n,t){return typeof n=="number"||et(n)?St.mul(2,St.sub(.5,St.abs(lh(n)))):St.mul(2,St.sub(.5,St.abs(lh(n,t))))}function oI(n,t){let e=typeof n=="number"||et(n)?n:t;return B("blepsaw",{},[e])}function aI(n,t){let e=typeof n=="number"||et(n)?n:t;return B("blepsquare",{},[e])}function cI(n,t){let e=typeof n=="number"||et(n)?n:t;return B("bleptriangle",{},[e])}function uh(n){return typeof n>"u"?St.sub(St.mul(2,St.rand()),1):St.sub(St.mul(2,St.rand(n)),1)}function lI(n){return typeof n>"u"?St.pink(uh()):St.pink(uh(n))}$k(Qt(Qt(Qt(Qt(Qt(Qt(Qt({},$r),Pv),Vv),Ml),Wr),Fv),ia),{const:Iv,in:Rv});function Tc(n){return Ih()?(ng(n),!0):!1}function Fn(n){return typeof n=="function"?n():vt(n)}const hh=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const uI=Object.prototype.toString,hI=n=>uI.call(n)==="[object Object]",dh=()=>+Date.now(),mu=(n,t,e)=>Math.min(e,Math.max(t,n)),dI=()=>{};function fI(n,t){function e(...s){return new Promise((r,i)=>{Promise.resolve(n(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(i)})}return e}const Lv=n=>n();function pI(n=Lv){const t=ge(!0);function e(){t.value=!1}function s(){t.value=!0}const r=(...i)=>{t.value&&n(...i)};return{isActive:qi(t),pause:e,resume:s,eventFilter:r}}function mI(n){return Xc()}function gI(n,t,e={}){const{eventFilter:s=Lv,...r}=e;return de(n,fI(s,t),r)}function _I(n,t,e={}){const{eventFilter:s,...r}=e,{eventFilter:i,pause:o,resume:a,isActive:c}=pI(s);return{stop:gI(n,t,{...r,eventFilter:i}),pause:o,resume:a,isActive:c}}function vI(n,t=!0,e){mI()?zc(n,e):t?n():Bi(n)}function yI(n,t=1e3,e={}){const{immediate:s=!0,immediateCallback:r=!1}=e;let i=null;const o=ge(!1);function a(){i&&(clearInterval(i),i=null)}function c(){o.value=!1,a()}function l(){const u=Fn(t);u<=0||(o.value=!0,r&&n(),a(),i=setInterval(n,u))}if(s&&hh&&l(),Ae(t)||typeof t=="function"){const u=de(t,()=>{o.value&&hh&&l()});Tc(u)}return Tc(c),{isActive:o,pause:c,resume:l}}function bI(n,t={}){var e;const s=ge((e=t.initialValue)!=null?e:null);return de(n,()=>s.value=dh(),t),s}const Sc=hh?window:void 0;function wI(n){var t;const e=Fn(n);return(t=e==null?void 0:e.$el)!=null?t:e}function im(...n){let t,e,s,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,s,r]=n,t=Sc):[t,e,s,r]=n,!t)return dI;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,h,d,f)=>(u.addEventListener(h,d,f),()=>u.removeEventListener(h,d,f)),c=de(()=>[wI(t),Fn(r)],([u,h])=>{if(o(),!u)return;const d=hI(h)?{...h}:h;i.push(...e.flatMap(f=>s.map(p=>a(u,f,p,d))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return Tc(l),l}function TI(n,t={}){const{immediate:e=!0,fpsLimit:s=void 0,window:r=Sc}=t,i=ge(!1),o=s?1e3/s:null;let a=0,c=null;function l(d){if(!i.value||!r)return;a||(a=d);const f=d-a;if(o&&f<o){c=r.requestAnimationFrame(l);return}a=d,n({delta:f,timestamp:d}),c=r.requestAnimationFrame(l)}function u(){!i.value&&r&&(i.value=!0,a=0,c=r.requestAnimationFrame(l))}function h(){i.value=!1,c!=null&&r&&(r.cancelAnimationFrame(c),c=null)}return e&&u(),Tc(h),{isActive:qi(i),pause:h,resume:u}}const ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oa="__vueuse_ssr_handlers__",SI=xI();function xI(){return Oa in ka||(ka[Oa]=ka[Oa]||{}),ka[Oa]}function MI(n,t){return SI[n]||t}function CI(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}const EI={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},om="vueuse-storage";function Ne(n,t,e,s={}){var r;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:h=Sc,eventFilter:d,onError:f=E=>{console.error(E)},initOnMounted:p}=s,m=(u?_g:ge)(typeof t=="function"?t():t);if(!e)try{e=MI("getDefaultStorage",()=>{var E;return(E=Sc)==null?void 0:E.localStorage})()}catch(E){f(E)}if(!e)return m;const g=Fn(t),v=CI(g),w=(r=s.serializer)!=null?r:EI[v],{pause:x,resume:T}=_I(m,()=>b(m.value),{flush:i,deep:o,eventFilter:d});h&&a&&vI(()=>{e instanceof Storage?im(h,"storage",S):im(h,om,O),p&&S()}),p||S();function _(E,C){if(h){const k={key:n,oldValue:E,newValue:C,storageArea:e};h.dispatchEvent(e instanceof Storage?new StorageEvent("storage",k):new CustomEvent(om,{detail:k}))}}function b(E){try{const C=e.getItem(n);if(E==null)_(C,null),e.removeItem(n);else{const k=w.write(E);C!==k&&(e.setItem(n,k),_(C,k))}}catch(C){f(C)}}function y(E){const C=E?E.newValue:e.getItem(n);if(C==null)return c&&g!=null&&e.setItem(n,w.write(g)),g;if(!E&&l){const k=w.read(C);return typeof l=="function"?l(k,g):v==="object"&&!Array.isArray(k)?{...g,...k}:k}else return typeof C!="string"?C:w.read(C)}function S(E){if(!(E&&E.storageArea!==e)){if(E&&E.key==null){m.value=g;return}if(!(E&&E.key!==n)){x();try{(E==null?void 0:E.newValue)!==w.write(m.value)&&(m.value=y(E))}catch(C){f(C)}finally{E?Bi(T):T()}}}}function O(E){S(E.detail)}return m}function AI(n={}){const{controls:t=!1,offset:e=0,immediate:s=!0,interval:r="requestAnimationFrame",callback:i}=n,o=ge(dh()+e),a=()=>o.value=dh()+e,c=i?()=>{a(),i(o.value)}:a,l=r==="requestAnimationFrame"?TI(c,{immediate:s}):yI(c,r,{immediate:s});return t?{timestamp:o,...l}:o}const NI=ge(!1),kI=bI(NI),OI=AI();wt(()=>OI.value-kI.value);function Vs(n,t,e){if(typeof n=="function"||Rs(n))return wt(()=>mu(Fn(n),Fn(t),Fn(e)));const s=ge(n);return wt({get(){return s.value=mu(s.value,Fn(t),Fn(e))},set(r){s.value=mu(r,Fn(t),Fn(e))}})}Jt({initiated:!1,mute:Ne("mute",!1),volume:Vs(Ne("main-vol",1),0,2),meter:0});Jt({});Zn({});function II(n=0,t=3,e=440,s="equal"){let r=0;const i=[0,112,204,316,386,498,590,702,814,884,1017,1088];if(s=="equal"&&(r=Number(e*Math.pow(2,t-3+n/12))),s=="just"){let o=Number(Math.pow(Math.pow(2,.0008333333333333334),i[n]));r=Number(e*Math.pow(2,t-4)*o)}return r}function qv(n=0,t=0,e=1,s=1){return t===void 0&&(t=Math.floor(n/12)+4),`hsla(${n%12*30},${e*100}%,${Math.abs(t+2)*8}%,${s})`}function Bv(n,t=440){return 12*(Math.log(Number(n)/t)/Math.log(2))}function Uv(n,t=1){return[...n.slice(t,n.length),...n.slice(0,t)]}var PI={exports:{}};(function(n,t){(function(e,s){n.exports=s()})(Er,function(){const e=(a,c,l,u)=>{const h=(c*l+2*a)/l**3,d=-(2*c*l+3*a)/l**2,f=c,p=a;return h*u**3+d*u**2+f*u+p},s=(a,c,l,u)=>{const h=(c*l+2*a)/l**3,d=-(2*c*l+3*a)/l**2,f=c;return 3*h*u**2+2*d*u+f},r=function(a,c){Object.entries(typeof a=="number"?{value:a}:a).map(([l,u])=>c(u,l))};function i(a,c){this.start=new Date/1e3,this.time=c,this.from=a,this.current=a,this.to=a,this.speed=0}i.prototype.get=function(a){const c=a/1e3-this.start;if(c<0)throw new Error("Cannot read in the past");return c>=this.time?this.to:this.to-e(this.to-this.from,this.speed,this.time,c)},i.prototype.getSpeed=function(a){const c=a/1e3-this.start;return c>=this.time?0:s(this.to-this.from,this.speed,this.time,c)},i.prototype.set=function(a,c){const l=new Date,u=this.get(l);return this.speed=this.getSpeed(l),this.start=l/1e3,this.from=u,this.to=a,c&&(this.time=c),u};function o(a,c=300){return typeof a=="number"&&(a={value:a}),r(a,(l,u)=>{const h=new i(l,c/1e3);Object.defineProperty(a,"_"+u,{value:h}),Object.defineProperty(a,"$"+u,{get:()=>h.to}),Object.defineProperty(a,u,{get:()=>h.get(new Date),set:d=>h.set(d),enumerable:!0})}),Object.defineProperty(a,"get",{get:()=>function(l="value",u=new Date){return this["_"+l].get(u)}}),Object.defineProperty(a,"set",{get:()=>function(l,u=0){r(l,(h,d)=>{this["_"+d].set(h,u/1e3)})}}),a}return o})})(PI);const RI="global-midi-channel",DI="global-midi-filter",VI=Jt({enabled:!1,initiated:!1,playing:!1,stopped:!1,out:!0,channel:Ne(RI,1),note:{pitch:0,channel:1,velocity:0},offset:Vs(0,-3,3),keyboard:!0,cc:{},ccLearn:{},filter:Ne(DI,{}),monoAftertouch:{},polyAftertouch:{},pitchbend:{}}),FI=Jt({});Zn({});const LI=Zn({});ge(null);ge(0);Zn([]);Zn({});wt(()=>Object.keys(LI).length>0);const Rd=wt(()=>Object.values(FI).reduce((n,t)=>({...n,...t.activeNotes}),{}));wt(()=>{const n=new Array(12).fill(0);return Object.keys(Rd.value).forEach(t=>{const e=(Number(t)-9)%12;n[e]=1}),n.join("")});wt(()=>{const n=Object.keys(Rd.value).map(t=>wk(Number(t),{sharps:!0}));return n.length>2?ok(n):[]});wt(()=>{const n=new Array(12).fill(0);return Object.keys(Rd.value).forEach(t=>{const e=(Number(t)-9)%12;n[e]=Number(t)}),n});function am({number:n,channel:t}){const e=ge(0);return de(()=>VI.cc,s=>{(!t||s.channel===t)&&n===s.number&&(e.value=s.value)}),e}const cm={"minor second":[["1P","2m"],["2m"]],"major second":[["1P","2M"],["2M"]],"minor third":[["1P","3m"],["3m"]],"major third":[["1P","3M"],["3M"]],"perfect fourth":[["1P","4P"],["4P"]],tritone:[["1P","5d"],["TT"]],"perfect fifth":[["1P","5P"],["5P"]],"minor sixth":[["1P","6m"],["6m"]],"major sixth":[["1P","6M"],["6M"]],"minor seventh":[["1P","7m"],["7m"]],"major seventh":[["1P","7M"],["7M"]]},jv=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],qI=["G##","A#","A##","B#","C#","C##","D#","D##","E#","F#","F##","G#"],BI=["Bbb","Bb","Cb","Dbb","Db","Ebb","Eb","Fb","Gbb","Gb","Abb","Ab"];[...jv,...qI,...BI];const Cl=jv;for(let n in cm)iv(...cm[n],n);const UI=[...Cl].map((n,t)=>({name:n,pitch:t})),Kr=Jt({tonic:Vs(Ne("global-tonic",0),0,11),note:wt(()=>UI[Kr.tonic]),chroma:Ne("global-chroma","101011010101"),set:wt(()=>Ad(Kr.chroma)),full:wt(()=>{let n=Kr.note.name+"4 "+Kr.set.name;return Ok(n)}),pcs:wt(()=>Ik(Kr.full.notes)),isIn:wt(()=>ZN(Kr.pcs))});[...Cl].map((n,t)=>({name:n,pitch:t}));var jI={grad:.9,turn:360,rad:360/(2*Math.PI)},xs=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Te=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},En=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},$v=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},lm=function(n){return{r:En(n.r,0,255),g:En(n.g,0,255),b:En(n.b,0,255),a:En(n.a)}},gu=function(n){return{r:Te(n.r),g:Te(n.g),b:Te(n.b),a:Te(n.a,3)}},$I=/^#([0-9a-f]{3,8})$/i,Ia=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},Wv=function(n){var t=n.r,e=n.g,s=n.b,r=n.a,i=Math.max(t,e,s),o=i-Math.min(t,e,s),a=o?i===t?(e-s)/o:i===e?2+(s-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:r}},Gv=function(n){var t=n.h,e=n.s,s=n.v,r=n.a;t=t/360*6,e/=100,s/=100;var i=Math.floor(t),o=s*(1-e),a=s*(1-(t-i)*e),c=s*(1-(1-t+i)*e),l=i%6;return{r:255*[s,a,o,o,c,s][l],g:255*[c,s,s,a,o,o][l],b:255*[o,o,c,s,s,a][l],a:r}},um=function(n){return{h:$v(n.h),s:En(n.s,0,100),l:En(n.l,0,100),a:En(n.a)}},hm=function(n){return{h:Te(n.h),s:Te(n.s),l:Te(n.l),a:Te(n.a,3)}},dm=function(n){return Gv((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},To=function(n){return{h:(t=Wv(n)).h,s:(r=(200-(e=t.s))*(s=t.v)/100)>0&&r<200?e*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,s,r},WI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fh={string:[[function(n){var t=$I.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Te(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Te(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=zI.exec(n)||HI.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:lm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=WI.exec(n)||GI.exec(n);if(!t)return null;var e,s,r=um({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(jI[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return dm(r)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,r=n.a,i=r===void 0?1:r;return xs(t)&&xs(e)&&xs(s)?lm({r:Number(t),g:Number(e),b:Number(s),a:Number(i)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,r=n.a,i=r===void 0?1:r;if(!xs(t)||!xs(e)||!xs(s))return null;var o=um({h:Number(t),s:Number(e),l:Number(s),a:Number(i)});return dm(o)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,r=n.a,i=r===void 0?1:r;if(!xs(t)||!xs(e)||!xs(s))return null;var o=function(a){return{h:$v(a.h),s:En(a.s,0,100),v:En(a.v,0,100),a:En(a.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(i)});return Gv(o)},"hsv"]]},fm=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},YI=function(n){return typeof n=="string"?fm(n.trim(),fh.string):typeof n=="object"&&n!==null?fm(n,fh.object):[null,void 0]},_u=function(n,t){var e=To(n);return{h:e.h,s:En(e.s+100*t,0,100),l:e.l,a:e.a}},vu=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},pm=function(n,t){var e=To(n);return{h:e.h,s:e.s,l:En(e.l+100*t,0,100),a:e.a}},ph=function(){function n(t){this.parsed=YI(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Te(vu(this.rgba),2)},n.prototype.isDark=function(){return vu(this.rgba)<.5},n.prototype.isLight=function(){return vu(this.rgba)>=.5},n.prototype.toHex=function(){return t=gu(this.rgba),e=t.r,s=t.g,r=t.b,o=(i=t.a)<1?Ia(Te(255*i)):"","#"+Ia(e)+Ia(s)+Ia(r)+o;var t,e,s,r,i,o},n.prototype.toRgb=function(){return gu(this.rgba)},n.prototype.toRgbString=function(){return t=gu(this.rgba),e=t.r,s=t.g,r=t.b,(i=t.a)<1?"rgba("+e+", "+s+", "+r+", "+i+")":"rgb("+e+", "+s+", "+r+")";var t,e,s,r,i},n.prototype.toHsl=function(){return hm(To(this.rgba))},n.prototype.toHslString=function(){return t=hm(To(this.rgba)),e=t.h,s=t.s,r=t.l,(i=t.a)<1?"hsla("+e+", "+s+"%, "+r+"%, "+i+")":"hsl("+e+", "+s+"%, "+r+"%)";var t,e,s,r,i},n.prototype.toHsv=function(){return t=Wv(this.rgba),{h:Te(t.h),s:Te(t.s),v:Te(t.v),a:Te(t.a,3)};var t},n.prototype.invert=function(){return Dn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),Dn(_u(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),Dn(_u(this.rgba,-t))},n.prototype.grayscale=function(){return Dn(_u(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),Dn(pm(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),Dn(pm(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?Dn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Te(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=To(this.rgba);return typeof t=="number"?Dn({h:t,s:e.s,l:e.l,a:e.a}):Te(e.h)},n.prototype.isEqual=function(t){return this.toHex()===Dn(t).toHex()},n}(),Dn=function(n){return n instanceof ph?n:new ph(n)},mm=[],XI=function(n){n.forEach(function(t){mm.indexOf(t)<0&&(t(ph,fh),mm.push(t))})},ZI={grad:.9,turn:360,rad:360/(2*Math.PI)},yu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ai=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},ks=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},bu=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},wu=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},Dd=96.422,Vd=100,Fd=82.521,KI=function(n){var t,e,s={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:wu(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:wu(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:wu(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:ks(e.r,0,255),g:ks(e.g,0,255),b:ks(e.b,0,255),a:ks(e.a)}},JI=function(n){var t=bu(n.r),e=bu(n.g),s=bu(n.b);return function(r){return{x:ks(r.x,0,Dd),y:ks(r.y,0,Vd),z:ks(r.z,0,Fd),a:ks(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*t+.3575761*e+.1804375*s),y:100*(.2126729*t+.7151522*e+.072175*s),z:100*(.0193339*t+.119192*e+.9503041*s),a:n.a}))},So=216/24389,bi=24389/27,zv=function(n){return{l:ks(n.l,0,100),c:n.c,h:(t=n.h,(t=isFinite(t)?t%360:0)>0?t:t+360),a:n.a};var t},gm=function(n){return{l:ai(n.l,2),c:ai(n.c,2),h:ai(n.h,2),a:ai(n.a,3)}},QI=function(n){var t=n.l,e=n.c,s=n.h,r=n.a,i=r===void 0?1:r;if(!yu(t)||!yu(e)||!yu(s))return null;var o=zv({l:Number(t),c:Number(e),h:Number(s),a:Number(i)});return Hv(o)},_m=function(n){var t=function(i){var o=JI(i),a=o.x/Dd,c=o.y/Vd,l=o.z/Fd;return a=a>So?Math.cbrt(a):(bi*a+16)/116,{l:116*(c=c>So?Math.cbrt(c):(bi*c+16)/116)-16,a:500*(a-c),b:200*(c-(l=l>So?Math.cbrt(l):(bi*l+16)/116)),alpha:o.a}}(n),e=ai(t.a,3),s=ai(t.b,3),r=Math.atan2(s,e)/Math.PI*180;return{l:t.l,c:Math.sqrt(e*e+s*s),h:r<0?r+360:r,a:t.alpha}},Hv=function(n){return t={l:n.l,a:n.c*Math.cos(n.h*Math.PI/180),b:n.c*Math.sin(n.h*Math.PI/180),alpha:n.a},s=t.a/500+(e=(t.l+16)/116),r=e-t.b/200,KI({x:(Math.pow(s,3)>So?Math.pow(s,3):(116*s-16)/bi)*Dd,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/bi)*Vd,z:(Math.pow(r,3)>So?Math.pow(r,3):(116*r-16)/bi)*Fd,a:t.alpha});var t,e,s,r},tP=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eP=function(n){var t=tP.exec(n);if(!t)return null;var e,s,r=zv({l:Number(t[1]),c:Number(t[2]),h:(e=t[3],s=t[4],s===void 0&&(s="deg"),Number(e)*(ZI[s]||1)),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Hv(r)};function nP(n,t){n.prototype.toLch=function(){return gm(_m(this.rgba))},n.prototype.toLchString=function(){return e=gm(_m(this.rgba)),s=e.l,r=e.c,i=e.h,(o=e.a)<1?"lch("+s+"% "+r+" "+i+" / "+o+")":"lch("+s+"% "+r+" "+i+")";var e,s,r,i,o},t.string.push([eP,"lch"]),t.object.push([QI,"lch"])}var ls=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Tu=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Su=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},Ld=96.422,qd=100,Bd=82.521,sP=function(n){var t,e,s={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:Su(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Su(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Su(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:ls(e.r,0,255),g:ls(e.g,0,255),b:ls(e.b,0,255),a:ls(e.a)}},rP=function(n){var t=Tu(n.r),e=Tu(n.g),s=Tu(n.b);return function(r){return{x:ls(r.x,0,Ld),y:ls(r.y,0,qd),z:ls(r.z,0,Bd),a:ls(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*t+.3575761*e+.1804375*s),y:100*(.2126729*t+.7151522*e+.072175*s),z:100*(.0193339*t+.119192*e+.9503041*s),a:n.a}))},xo=216/24389,wi=24389/27,vm=function(n){var t=rP(n),e=t.x/Ld,s=t.y/qd,r=t.z/Bd;return e=e>xo?Math.cbrt(e):(wi*e+16)/116,{l:116*(s=s>xo?Math.cbrt(s):(wi*s+16)/116)-16,a:500*(e-s),b:200*(s-(r=r>xo?Math.cbrt(r):(wi*r+16)/116)),alpha:t.a}},iP=function(n,t,e){var s,r=vm(n),i=vm(t);return function(o){var a=(o.l+16)/116,c=o.a/500+a,l=a-o.b/200;return sP({x:(Math.pow(c,3)>xo?Math.pow(c,3):(116*c-16)/wi)*Ld,y:(o.l>8?Math.pow((o.l+16)/116,3):o.l/wi)*qd,z:(Math.pow(l,3)>xo?Math.pow(l,3):(116*l-16)/wi)*Bd,a:o.alpha})}({l:ls((s={l:r.l*(1-e)+i.l*e,a:r.a*(1-e)+i.a*e,b:r.b*(1-e)+i.b*e,alpha:r.alpha*(1-e)+i.alpha*e}).l,0,400),a:s.a,b:s.b,alpha:ls(s.alpha)})};function oP(n){function t(e,s,r){r===void 0&&(r=5);for(var i=[],o=1/(r-1),a=0;a<=r-1;a++)i.push(e.mix(s,o*a));return i}n.prototype.mix=function(e,s){s===void 0&&(s=.5);var r=e instanceof n?e:new n(e),i=iP(this.toRgb(),r.toRgb(),s);return new n(i)},n.prototype.tints=function(e){return t(this,"#fff",e)},n.prototype.shades=function(e){return t(this,"#000",e)},n.prototype.tones=function(e){return t(this,"#808080",e)}}function aP(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in e)s[e[r]]=r;var i={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=s[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),h=1/0,d="black";if(!i.length)for(var f in e)i[f]=new n(e[f]).toRgb();for(var p in e){var m=(a=u,c=i[p],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));m<h&&(h=m,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":e[a];return c?new n(c).toRgb():null},"name"])}var xu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},co=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},jn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Mu=function(n){var t=n/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Cu=function(n){return 255*(n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n)},Ud=96.422,jd=100,$d=82.521,cP=function(n){var t,e,s={x:.9555766*(t=n).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return e={r:Cu(.032404542*s.x-.015371385*s.y-.004985314*s.z),g:Cu(-.00969266*s.x+.018760108*s.y+41556e-8*s.z),b:Cu(556434e-9*s.x-.002040259*s.y+.010572252*s.z),a:n.a},{r:jn(e.r,0,255),g:jn(e.g,0,255),b:jn(e.b,0,255),a:jn(e.a)}},lP=function(n){var t=Mu(n.r),e=Mu(n.g),s=Mu(n.b);return function(r){return{x:jn(r.x,0,Ud),y:jn(r.y,0,jd),z:jn(r.z,0,$d),a:jn(r.a)}}(function(r){return{x:1.0478112*r.x+.0228866*r.y+-.050127*r.z,y:.0295424*r.x+.9904844*r.y+-.0170491*r.z,z:-.0092345*r.x+.0150436*r.y+.7521316*r.z,a:r.a}}({x:100*(.4124564*t+.3575761*e+.1804375*s),y:100*(.2126729*t+.7151522*e+.072175*s),z:100*(.0193339*t+.119192*e+.9503041*s),a:n.a}))},Mo=216/24389,Ti=24389/27,uP=function(n){var t=n.l,e=n.a,s=n.b,r=n.alpha,i=r===void 0?1:r;if(!xu(t)||!xu(e)||!xu(s))return null;var o=function(a){return{l:jn(a.l,0,400),a:a.a,b:a.b,alpha:jn(a.alpha)}}({l:Number(t),a:Number(e),b:Number(s),alpha:Number(i)});return hP(o)},hP=function(n){var t=(n.l+16)/116,e=n.a/500+t,s=t-n.b/200;return cP({x:(Math.pow(e,3)>Mo?Math.pow(e,3):(116*e-16)/Ti)*Ud,y:(n.l>8?Math.pow((n.l+16)/116,3):n.l/Ti)*jd,z:(Math.pow(s,3)>Mo?Math.pow(s,3):(116*s-16)/Ti)*$d,a:n.alpha})};function dP(n,t){n.prototype.toLab=function(){return s=lP(this.rgba),i=s.y/jd,o=s.z/$d,r=(r=s.x/Ud)>Mo?Math.cbrt(r):(Ti*r+16)/116,e={l:116*(i=i>Mo?Math.cbrt(i):(Ti*i+16)/116)-16,a:500*(r-i),b:200*(i-(o=o>Mo?Math.cbrt(o):(Ti*o+16)/116)),alpha:s.a},{l:co(e.l,2),a:co(e.a,2),b:co(e.b,2),alpha:co(e.alpha,3)};var e,s,r,i,o},n.prototype.delta=function(e){e===void 0&&(e="#FFF");var s=e instanceof n?e:new n(e),r=function(i,o){var a=i.l,c=i.a,l=i.b,u=o.l,h=o.a,d=o.b,f=180/Math.PI,p=Math.PI/180,m=Math.pow(Math.pow(c,2)+Math.pow(l,2),.5),g=Math.pow(Math.pow(h,2)+Math.pow(d,2),.5),v=(a+u)/2,w=Math.pow((m+g)/2,7),x=.5*(1-Math.pow(w/(w+Math.pow(25,7)),.5)),T=c*(1+x),_=h*(1+x),b=Math.pow(Math.pow(T,2)+Math.pow(l,2),.5),y=Math.pow(Math.pow(_,2)+Math.pow(d,2),.5),S=(b+y)/2,O=T===0&&l===0?0:Math.atan2(l,T)*f,E=_===0&&d===0?0:Math.atan2(d,_)*f;O<0&&(O+=360),E<0&&(E+=360);var C=E-O,k=Math.abs(E-O);k>180&&E<=O?C+=360:k>180&&E>O&&(C-=360);var R=O+E;k<=180?R/=2:R=(O+E<360?R+360:R-360)/2;var L=1-.17*Math.cos(p*(R-30))+.24*Math.cos(2*p*R)+.32*Math.cos(p*(3*R+6))-.2*Math.cos(p*(4*R-63)),z=u-a,V=y-b,U=2*Math.sin(p*C/2)*Math.pow(b*y,.5),Z=1+.015*Math.pow(v-50,2)/Math.pow(20+Math.pow(v-50,2),.5),$=1+.045*S,H=1+.015*S*L,K=30*Math.exp(-1*Math.pow((R-275)/25,2)),st=-2*Math.pow(w/(w+Math.pow(25,7)),.5)*Math.sin(2*p*K);return Math.pow(Math.pow(z/1/Z,2)+Math.pow(V/1/$,2)+Math.pow(U/1/H,2)+st*V*U/(1*$*1*H),.5)}(this.toLab(),s.toLab())/100;return jn(co(r,3))},t.object.push([uP,"lab"])}var Pa=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Mn=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},lo=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Yv=function(n){return{c:lo(n.c,0,100),m:lo(n.m,0,100),y:lo(n.y,0,100),k:lo(n.k,0,100),a:lo(n.a)}},ym=function(n){return{c:Mn(n.c,2),m:Mn(n.m,2),y:Mn(n.y,2),k:Mn(n.k,2),a:Mn(n.a,3)}};function Xv(n){return{r:Mn(255*(1-n.c/100)*(1-n.k/100)),g:Mn(255*(1-n.m/100)*(1-n.k/100)),b:Mn(255*(1-n.y/100)*(1-n.k/100)),a:n.a}}function bm(n){var t=1-Math.max(n.r/255,n.g/255,n.b/255),e=(1-n.r/255-t)/(1-t),s=(1-n.g/255-t)/(1-t),r=(1-n.b/255-t)/(1-t);return{c:isNaN(e)?0:Mn(100*e),m:isNaN(s)?0:Mn(100*s),y:isNaN(r)?0:Mn(100*r),k:Mn(100*t),a:n.a}}function fP(n){var t=n.c,e=n.m,s=n.y,r=n.k,i=n.a,o=i===void 0?1:i;return Pa(t)&&Pa(e)&&Pa(s)&&Pa(r)?Xv(Yv({c:Number(t),m:Number(e),y:Number(s),k:Number(r),a:Number(o)})):null}var pP=/^device-cmyk\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mP=function(n){var t=pP.exec(n);return t?Xv(Yv({c:Number(t[1])*(t[2]?1:100),m:Number(t[3])*(t[4]?1:100),y:Number(t[5])*(t[6]?1:100),k:Number(t[7])*(t[8]?1:100),a:t[9]===void 0?1:Number(t[9])/(t[10]?100:1)})):null};function gP(n,t){n.prototype.toCmyk=function(){return ym(bm(this.rgba))},n.prototype.toCmykString=function(){return e=ym(bm(this.rgba)),s=e.c,r=e.m,i=e.y,o=e.k,(a=e.a)<1?"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"% / "+a+")":"device-cmyk("+s+"% "+r+"% "+i+"% "+o+"%)";var e,s,r,i,o,a},t.object.push([fP,"cmyk"]),t.string.push([mP,"cmyk"])}var _P={grad:.9,turn:360,rad:360/(2*Math.PI)},Eu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ra=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Au=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},Zv=function(n){return{h:(t=n.h,(t=isFinite(t)?t%360:0)>0?t:t+360),w:Au(n.w,0,100),b:Au(n.b,0,100),a:Au(n.a)};var t},wm=function(n){return{h:Ra(n.h),w:Ra(n.w),b:Ra(n.b),a:Ra(n.a,3)}},Tm=function(n){return{h:function(t){var e=t.r,s=t.g,r=t.b,i=t.a,o=Math.max(e,s,r),a=o-Math.min(e,s,r),c=a?o===e?(s-r)/a:o===s?2+(r-e)/a:4+(e-s)/a:0;return{h:60*(c<0?c+6:c),s:o?a/o*100:0,v:o/255*100,a:i}}(n).h,w:Math.min(n.r,n.g,n.b)/255*100,b:100-Math.max(n.r,n.g,n.b)/255*100,a:n.a}},Kv=function(n){return function(t){var e=t.h,s=t.s,r=t.v,i=t.a;e=e/360*6,s/=100,r/=100;var o=Math.floor(e),a=r*(1-s),c=r*(1-(e-o)*s),l=r*(1-(1-e+o)*s),u=o%6;return{r:255*[r,c,a,a,l,r][u],g:255*[l,r,r,c,a,a][u],b:255*[a,a,l,r,r,c][u],a:i}}({h:n.h,s:n.b===100?0:100-n.w/(100-n.b)*100,v:100-n.b,a:n.a})},vP=function(n){var t=n.h,e=n.w,s=n.b,r=n.a,i=r===void 0?1:r;if(!Eu(t)||!Eu(e)||!Eu(s))return null;var o=Zv({h:Number(t),w:Number(e),b:Number(s),a:Number(i)});return Kv(o)},yP=/^hwb\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bP=function(n){var t=yP.exec(n);if(!t)return null;var e,s,r=Zv({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(_P[s]||1)),w:Number(t[3]),b:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Kv(r)};function wP(n,t){n.prototype.toHwb=function(){return wm(Tm(this.rgba))},n.prototype.toHwbString=function(){return e=wm(Tm(this.rgba)),s=e.h,r=e.w,i=e.b,(o=e.a)<1?"hwb("+s+" "+r+"% "+i+"% / "+o+")":"hwb("+s+" "+r+"% "+i+"%)";var e,s,r,i,o},t.string.push([bP,"hwb"]),t.object.push([vP,"hwb"])}XI([oP,nP,aP,dP,gP,wP]);const Da=Array(12).fill(!0).map((n,t)=>Dn(qv(t)).toHex()),Co=Jt({default:[...Da],custom:Ne("custom-colors",[...Da]),isDefault:wt(()=>Co.custom.every((n,t)=>n==Da[t])),customize:!1,reset(){Co.custom=[...Da]}});function oa(n=0,t=2,e=1,s=1){t+=Math.floor(n/12);const r=t-2;return Co.custom[n%12]!=Co.default[n%12]?Dn(Co.custom[n%12]).lighten(r*.1).alpha(s).toHex():qv(n,t,e,s)}const TP=Vs(Ne("tempo-bpm",100),10,500),Zs=Jt({initialized:!1,bpm:TP,midiClock:!1,tabSync:Ne("tab-sync",!1),blink:!1,started:!1,playing:!1,stopped:!1,mute:Ne("tempo-mute",!0),volume:Vs(Ne("tempo-volume",.5),0,1),progress:0,position:null,ticks:0,hz:wt(()=>(Zs.bpm/60).toFixed(2)),note:wt(()=>Jp(Fp(Zs.hz).toNote())),tune:wt(()=>Jp(Zs.note)+4),pitch:wt(()=>Bv(Number(Zs.hz))),digit:wt(()=>(Fp(Zs.hz).toMidi()+12*10+3)%12),color:wt(()=>oa(Zs.digit)),set(n){Zs.bpm=Math.round(n+Zs.bpm)}}),De=Jt({timer:null,last:0,diff:0,timeout:2e3,times:[],bpm:null,tap:SP,refresh:Jv});function SP(){let n=performance.now();De.last&&(De.diff=n-De.last,De.times.push(De.diff),Jv()),De.last=n,clearTimeout(De.timer),De.timer=setTimeout(function(){De.times=[De.diff],De.last=null},De.timeout)}function Jv(){if(De.times.length>2){let n=1/(De.times.reduce((t,e)=>t+=e)/De.times.length/1e3)*60;De.bpm=n}}Jt([]);Jt({initiated:!1,open:!1,opened:!1,recording:!0,monitor:!1,meter:0,volume:Vs(Ne("mic-vol",1),0,5),gate:Vs(Ne("mic-gate",-60),-100,-40)});const xP=Jt([]);wt(()=>Math.max(...xP.map(n=>n.meter.over/n.meter.under)));const MP=4096,CP=512,Qv=440,EP=69;Uv(Cl,3);const Sm=Jt({initiated:!1,initiating:!1,stream:null,middleA:Qv,semitone:EP,note:{name:"A",value:69,cents:0,octave:4,frequency:440,color:AP(440),silent:!1},span:64,bufferSize:MP,tempoBufferSize:CP,running:!1,frame:0,beat:0,bpm:0,confidence:0,listenBeat:!1,prevBeat:0,blink:!1,chroma:new Array(12).fill(0),spec:[],rms:0,aChroma:wt(()=>Uv(Sm.chroma,-3)),chromaAvg:wt(()=>Sm.chroma.reduce((n,t)=>n+t,0)/12)});function AP(n){const t=NP(n);if(typeof t!="number")return"#333";const e=Math.floor(t/12)+2;return oa(t,e)}function NP(n){return 12*(Math.log(n/Qv)/Math.log(2))%12}Zn({initiating:!1,initiated:!1,started:!1,running:!1,ctx:null,core:null,node:null});Zn({});Jt({});Jt({});Jt({});Zn({isOpen:!1,stream:null,streamSource:null,gain:Vs(1,0,10),gainRef:null,gainSetter:null});Ne("el-synth-enabled",!0);Ne("sound-font","marimba");Jt([]);ge(!1);ge(!1);Vs(Ne("sound-font-volume",1),0,1);Ne("sound-font-enabled",!0);const ty="15.0.4",xm=(n,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:n}),Mm=(n,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:n}),mh=(n,t)=>({startTime:t,type:"setValue",value:n}),ey=(n,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:n}),ny=(n,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-n)/r),ci=n=>n.type==="exponentialRampToValue",xc=n=>n.type==="linearRampToValue",er=n=>ci(n)||xc(n),Wd=n=>n.type==="setValue",Es=n=>n.type==="setValueCurve",Mc=(n,t,e,s)=>{const r=n[t];return r===void 0?s:er(r)||Wd(r)?r.value:Es(r)?r.values[r.values.length-1]:ny(e,Mc(n,t-1,r.startTime,s),r)},Cm=(n,t,e,s,r)=>e===void 0?[s.insertTime,r]:er(e)?[e.endTime,e.value]:Wd(e)?[e.startTime,e.value]:Es(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Mc(n,t-1,e.startTime,r)],gh=n=>n.type==="cancelAndHold",_h=n=>n.type==="cancelScheduledValues",Ks=n=>gh(n)||_h(n)?n.cancelTime:ci(n)||xc(n)?n.endTime:n.startTime,Em=(n,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((n-t)/(s-t)):0,Am=(n,t,e,{endTime:s,value:r})=>e+(n-t)/(s-t)*(r-e),kP=(n,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?n[e]:(1-(t-e))*n[e]+(1-(s-t))*n[s]},OP=(n,{duration:t,startTime:e,values:s})=>{const r=(n-e)/t*(s.length-1);return kP(s,r)},Va=n=>n.type==="setTarget";class IP{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Ks(t);if(gh(t)||_h(t)){const s=this._automationEvents.findIndex(i=>_h(t)&&Es(i)?i.startTime+i.duration>=e:Ks(i)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),gh(t)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&er(r)){if(i!==void 0&&Va(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:Es(i)?i.startTime+i.duration:Ks(i),a=i===void 0?this._defaultValue:Es(i)?i.values[i.values.length-1]:i.value,c=ci(r)?Em(e,o,a,r):Am(e,o,a,r),l=ci(r)?xm(c,e,this._currenTime):Mm(c,e,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&Va(i)&&this._automationEvents.push(mh(this.getValue(e),e)),i!==void 0&&Es(i)&&i.startTime+i.duration>e){const o=e-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const d=l*h%1;u[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=ey(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>Ks(o)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Es(r)&&Ks(r)+r.duration>e)return!1;const i=ci(t)?xm(t.value,t.endTime,this._currenTime):xc(t)?Mm(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(i);else{if(Es(t)&&e+t.duration>Ks(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>Ks(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];Va(r)&&s.unshift(mh(Mc(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(o=>Ks(o)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,i=this._automationEvents[r];if(i!==void 0&&Va(i)&&(s===void 0||!er(s)||s.insertTime>t))return ny(t,Mc(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Wd(i)&&(s===void 0||!er(s)))return i.value;if(i!==void 0&&Es(i)&&(s===void 0||!er(s)||i.startTime+i.duration>t))return t<i.startTime+i.duration?OP(t,i):i.values[i.values.length-1];if(i!==void 0&&er(i)&&(s===void 0||!er(s)))return i.value;if(s!==void 0&&ci(s)){const[o,a]=Cm(this._automationEvents,r,i,s,this._defaultValue);return Em(t,o,a,s)}if(s!==void 0&&xc(s)){const[o,a]=Cm(this._automationEvents,r,i,s,this._defaultValue);return Am(t,o,a,s)}return this._defaultValue}}const PP=n=>({cancelTime:n,type:"cancelAndHold"}),RP=n=>({cancelTime:n,type:"cancelScheduledValues"}),DP=(n,t)=>({endTime:t,type:"exponentialRampToValue",value:n}),VP=(n,t)=>({endTime:t,type:"linearRampToValue",value:n}),FP=(n,t,e)=>({startTime:t,target:n,timeConstant:e,type:"setTarget"}),LP=()=>new DOMException("","AbortError"),qP=n=>(t,e,[s,r,i],o)=>{n(t[r],[e,s,i],a=>a[0]===e&&a[1]===s,o)},BP=n=>(t,e,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},UP=n=>(t,e)=>{n.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Pi=new WeakSet,sy=new WeakMap,Gd=new WeakMap,ry=new WeakMap,zd=new WeakMap,El=new WeakMap,iy=new WeakMap,vh=new WeakMap,yh=new WeakMap,bh=new WeakMap,oy={construct(){return oy}},jP=n=>{try{const t=new Proxy(n,oy);new t}catch{return!1}return!0},Nm=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,km=(n,t)=>{const e=[];let s=n.replace(/^[\s]+/,""),r=s.match(Nm);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());e.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Nm)}return[e.join(";"),s]},Om=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Im=n=>{if(!jP(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},$P=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>{let f=0;return(p,m,g={credentials:"omit"})=>{const v=u.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();const w=l.get(p);if(w!==void 0){const _=w.get(m);if(_!==void 0)return _}const x=i(p),T=x.audioWorklet===void 0?r(m).then(([_,b])=>{const[y,S]=km(_,b),O=`${y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return e(O)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;s(x.currentTime,x.sampleRate,()=>_(class{},void 0,(b,y)=>{if(b.trim()==="")throw t();const S=yh.get(x);if(S!==void 0){if(S.has(b))throw t();Im(y),Om(y.parameterDescriptors),S.set(b,y)}else Im(y),Om(y.parameterDescriptors),yh.set(x,new Map([[b,y]]))},x.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(n(h,h))]).then(([[_,b],y])=>{const S=f+1;f=S;const[O,E]=km(_,b),L=`${O};((AudioWorkletProcessor,registerProcessor)=>{${E}
})(${y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,z=new Blob([L],{type:"application/javascript; charset=utf-8"}),V=URL.createObjectURL(z);return x.audioWorklet.addModule(V,g).then(()=>{if(a(x))return x;const U=o(x);return U.audioWorklet.addModule(V,g).then(()=>U)}).then(U=>{if(c===null)throw new SyntaxError;try{new c(U,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(V))});return w===void 0?l.set(p,new Map([[m,T]])):w.set(m,T),T.then(()=>{const _=u.get(p);_===void 0?u.set(p,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(p);_!==void 0&&_.delete(m)}),T}},Xn=(n,t)=>{const e=n.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},Al=(n,t)=>{const e=Array.from(n).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return n.delete(s),s},ay=(n,t,e,s)=>{const r=Xn(n,t),i=Al(r,o=>o[0]===e&&o[1]===s);return r.size===0&&n.delete(t),i},aa=n=>Xn(iy,n),Ri=n=>{if(Pi.has(n))throw new Error("The AudioNode is already stored.");Pi.add(n),aa(n).forEach(t=>t(!0))},cy=n=>"port"in n,ca=n=>{if(!Pi.has(n))throw new Error("The AudioNode is not stored.");Pi.delete(n),aa(n).forEach(t=>t(!1))},wh=(n,t)=>{!cy(n)&&t.every(e=>e.size===0)&&ca(n)},WP=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>{const f=new WeakMap;return(p,m,g,v,w)=>{const{activeInputs:x,passiveInputs:T}=i(m),{outputs:_}=i(p),b=a(p),y=S=>{const O=c(m),E=c(p);if(S){const C=ay(T,p,g,v);n(x,p,C,!1),!w&&!h(p)&&e(E,O,g,v),d(m)&&Ri(m)}else{const C=s(x,p,g,v);t(T,v,C,!1),!w&&!h(p)&&r(E,O,g,v);const k=o(m);if(k===0)u(m)&&wh(m,x);else{const R=f.get(m);R!==void 0&&clearTimeout(R),f.set(m,setTimeout(()=>{u(m)&&wh(m,x)},k*1e3))}}};return l(_,[m,g,v],S=>S[0]===m&&S[1]===g&&S[2]===v,!0)?(b.add(y),u(p)?n(x,p,[g,v,y],!0):t(T,v,[p,g,y],!0),!0):!1}},GP=n=>(t,e,[s,r,i],o)=>{const a=t.get(s);a===void 0?t.set(s,new Set([[r,e,i]])):n(a,[r,e,i],c=>c[0]===r&&c[1]===e,o)},zP=n=>(t,e)=>{const s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},HP=n=>(t,e)=>{n(t).add(e)},YP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},XP=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...YP,...c},h=s(l,u),d=i(l)?t():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Ue=(n,t)=>n.context===t,ZP=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Ue(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Cc=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},bs=()=>new DOMException("","IndexSizeError"),Hd=n=>{n.getChannelData=(t=>e=>{try{return t.call(n,e)}catch(s){throw s.code===12?bs():s}})(n.getChannelData)},KP={numberOfChannels:1},JP=(n,t,e,s,r,i,o,a)=>{let c=null;return class ly{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...KP,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&t(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(p.numberOfChannels===0)throw e();return typeof p.copyFromChannel!="function"?(o(p),Hd(p)):t(Cc,()=>Cc(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ly.prototype||n.has(u)}}},an=-34028234663852886e22,Xe=-an,Is=n=>Pi.has(n),QP={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},tR=(n,t,e,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...QP,...u},f=r(h,d),p=o(h),m=p?t():null;super(l,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=e(this,p,f.playbackRate,Xe,an)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Ri(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Is(this)&&ca(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},eR=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=e(l);const d=Ue(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(u,f),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},nR=n=>"playbackRate"in n,sR=n=>"frequency"in n&&"gain"in n,rR=n=>"offset"in n,iR=n=>!("frequency"in n)&&"gain"in n,oR=n=>"detune"in n&&"frequency"in n&&!("gain"in n),aR=n=>"pan"in n,Je=n=>Xn(sy,n),la=n=>Xn(ry,n),Th=(n,t)=>{const{activeInputs:e}=Je(n);e.forEach(r=>r.forEach(([i])=>{t.includes(n)||Th(i,[...t,n])}));const s=nR(n)?[n.playbackRate]:cy(n)?Array.from(n.parameters.values()):sR(n)?[n.Q,n.detune,n.frequency,n.gain]:rR(n)?[n.offset]:iR(n)?[n.gain]:oR(n)?[n.detune,n.frequency]:aR(n)?[n.pan]:[];for(const r of s){const i=la(r);i!==void 0&&i.activeInputs.forEach(([o])=>Th(o,t))}Is(n)&&ca(n)},uy=n=>{Th(n.destination,[])},cR=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),lR=(n,t,e,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?e():p}if(h===null)throw s();if(!cR(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw e();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),uy(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?t():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?t():u})}},uR=(n,t,e,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d=o(h),f=r(h,u,d),p=d?t(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},hR=n=>{const t=new WeakMap,e=async(s,r)=>{const i=r.destination;return t.set(r,i),await n(s,r,i),i};return{render(s,r){const i=t.get(r);return i!==void 0?Promise.resolve(i):e(s,r)}}},dR=(n,t,e,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),b=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),y=o(l);let S=!1,O=[0,0,-1,0,1,0],E=[0,0,0];const C=()=>{if(S)return;S=!0;const z=s(l,256,9,0);z.onaudioprocess=({inputBuffer:V})=>{const U=[i(V,_,0),i(V,_,1),i(V,_,2),i(V,_,3),i(V,_,4),i(V,_,5)];U.some(($,H)=>$!==O[H])&&(u.setOrientation(...U),O=U);const Z=[i(V,_,6),i(V,_,7),i(V,_,8)];Z.some(($,H)=>$!==E[H])&&(u.setPosition(...Z),E=Z)},b.connect(z)},k=z=>V=>{V!==O[z]&&(O[z]=V,u.setOrientation(...O))},R=z=>V=>{V!==E[z]&&(E[z]=V,u.setPosition(...E))},L=(z,V,U)=>{const Z=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V});Z.connect(b,0,z),Z.start(),Object.defineProperty(Z.offset,"defaultValue",{get(){return V}});const $=n({context:c},y,Z.offset,Xe,an);return a($,"value",H=>()=>H.call($),H=>K=>{try{H.call($,K)}catch(st){if(st.code!==9)throw st}C(),y&&U(K)}),$.cancelAndHoldAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.cancelAndHoldAtTime),$.cancelScheduledValues=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.cancelScheduledValues),$.exponentialRampToValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.exponentialRampToValueAtTime),$.linearRampToValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.linearRampToValueAtTime),$.setTargetAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setTargetAtTime),$.setValueAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setValueAtTime),$.setValueCurveAtTime=(H=>y?()=>{throw r()}:(...K)=>{const st=H.apply($,K);return C(),st})($.setValueCurveAtTime),$};return{forwardX:L(0,0,k(0)),forwardY:L(1,0,k(1)),forwardZ:L(2,-1,k(2)),positionX:L(6,0,R(0)),positionY:L(7,0,R(1)),positionZ:L(8,0,R(2)),upX:L(3,0,k(3)),upY:L(4,1,k(4)),upZ:L(5,0,k(5))}},{forwardX:d,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:w,upY:x,upZ:T}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return w},get upY(){return x},get upZ(){return T}}},Ec=n=>"context"in n,ua=n=>Ec(n[0]),Gr=(n,t,e,s)=>{for(const r of n)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(t),!0},Pm=(n,t,[e,s],r)=>{Gr(n,[t,e,s],i=>i[0]===t&&i[1]===e,r)},Rm=(n,[t,e,s],r)=>{const i=n.get(t);i===void 0?n.set(t,new Set([[e,s]])):Gr(i,[e,s],o=>o[0]===e,r)},Xi=n=>"inputs"in n,Ac=(n,t,e,s)=>{if(Xi(t)){const r=t.inputs[s];return n.connect(r,e,0),[r,e,0]}return n.connect(t,e,s),[t,e,s]},hy=(n,t,e)=>{for(const s of n)if(s[0]===t&&s[1]===e)return n.delete(s),s;return null},fR=(n,t,e)=>Al(n,s=>s[0]===t&&s[1]===e),dy=(n,t)=>{if(!aa(n).delete(t))throw new Error("Missing the expected event listener.")},fy=(n,t,e)=>{const s=Xn(n,t),r=Al(s,i=>i[0]===e);return s.size===0&&n.delete(t),r},Nc=(n,t,e,s)=>{Xi(t)?n.disconnect(t.inputs[s],e,0):n.disconnect(t,e,s)},Gt=n=>Xn(Gd,n),Bo=n=>Xn(zd,n),Fr=n=>vh.has(n),Za=n=>!Pi.has(n),Dm=(n,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?e(!0):e(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),Nu=(n,t)=>{const e=new Map;for(const s of n)for(const r of s){const i=e.get(r);e.set(r,i===void 0?1:i+1)}e.forEach((s,r)=>t(r,s))},kc=n=>"context"in n,pR=n=>{const t=new Map;n.connect=(e=>(s,r=0,i=0)=>{const o=kc(s)?e(s,r,i):e(s,r),a=t.get(s);return a===void 0?t.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(e=>(s,r,i)=>{if(e.apply(n),s===void 0)t.clear();else if(typeof s=="number")for(const[o,a]of t){const c=a.filter(l=>l.output!==s);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(s))if(r===void 0)t.delete(s);else{const o=t.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?t.delete(s):t.set(s,a)}}for(const[o,a]of t)a.forEach(c=>{kc(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},mR=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:i}=la(t),{outputs:o}=Je(n),a=aa(n),c=l=>{const u=Gt(n),h=Bo(t);if(l){const d=fy(i,n,e);Pm(r,n,d,!1),!s&&!Fr(n)&&u.connect(h,e)}else{const d=fR(r,n,e);Rm(i,d,!1),!s&&!Fr(n)&&u.disconnect(h,e)}};return Gr(o,[t,e],l=>l[0]===t&&l[1]===e,!0)?(a.add(c),Is(n)?Pm(r,n,[e,c],!0):Rm(i,[n,e,c],!0),!0):!1},gR=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:i}=Je(t),o=hy(r[s],n,e);return o===null?[ay(i,n,e,s)[2],!1]:[o[2],!0]},_R=(n,t,e)=>{const{activeInputs:s,passiveInputs:r}=la(t),i=hy(s,n,e);return i===null?[fy(r,n,e)[1],!1]:[i[2],!0]},Yd=(n,t,e,s,r)=>{const[i,o]=gR(n,e,s,r);if(i!==null&&(dy(n,i),o&&!t&&!Fr(n)&&Nc(Gt(n),Gt(e),s,r)),Is(e)){const{activeInputs:a}=Je(e);wh(e,a)}},Xd=(n,t,e,s)=>{const[r,i]=_R(n,e,s);r!==null&&(dy(n,r),i&&!t&&!Fr(n)&&Gt(n).disconnect(Bo(e),s))},vR=(n,t)=>{const e=Je(n),s=[];for(const r of e.outputs)ua(r)?Yd(n,t,...r):Xd(n,t,...r),s.push(r[0]);return e.outputs.clear(),s},yR=(n,t,e)=>{const s=Je(n),r=[];for(const i of s.outputs)i[1]===e&&(ua(i)?Yd(n,t,...i):Xd(n,t,...i),r.push(i[0]),s.outputs.delete(i));return r},bR=(n,t,e,s,r)=>{const i=Je(n);return Array.from(i.outputs).filter(o=>o[0]===e&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(ua(o)?Yd(n,t,...o):Xd(n,t,...o),i.outputs.delete(o),o[0]))},wR=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m)=>class extends l{constructor(v,w,x,T){super(x),this._context=v,this._nativeAudioNode=x;const _=u(v);h(_)&&e(Dm,()=>Dm(_,m))!==!0&&pR(x),Gd.set(this,x),iy.set(this,new Set),v.state!=="closed"&&w&&Ri(this),n(this,T,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,w=0,x=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const T=u(this._context),_=p(T);if(d(v)||f(v))throw i();if(Ec(v)){const S=Gt(v);try{const E=Ac(this._nativeAudioNode,S,w,x),C=Za(this);(_||C)&&this._nativeAudioNode.disconnect(...E),this.context.state!=="closed"&&!C&&Za(v)&&Ri(v)}catch(E){throw E.code===12?i():E}if(t(this,v,w,x,_)){const E=c([this],v);Nu(E,s(_))}return v}const b=Bo(v);if(b.name==="playbackRate"&&b.maxValue===1024)throw o();try{this._nativeAudioNode.connect(b,w),(_||Za(this))&&this._nativeAudioNode.disconnect(b,w)}catch(S){throw S.code===12?i():S}if(mR(this,v,w,_)){const S=c([this],v);Nu(S,s(_))}}disconnect(v,w,x){let T;const _=u(this._context),b=p(_);if(v===void 0)T=vR(this,b);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();T=yR(this,b,v)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||Ec(v)&&x!==void 0&&(x<0||x>=v.numberOfInputs))throw r();if(T=bR(this,b,v,w,x),T.length===0)throw i()}for(const y of T){const S=c([this],y);Nu(S,a)}}},TR=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g=null,v=null)=>{const w=m.value,x=new IP(w),T=p?s(x):null,_={get defaultValue(){return w},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(b){m.value=b,_.setValueAtTime(b,f.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")T===null&&x.flush(f.context.currentTime),x.add(r(b)),m.cancelAndHoldAtTime(b);else{const y=Array.from(x).pop();T===null&&x.flush(f.context.currentTime),x.add(r(b));const S=Array.from(x).pop();m.cancelScheduledValues(b),y!==S&&S!==void 0&&(S.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(S.value,S.endTime):S.type==="linearRampToValue"?m.linearRampToValueAtTime(S.value,S.endTime):S.type==="setValue"?m.setValueAtTime(S.value,S.startTime):S.type==="setValueCurve"&&m.setValueCurveAtTime(S.values,S.startTime,S.duration))}return _},cancelScheduledValues(b){return T===null&&x.flush(f.context.currentTime),x.add(i(b)),m.cancelScheduledValues(b),_},exponentialRampToValueAtTime(b,y){if(b===0)throw new RangeError;if(!Number.isFinite(y)||y<0)throw new RangeError;const S=f.context.currentTime;return T===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(w,S)),m.setValueAtTime(w,S)),x.add(o(b,y)),m.exponentialRampToValueAtTime(b,y),_},linearRampToValueAtTime(b,y){const S=f.context.currentTime;return T===null&&x.flush(S),Array.from(x).length===0&&(x.add(l(w,S)),m.setValueAtTime(w,S)),x.add(a(b,y)),m.linearRampToValueAtTime(b,y),_},setTargetAtTime(b,y,S){return T===null&&x.flush(f.context.currentTime),x.add(c(b,y,S)),m.setTargetAtTime(b,y,S),_},setValueAtTime(b,y){return T===null&&x.flush(f.context.currentTime),x.add(l(b,y)),m.setValueAtTime(b,y),_},setValueCurveAtTime(b,y,S){const O=b instanceof Float32Array?b:new Float32Array(b);if(h!==null&&h.name==="webkitAudioContext"){const E=y+S,C=f.context.sampleRate,k=Math.ceil(y*C),R=Math.floor(E*C),L=R-k,z=new Float32Array(L);for(let U=0;U<L;U+=1){const Z=(O.length-1)/S*((k+U)/C-y),$=Math.floor(Z),H=Math.ceil(Z);z[U]=$===H?O[$]:(1-(Z-$))*O[$]+(1-(H-Z))*O[H]}T===null&&x.flush(f.context.currentTime),x.add(u(z,y,S)),m.setValueCurveAtTime(z,y,S);const V=R/C;V<E&&d(_,z[z.length-1],V),d(_,O[O.length-1],E)}else T===null&&x.flush(f.context.currentTime),x.add(u(O,y,S)),m.setValueCurveAtTime(O,y,S);return _}};return e.set(_,m),t.set(_,f),n(_,T),_},SR=n=>({replay(t){for(const e of n)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=e;t.setTargetAtTime(r,s,i)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=e;t.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class py{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const xR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},MR=(n,t,e,s,r,i,o,a,c,l,u,h,d,f)=>class extends t{constructor(m,g,v){var w;const x=a(m),T=c(x),_=u({...xR,...v});d(_);const b=yh.get(x),y=b==null?void 0:b.get(g),S=T||x.state!=="closed"?x:(w=o(x))!==null&&w!==void 0?w:x,O=r(S,T?null:m.baseLatency,l,g,y,_),E=T?s(g,_,y):null;super(m,!0,O,E);const C=[];O.parameters.forEach((R,L)=>{const z=e(this,T,R);C.push([L,z])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new py(C),T&&n(x,this);const{activeInputs:k}=i(this);h(O,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Oc(n,t,e,s,r){if(typeof n.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),n.copyFromChannel(t[e],s,r);else{const i=n.getChannelData(s);if(t[e].byteLength===0)t[e]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(o)}}}const my=(n,t,e,s,r)=>{typeof n.copyToChannel=="function"?t[e].byteLength!==0&&n.copyToChannel(t[e],s,r):t[e].byteLength!==0&&n.getChannelData(s).set(t[e],r)},Ic=(n,t)=>{const e=[];for(let s=0;s<n;s+=1){const r=[],i=typeof t=="number"?t:t[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));e.push(r)}return e},CR=(n,t)=>{const e=Xn(bh,n),s=Gt(t);return Xn(e,s)},ER=async(n,t,e,s,r,i,o)=>{const a=t===null?Math.ceil(n.context.length/128)*128:t.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,v)=>g+v,0),u=l===0?null:e.createBuffer(l,a,e.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Je(n),d=await CR(e,n),f=Ic(s.numberOfInputs,s.channelCount),p=Ic(s.numberOfOutputs,r),m=Array.from(n.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&t!==null)for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<s.channelCount;w+=1)Oc(t,f[v],w,w,g);i.parameterDescriptors!==void 0&&t!==null&&i.parameterDescriptors.forEach(({name:v},w)=>{Oc(t,m,v,c+w,g)});for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<r[v];w+=1)p[v][w].byteLength===0&&(p[v][w]=new Float32Array(128));try{const v=f.map((x,T)=>h.activeInputs[T].size===0?[]:x),w=o(g/e.sampleRate,e.sampleRate,()=>d.process(v,p,m));if(u!==null)for(let x=0,T=0;x<s.numberOfOutputs;x+=1){for(let _=0;_<r[x];_+=1)my(u,p[x],_,T+_,g);T+=r[x]}if(!w)break}catch(v){n.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},AR=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m)=>(g,v,w)=>{const x=new WeakMap;let T=null;const _=async(b,y)=>{let S=u(b),O=null;const E=Ue(S,y),C=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(h===null){const k=C.reduce((V,U)=>V+U,0),R=r(y,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),L=[];for(let V=0;V<b.numberOfOutputs;V+=1)L.push(s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[V]}));const z=o(y,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});z.connect=t.bind(null,L),z.disconnect=c.bind(null,L),O=[R,L,z]}else E||(S=new h(y,g));if(x.set(y,O===null?S:O[2]),O!==null){if(T===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=b.channelCount*b.numberOfInputs,Z=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,$=U+Z;T=ER(b,$===0?null:await(async()=>{const K=new d($,Math.ceil(b.context.length/128)*128,y.sampleRate),st=[],Et=[];for(let lt=0;lt<v.numberOfInputs;lt+=1)st.push(o(K,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Et.push(r(K,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Ot=await Promise.all(Array.from(b.parameters.values()).map(async lt=>{const Ft=i(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:lt.value});return await f(K,lt,Ft.offset),Ft})),J=s(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+Z)});for(let lt=0;lt<v.numberOfInputs;lt+=1){st[lt].connect(Et[lt]);for(let Ft=0;Ft<v.channelCount;Ft+=1)Et[lt].connect(J,Ft,lt*v.channelCount+Ft)}for(const[lt,Ft]of Ot.entries())Ft.connect(J,0,U+lt),Ft.start(0);return J.connect(K.destination),await Promise.all(st.map(lt=>p(b,K,lt))),m(K)})(),y,v,C,w,l)}const k=await T,R=e(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[L,z,V]=O;k!==null&&(R.buffer=k,R.start(0)),R.connect(L);for(let U=0,Z=0;U<b.numberOfOutputs;U+=1){const $=z[U];for(let H=0;H<C[U];H+=1)L.connect($,Z+H,H);Z+=C[U]}return V}if(E)for(const[k,R]of b.parameters.entries())await n(y,R,S.parameters.get(k));else for(const[k,R]of b.parameters.entries())await f(y,R,S.parameters.get(k));return await p(b,y,S),S};return{render(b,y){a(y,b);const S=x.get(y);return S!==void 0?Promise.resolve(S):_(b,y)}}},NR=(n,t,e,s,r,i,o,a,c,l,u,h,d,f,p,m,g,v,w,x)=>class extends p{constructor(_,b){super(_,b),this._nativeContext=_,this._audioWorklet=n===void 0?void 0:{addModule:(y,S)=>n(this,y,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(_,b,y){return new e({length:b,numberOfChannels:_,sampleRate:y})}createBufferSource(){return new s(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new u(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,b){return new f(this,{feedback:b,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(_,b,y={disableNormalization:!1}){return new v(this,{...y,imag:b,real:_})}createStereoPanner(){return new w(this)}createWaveShaper(){return new x(this)}decodeAudioData(_,b,y){return l(this._nativeContext,_).then(S=>(typeof b=="function"&&b(S),S),S=>{throw typeof y=="function"&&y(S),S})}},kR={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},OR=(n,t,e,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...kR,...u},f=r(h,d),p=o(h),m=p?e():null;super(l,!1,f,m),this._Q=t(this,p,f.Q,Xe,an),this._detune=t(this,p,f.detune,1200*Math.log2(Xe),-1200*Math.log2(Xe)),this._frequency=t(this,p,f.frequency,l.sampleRate/2,0),this._gain=t(this,p,f.gain,40*Math.log10(Xe),an),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?s():d}if(l.length!==u.length||u.length!==h.length)throw s()}},IR=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Ue(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},PR=(n,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const i=n.get(e);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(e,o),o.catch(()=>!1).then(a=>(n.delete(e),t.set(e,a),a))):(t.set(e,o),o)}catch{return t.set(e,!1),!1}},RR={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},DR=(n,t,e,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...RR,...a},u=e(c,l),h=r(c)?t():null;super(o,!1,u,h)}},VR=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Ue(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},FR={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},LR=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...FR,...c}),h=e(l,u),d=r(l)?t():null;super(a,!1,h,d)}},qR=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Ue(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},BR=n=>(t,e,s)=>n(e,t,s),UR=n=>(t,e,s=0,r=0)=>{const i=t[s];if(i===void 0)throw n();return kc(e)?i.connect(e,0,r):i.connect(e,0)},jR=n=>(t,e)=>{const s=n(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},$R={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},WR=(n,t,e,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...$R,...l},d=s(u,h),f=i(u),p=f?e():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=t(this,f,d.offset,Xe,an),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Ri(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Is(this)&&ca(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},GR=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=e(l);const d=Ue(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(u,f),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},zR=n=>t=>(n[0]=t,n[0]),HR={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},YR=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...HR,...c},h=e(l,u),f=r(l)?t():null;super(a,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},XR=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Ue(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),Xi(a)?await e(i,o,a.inputs[0]):await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ZR=(n,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},KR=()=>new DOMException("","DataCloneError"),Vm=n=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(n,[n])}catch{}finally{r()}})},JR=(n,t,e,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=e();return Promise.reject(p)}try{r.add(d)}catch{}return t(c,()=>c(f))?f.decodeAudioData(d).then(p=>(Vm(d).catch(()=>{}),t(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await Vm(d)}catch{}},v=w=>{m(w),g()};try{f.decodeAudioData(d,w=>{typeof w.copyFromChannel!="function"&&(l(w),Hd(w)),n.add(w),g().then(()=>p(w))},w=>{v(w===null?s():w)})}catch(w){v(w)}})},QR=(n,t,e,s,r,i,o,a)=>(c,l)=>{const u=t.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(t.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=e(c);for(const m of p)if(ua(m)){const g=s(m[0]);n(f,g,m[1],m[2])}else{const g=r(m[0]);f.connect(g,m[1])}}}else t.set(c,u-l)},tD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},eD=(n,t,e,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...tD,...l},d=s(u,h),f=i(u),p=f?e(h.maxDelayTime):null;super(c,!1,d,p),this._delayTime=t(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},nD=(n,t,e,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=e(c);const h=Ue(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=t(l,d)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},sD=n=>(t,e,s,r)=>n(t[r],i=>i[0]===e&&i[1]===s),rD=n=>(t,e)=>{n(t).delete(e)},iD=n=>"delayTime"in n,oD=(n,t,e)=>function s(r,i){const o=Ec(i)?i:e(n,i);if(iD(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Fa=(n,t,e)=>{const s=t[e];if(s===void 0)throw n();return s},aD=n=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(i=>i.disconnect()):typeof e=="number"?Fa(n,t,e).disconnect():kc(e)?s===void 0?t.forEach(i=>i.disconnect(e)):r===void 0?Fa(n,t,s).disconnect(e,0):Fa(n,t,s).disconnect(e,0,r):s===void 0?t.forEach(i=>i.disconnect(e)):Fa(n,t,s).disconnect(e,0),cD={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},lD=(n,t,e,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),d={...cD,...u},f=s(h,d),p=o(h),m=p?e():null;super(l,!1,f,m),this._attack=t(this,p,f.attack),this._knee=t(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=t(this,p,f.ratio),this._release=t(this,p,f.release),this._threshold=t(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},uD=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Ue(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},hD=()=>new DOMException("","EncodingError"),dD=n=>t=>new Promise((e,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,d,f,p)=>{if(h===a||h===n.location.href&&d===1&&f===1)return l(),s(p),!1;if(c!==null)return c(u,h,d,f,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),e()},i.src=a,i.type="module",r.appendChild(i)}}),fD=n=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(e,i,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,i===void 0?null:i,r)}},pD=n=>(t,e,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},mD=n=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw n()},gD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},_D=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...gD,...c},h=s(l,u),d=i(l),f=d?e():null;super(a,!1,h,f),this._gain=t(this,d,h.gain,Xe,an)}get gain(){return this._gain}},vD=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Ue(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},yD=(n,t)=>e=>t(n,e),bD=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},wD=n=>t=>{var e;return(e=n.get(t))!==null&&e!==void 0?e:0},TD=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},SD=n=>t=>n.get(t),xe=()=>new DOMException("","InvalidStateError"),xD=n=>t=>{const e=n.get(t);if(e===void 0)throw xe();return e},MD=(n,t)=>e=>{let s=n.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),n.set(e,s),s},CD=n=>t=>{const e=n.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},Nl=()=>new DOMException("","InvalidAccessError"),ED=n=>{n.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw Nl();return t.call(n,e,s,r)})(n.getFrequencyResponse)},AD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ND=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...AD,...c},d=t(l,u?null:a.baseLatency,h),f=u?e(h.feedback,h.feedforward):null;super(a,!1,d,f),ED(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},gy=(n,t,e,s,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let f=0;f<h;f+=1){let p=e[0]*l[f];for(let m=1;m<r;m+=1){const g=d-m&c-1;p+=e[m]*i[g],p-=n[m]*o[g]}for(let m=r;m<s;m+=1)p+=e[m]*i[d-m&c-1];for(let m=r;m<t;m+=1)p-=n[m]*o[d-m&c-1];i[d]=l[f],o[d]=p,d=d+1&c-1,u[f]=p}return d},kD=(n,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=t.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const m=n.getChannelData(p),g=d.getChannelData(p);u.fill(0),h.fill(0),gy(r,o,i,a,c,u,h,0,l,m,g)}return d},OD=(n,t,e,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,f=t(u);const p=Ue(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=h.createIIRFilter(o,i)),a.set(h,d===null?f:d),d!==null){if(c===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new e(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const v=await r(g);return kD(v,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await s(u,h,f),f};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},ID=(n,t,e,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=e(a);for(const d of h)if(ua(d)){const f=s(d[0]);t(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,l+c)},PD=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},RD=(n,t)=>e=>n.has(e)||t(e),DD=(n,t)=>e=>n.has(e)||t(e),VD=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},FD=n=>t=>n!==null&&t instanceof n,LD=n=>t=>n!==null&&typeof n.AudioNode=="function"&&t instanceof n.AudioNode,qD=n=>t=>n!==null&&typeof n.AudioParam=="function"&&t instanceof n.AudioParam,BD=(n,t)=>e=>n(e)||t(e),UD=n=>t=>n!==null&&t instanceof n,jD=n=>n!==null&&n.isSecureContext,$D=(n,t,e,s)=>class extends n{constructor(i,o){const a=e(i),c=t(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},WD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},GD=(n,t,e,s)=>class extends n{constructor(i,o){const a=e(i);if(s(a))throw new TypeError;const c={...WD,...o},l=t(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},zD=(n,t,e,s)=>class extends n{constructor(i,o){const a=e(i),c=t(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},HD=(n,t,e)=>class extends n{constructor(r,i){const o=e(r),a=t(o,i);super(r,!0,a,null)}},YD=(n,t,e,s,r,i)=>class extends e{constructor(a,c){super(a),this._nativeContext=a,El.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=t(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Uo=n=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=n.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},XD=(n,t)=>(e,s,r)=>{const i=new Set;return e.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(t(a))return o.call(e,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(e,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(e.connect),e.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(e),i.clear();else if(typeof a=="number"){o.call(e,a);for(const d of i)d[1]===a&&i.delete(d)}else{t(a)?o.call(e,a,c,l):o.call(e,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(e.disconnect),e},Ht=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e]&&(n[e]=s)},be=(n,t)=>{Ht(n,t,"channelCount"),Ht(n,t,"channelCountMode"),Ht(n,t,"channelInterpretation")},Fm=n=>typeof n.getFloatTimeDomainData=="function",ZD=n=>{n.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);n.getByteTimeDomainData(e);const s=Math.max(e.length,n.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},KD=(n,t)=>(e,s)=>{const r=e.createAnalyser();if(be(r,s),!(s.maxDecibels>s.minDecibels))throw t();return Ht(r,s,"fftSize"),Ht(r,s,"maxDecibels"),Ht(r,s,"minDecibels"),Ht(r,s,"smoothingTimeConstant"),n(Fm,()=>Fm(r))||ZD(r),r},JD=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ee=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e].value&&(n[e].value=s)},QD=n=>{n.start=(t=>{let e=!1;return(s=0,r=0,i)=>{if(e)throw xe();t.call(n,s,r,i),e=!0}})(n.start)},Zd=n=>{n.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(n,e,s,r)})(n.start)},Kd=n=>{n.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(n,e)})(n.stop)},t5=(n,t,e,s,r,i,o,a,c,l,u)=>(h,d)=>{const f=h.createBufferSource();return be(f,d),ee(f,d,"playbackRate"),Ht(f,d,"buffer"),Ht(f,d,"loop"),Ht(f,d,"loopEnd"),Ht(f,d,"loopStart"),t(e,()=>e(h))||QD(f),t(s,()=>s(h))||c(f),t(r,()=>r(h))||l(f,h),t(i,()=>i(h))||Zd(f),t(o,()=>o(h))||u(f,h),t(a,()=>a(h))||Kd(f),n(h,f),f},e5=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,n5=(n,t)=>(e,s,r)=>{const i=e.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(e,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},s5=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,r5=n=>{const{port1:t}=new MessageChannel;try{t.postMessage(n)}finally{t.close()}},i5=(n,t,e,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=d.get(m[1]);v!==void 0?m[1]=v:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},d.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return r5(u),t(i,o,l,u)},_y=(n,t)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*t))))),o5=n=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),t(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),e(i)},r.postMessage(n)}),a5=async(n,t)=>{const e=await o5(t);return new n(e)},c5=(n,t,e,s)=>{let r=bh.get(n);r===void 0&&(r=new WeakMap,bh.set(n,r));const i=a5(e,s);return r.set(t,i),i},l5=(n,t,e,s,r,i,o,a,c,l,u,h,d)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(A=>A<1))throw c();if(v.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,x=v.reduce((A,P)=>A+P,0),T=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+T>6||x>6)throw c();const _=new MessageChannel,b=[],y=[];for(let A=0;A<g.numberOfInputs;A+=1)b.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),y.push(r(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:A,maxValue:P,minValue:F,name:D}of m.parameterDescriptors){const q=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[D]!==void 0?g.parameterData[D]:A===void 0?0:A});Object.defineProperties(q.offset,{defaultValue:{get:()=>A===void 0?0:A},maxValue:{get:()=>P===void 0?Xe:P},minValue:{get:()=>F===void 0?an:F}}),S.push(q)}const O=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+T)}),E=_y(p,f.sampleRate),C=a(f,E,w+T,Math.max(1,x)),k=r(f,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),R=[];for(let A=0;A<g.numberOfOutputs;A+=1)R.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[A]}));for(let A=0;A<g.numberOfInputs;A+=1){b[A].connect(y[A]);for(let P=0;P<g.channelCount;P+=1)y[A].connect(O,P,A*g.channelCount+P)}const L=new py(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:A},P)=>{const F=S[P];return F.connect(O,0,w+P),F.start(0),[A,F.offset]}));O.connect(C);let z=g.channelInterpretation,V=null;const U=g.numberOfOutputs===0?[C]:R,Z={get bufferSize(){return E},get channelCount(){return g.channelCount},set channelCount(A){throw e()},get channelCountMode(){return g.channelCountMode},set channelCountMode(A){throw e()},get channelInterpretation(){return z},set channelInterpretation(A){for(const P of b)P.channelInterpretation=A;z=A},get context(){return C.context},get inputs(){return b},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return V},set onprocessorerror(A){typeof V=="function"&&Z.removeEventListener("processorerror",V),V=typeof A=="function"?A:null,typeof V=="function"&&Z.addEventListener("processorerror",V)},get parameters(){return L},get port(){return _.port2},addEventListener(...A){return C.addEventListener(A[0],A[1],A[2])},connect:n.bind(null,U),disconnect:l.bind(null,U),dispatchEvent(...A){return C.dispatchEvent(A[0])},removeEventListener(...A){return C.removeEventListener(A[0],A[1],A[2])}},$=new Map;_.port1.addEventListener=(A=>(...P)=>{if(P[0]==="message"){const F=typeof P[1]=="function"?P[1]:typeof P[1]=="object"&&P[1]!==null&&typeof P[1].handleEvent=="function"?P[1].handleEvent:null;if(F!==null){const D=$.get(P[1]);D!==void 0?P[1]=D:(P[1]=q=>{u(f.currentTime,f.sampleRate,()=>F(q))},$.set(F,P[1]))}}return A.call(_.port1,P[0],P[1],P[2])})(_.port1.addEventListener),_.port1.removeEventListener=(A=>(...P)=>{if(P[0]==="message"){const F=$.get(P[1]);F!==void 0&&($.delete(P[1]),P[1]=F)}return A.call(_.port1,P[0],P[1],P[2])})(_.port1.removeEventListener);let H=null;Object.defineProperty(_.port1,"onmessage",{get:()=>H,set:A=>{typeof H=="function"&&_.port1.removeEventListener("message",H),H=typeof A=="function"?A:null,typeof H=="function"&&(_.port1.addEventListener("message",H),_.port1.start())}}),m.prototype.port=_.port1;let K=null;c5(f,Z,m,g).then(A=>K=A);const Et=Ic(g.numberOfInputs,g.channelCount),Ot=Ic(g.numberOfOutputs,v),J=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((A,{name:P})=>({...A,[P]:new Float32Array(128)}),{});let lt=!0;const Ft=()=>{g.numberOfOutputs>0&&C.disconnect(k);for(let A=0,P=0;A<g.numberOfOutputs;A+=1){const F=R[A];for(let D=0;D<v[A];D+=1)k.disconnect(F,P+D,D);P+=v[A]}},G=new Map;C.onaudioprocess=({inputBuffer:A,outputBuffer:P})=>{if(K!==null){const F=h(Z);for(let D=0;D<E;D+=128){for(let q=0;q<g.numberOfInputs;q+=1)for(let j=0;j<g.channelCount;j+=1)Oc(A,Et[q],j,j,D);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:q},j)=>{Oc(A,J,q,w+j,D)});for(let q=0;q<g.numberOfInputs;q+=1)for(let j=0;j<v[q];j+=1)Ot[q][j].byteLength===0&&(Ot[q][j]=new Float32Array(128));try{const q=Et.map((X,Y)=>{if(F[Y].size>0)return G.set(Y,E/128),X;const nt=G.get(Y);return nt===void 0?[]:(X.every(it=>it.every(at=>at===0))&&(nt===1?G.delete(Y):G.set(Y,nt-1)),X)});lt=u(f.currentTime+D/f.sampleRate,f.sampleRate,()=>K.process(q,Ot,J));for(let X=0,Y=0;X<g.numberOfOutputs;X+=1){for(let rt=0;rt<v[X];rt+=1)my(P,Ot[X],rt,Y+rt,D);Y+=v[X]}}catch(q){lt=!1,Z.dispatchEvent(new ErrorEvent("processorerror",{colno:q.colno,filename:q.filename,lineno:q.lineno,message:q.message}))}if(!lt){for(let q=0;q<g.numberOfInputs;q+=1){b[q].disconnect(y[q]);for(let j=0;j<g.channelCount;j+=1)y[D].disconnect(O,j,q*g.channelCount+j)}if(m.parameterDescriptors!==void 0){const q=m.parameterDescriptors.length;for(let j=0;j<q;j+=1){const X=S[j];X.disconnect(O,0,w+j),X.stop()}}O.disconnect(C),C.onaudioprocess=null,we?Ft():je();break}}}};let we=!1;const ce=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Pe=()=>C.connect(ce).connect(f.destination),je=()=>{C.disconnect(ce),ce.disconnect()},N=()=>{if(lt){je(),g.numberOfOutputs>0&&C.connect(k);for(let A=0,P=0;A<g.numberOfOutputs;A+=1){const F=R[A];for(let D=0;D<v[A];D+=1)k.connect(F,P+D,D);P+=v[A]}}we=!0},M=()=>{lt&&(Pe(),Ft()),we=!1};return Pe(),d(Z,N,M)},vy=(n,t)=>{const e=n.createBiquadFilter();return be(e,t),ee(e,t,"Q"),ee(e,t,"detune"),ee(e,t,"frequency"),ee(e,t,"gain"),Ht(e,t,"type"),e},u5=(n,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&t(e,r),be(r,s),r},h5=n=>{const t=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xe()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw xe()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw xe()}})},ha=(n,t)=>{const e=n.createChannelSplitter(t.numberOfOutputs);return be(e,t),h5(e),e},d5=(n,t,e,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return e(i,o);const a=i.createConstantSource();return be(a,o),ee(a,o,"offset"),t(s,()=>s(i))||Zd(a),t(r,()=>r(i))||Kd(a),n(i,a),a},Zi=(n,t)=>(n.connect=t.connect.bind(t),n.disconnect=t.disconnect.bind(t),n),f5=(n,t,e,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=e(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},d=()=>c.connect(l),f=()=>c.disconnect(l);return n(r,c),s(Zi(h,l),d,f)},p5=(n,t)=>(e,s)=>{const r=e.createConvolver();if(be(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Ht(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return t(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},yy=(n,t)=>{const e=n.createDelay(t.maxDelayTime);return be(e,t),ee(e,t,"delayTime"),e},m5=n=>(t,e)=>{const s=t.createDynamicsCompressor();if(be(s,e),e.channelCount>2||e.channelCountMode==="max")throw n();return ee(s,e,"attack"),ee(s,e,"knee"),ee(s,e,"ratio"),ee(s,e,"release"),ee(s,e,"threshold"),s},dn=(n,t)=>{const e=n.createGain();return be(e,t),ee(e,t,"gain"),e},g5=n=>(t,e,s)=>{if(t.createIIRFilter===void 0)return n(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return be(r,s),r};function _5(n,t){const e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}function v5(n,t){return[n[0]*t[0]-n[1]*t[1],n[0]*t[1]+n[1]*t[0]]}function Lm(n,t){let e=[0,0];for(let s=n.length-1;s>=0;s-=1)e=v5(e,t),e[0]+=n[s];return e}const y5=(n,t,e,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=_y(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=d.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(d[0]===0)throw t();if(m===0||m>20)throw s();if(f[0]===0)throw t();if(d[0]!==1){for(let S=0;S<m;S+=1)f[S]/=d[0];for(let S=1;S<p;S+=1)d[S]/=d[0]}const v=e(r,h,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=c;const w=32,x=[],T=[],_=[];for(let S=0;S<o;S+=1){x.push(0);const O=new Float32Array(w),E=new Float32Array(w);O.fill(0),E.fill(0),T.push(O),_.push(E)}v.onaudioprocess=S=>{const O=S.inputBuffer,E=S.outputBuffer,C=O.numberOfChannels;for(let k=0;k<C;k+=1){const R=O.getChannelData(k),L=E.getChannelData(k);x[k]=gy(d,p,f,m,g,T[k],_[k],x[k],w,R,L)}};const b=r.sampleRate/2;return Zi({get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(S){v.channelCount=S},get channelCountMode(){return v.channelCountMode},set channelCountMode(S){v.channelCountMode=S},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(S){v.channelInterpretation=S},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...S){return v.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return v.dispatchEvent(S[0])},getFrequencyResponse(S,O,E){if(S.length!==O.length||O.length!==E.length)throw n();const C=S.length;for(let k=0;k<C;k+=1){const R=-Math.PI*(S[k]/b),L=[Math.cos(R),Math.sin(R)],z=Lm(f,L),V=Lm(d,L),U=_5(z,V);O[k]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),E[k]=Math.atan2(U[1],U[0])}},removeEventListener(...S){return v.removeEventListener(S[0],S[1],S[2])}},v)},b5=(n,t)=>n.createMediaElementSource(t.mediaElement),w5=(n,t)=>{const e=n.createMediaStreamDestination();return be(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},T5=(n,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=e.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},S5=(n,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=e.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(t(e))throw new TypeError;return i},x5=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,M5=(n,t,e,s,r,i)=>(o,a)=>{const c=o.createOscillator();return be(c,a),ee(c,a,"detune"),ee(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ht(c,a,"type"),t(e,()=>e(o))||Zd(c),t(s,()=>s(o))||i(c,o),t(r,()=>r(o))||Kd(c),n(o,c),c},C5=n=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?n(t,e):(be(s,e),ee(s,e,"orientationX"),ee(s,e,"orientationY"),ee(s,e,"orientationZ"),ee(s,e,"positionX"),ee(s,e,"positionY"),ee(s,e,"positionZ"),Ht(s,e,"coneInnerAngle"),Ht(s,e,"coneOuterAngle"),Ht(s,e,"coneOuterGain"),Ht(s,e,"distanceModel"),Ht(s,e,"maxDistance"),Ht(s,e,"panningModel"),Ht(s,e,"refDistance"),Ht(s,e,"rolloffFactor"),s)},E5=(n,t,e,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:w,panningModel:x,positionX:T,positionY:_,positionZ:b,refDistance:y,rolloffFactor:S,...O})=>{const E=u.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw o();be(E,O);const C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=e(u,{...C,channelInterpretation:"speakers",numberOfInputs:6}),R=s(u,{...O,gain:1}),L=s(u,{...C,gain:1}),z=s(u,{...C,gain:0}),V=s(u,{...C,gain:0}),U=s(u,{...C,gain:0}),Z=s(u,{...C,gain:0}),$=s(u,{...C,gain:0}),H=r(u,256,6,1),K=i(u,{...C,curve:new Float32Array([1,1]),oversample:"none"});let st=[g,v,w],Et=[T,_,b];const Ot=new Float32Array(1);H.onaudioprocess=({inputBuffer:G})=>{const we=[c(G,Ot,0),c(G,Ot,1),c(G,Ot,2)];we.some((Pe,je)=>Pe!==st[je])&&(E.setOrientation(...we),st=we);const ce=[c(G,Ot,3),c(G,Ot,4),c(G,Ot,5)];ce.some((Pe,je)=>Pe!==Et[je])&&(E.setPosition(...ce),Et=ce)},Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(G){if(G>2)throw o();R.channelCount=G,E.channelCount=G},get channelCountMode(){return E.channelCountMode},set channelCountMode(G){if(G==="max")throw o();R.channelCountMode=G,E.channelCountMode=G},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(G){R.channelInterpretation=G,E.channelInterpretation=G},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(G){E.coneInnerAngle=G},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(G){E.coneOuterAngle=G},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(G){if(G<0||G>1)throw t();E.coneOuterGain=G},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(G){E.distanceModel=G},get inputs(){return[R]},get maxDistance(){return E.maxDistance},set maxDistance(G){if(G<0)throw new RangeError;E.maxDistance=G},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return L.gain},get orientationY(){return z.gain},get orientationZ(){return V.gain},get panningModel(){return E.panningModel},set panningModel(G){E.panningModel=G},get positionX(){return U.gain},get positionY(){return Z.gain},get positionZ(){return $.gain},get refDistance(){return E.refDistance},set refDistance(G){if(G<0)throw new RangeError;E.refDistance=G},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(G){if(G<0)throw new RangeError;E.rolloffFactor=G},addEventListener(...G){return R.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return R.dispatchEvent(G[0])},removeEventListener(...G){return R.removeEventListener(G[0],G[1],G[2])}};h!==J.coneInnerAngle&&(J.coneInnerAngle=h),d!==J.coneOuterAngle&&(J.coneOuterAngle=d),f!==J.coneOuterGain&&(J.coneOuterGain=f),p!==J.distanceModel&&(J.distanceModel=p),m!==J.maxDistance&&(J.maxDistance=m),g!==J.orientationX.value&&(J.orientationX.value=g),v!==J.orientationY.value&&(J.orientationY.value=v),w!==J.orientationZ.value&&(J.orientationZ.value=w),x!==J.panningModel&&(J.panningModel=x),T!==J.positionX.value&&(J.positionX.value=T),_!==J.positionY.value&&(J.positionY.value=_),b!==J.positionZ.value&&(J.positionZ.value=b),y!==J.refDistance&&(J.refDistance=y),S!==J.rolloffFactor&&(J.rolloffFactor=S),(st[0]!==1||st[1]!==0||st[2]!==0)&&E.setOrientation(...st),(Et[0]!==0||Et[1]!==0||Et[2]!==0)&&E.setPosition(...Et);const lt=()=>{R.connect(E),n(R,K,0,0),K.connect(L).connect(k,0,0),K.connect(z).connect(k,0,1),K.connect(V).connect(k,0,2),K.connect(U).connect(k,0,3),K.connect(Z).connect(k,0,4),K.connect($).connect(k,0,5),k.connect(H).connect(u.destination)},Ft=()=>{R.disconnect(E),a(R,K,0,0),K.disconnect(L),L.disconnect(k),K.disconnect(z),z.disconnect(k),K.disconnect(V),V.disconnect(k),K.disconnect(U),U.disconnect(k),K.disconnect(Z),Z.disconnect(k),K.disconnect($),$.disconnect(k),k.disconnect(H),H.disconnect(u.destination)};return l(Zi(J,E),lt,Ft)},A5=n=>(t,{disableNormalization:e,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=t.createPeriodicWave(o,i,{disableNormalization:e});if(Array.from(s).length<2)throw n();return a},da=(n,t,e,s)=>n.createScriptProcessor(t,e,s),N5=(n,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return n(e,s);const i=e.createStereoPanner();return be(i,s),ee(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw t()}}),i},k5=(n,t,e,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,v)=>{const w=new Float32Array(16385),x=new Float32Array(16385);for(let O=0;O<16385;O+=1){const E=O/16384*c;w[O]=Math.cos(E),x[O]=Math.sin(E)}const T=e(p,{...l,gain:0}),_=s(p,{...u,curve:w}),b=s(p,{...u,curve:a}),y=e(p,{...l,gain:0}),S=s(p,{...u,curve:x});return{connectGraph(){m.connect(T),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(y),b.connect(g),g.connect(_.inputs===void 0?_:_.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),_.connect(T.gain),S.connect(y.gain),T.connect(v,0,0),y.connect(v,0,1)},disconnectGraph(){m.disconnect(T),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(y),b.disconnect(g),g.disconnect(_.inputs===void 0?_:_.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),_.disconnect(T.gain),S.disconnect(y.gain),T.disconnect(v,0,0),y.disconnect(v,0,1)}}},d=(p,m,g,v)=>{const w=new Float32Array(16385),x=new Float32Array(16385),T=new Float32Array(16385),_=new Float32Array(16385),b=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>b){const Z=(U-b)/(16384-b)*c;w[U]=Math.cos(Z),x[U]=Math.sin(Z),T[U]=0,_[U]=1}else{const Z=U/(16384-b)*c;w[U]=1,x[U]=0,T[U]=Math.cos(Z),_[U]=Math.sin(Z)}const y=t(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=e(p,{...l,gain:0}),O=s(p,{...u,curve:w}),E=e(p,{...l,gain:0}),C=s(p,{...u,curve:x}),k=s(p,{...u,curve:a}),R=e(p,{...l,gain:0}),L=s(p,{...u,curve:T}),z=e(p,{...l,gain:0}),V=s(p,{...u,curve:_});return{connectGraph(){m.connect(y),m.connect(k.inputs===void 0?k:k.inputs[0]),y.connect(S,0),y.connect(E,0),y.connect(R,1),y.connect(z,1),k.connect(g),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(C.inputs===void 0?C:C.inputs[0]),g.connect(L.inputs===void 0?L:L.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),O.connect(S.gain),C.connect(E.gain),L.connect(R.gain),V.connect(z.gain),S.connect(v,0,0),R.connect(v,0,0),E.connect(v,0,1),z.connect(v,0,1)},disconnectGraph(){m.disconnect(y),m.disconnect(k.inputs===void 0?k:k.inputs[0]),y.disconnect(S,0),y.disconnect(E,0),y.disconnect(R,1),y.disconnect(z,1),k.disconnect(g),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(C.inputs===void 0?C:C.inputs[0]),g.disconnect(L.inputs===void 0?L:L.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),O.disconnect(S.gain),C.disconnect(E.gain),L.disconnect(R.gain),V.disconnect(z.gain),S.disconnect(v,0,0),R.disconnect(v,0,0),E.disconnect(v,0,1),z.disconnect(v,0,1)}}},f=(p,m,g,v,w)=>{if(m===1)return h(p,g,v,w);if(m===2)return d(p,g,v,w);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:v,...w})=>{if(g==="max")throw r();const x=n(p,{...w,channelCount:1,channelCountMode:g,numberOfInputs:2}),T=e(p,{...w,channelCount:m,channelCountMode:g,gain:1}),_=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:b,disconnectGraph:y}=f(p,m,T,_,x);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(k){T.channelCount!==k&&(O&&y(),{connectGraph:b,disconnectGraph:y}=f(p,k,T,_,x),O&&b()),T.channelCount=k},get channelCountMode(){return T.channelCountMode},set channelCountMode(k){if(k==="clamped-max"||k==="max")throw r();T.channelCountMode=k},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(k){T.channelInterpretation=k},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return _.gain},addEventListener(...k){return T.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return T.dispatchEvent(k[0])},removeEventListener(...k){return T.removeEventListener(k[0],k[1],k[2])}};let O=!1;const E=()=>{b(),O=!0},C=()=>{y(),O=!1};return i(Zi(S,x),E,C)}},O5=(n,t,e,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return e(a,c);be(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw t();Ht(l,{curve:u},"curve"),Ht(l,c,"oversample");let h=null,d=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),d&&(s(g)&&h===null?h=n(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{d=!0,s(l.curve)&&(h=n(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},I5=(n,t,e,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();be(l,c),be(u,c);const h=e(i,{...c,gain:1}),d=e(i,{...c,gain:-1}),f=e(i,{...c,gain:1}),p=e(i,{...c,gain:-1});let m=null,g=!1,v=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,l.channelCount=_,f.channelCount=_,u.channelCount=_,p.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,l.channelCountMode=_,f.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,l.channelInterpretation=_,f.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_},get context(){return l.context},get curve(){return v},set curve(_){if(_!==null&&_.length<2)throw t();if(_===null)l.curve=_,u.curve=_;else{const b=_.length,y=new Float32Array(b+2-b%2),S=new Float32Array(b+2-b%2);y[0]=_[0],S[0]=-_[b-1];const O=Math.ceil((b+1)/2),E=(b+1)/2-1;for(let C=1;C<O;C+=1){const k=C/O*E,R=Math.floor(k),L=Math.ceil(k);y[C]=R===L?_[R]:(1-(k-R))*_[R]+(1-(L-k))*_[L],S[C]=R===L?-_[b-1-R]:-((1-(k-R))*_[b-1-R])-(1-(L-k))*_[b-1-L]}y[O]=b%2===1?_[O-1]:(_[O-2]+_[O-1])/2,l.curve=y,u.curve=S}v=_,g&&(s(v)&&m===null?m=n(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const x=()=>{h.connect(l).connect(f),h.connect(d).connect(u).connect(p).connect(f),g=!0,s(v)&&(m=n(i,h))},T=()=>{h.disconnect(l),l.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(p),p.disconnect(f),g=!1,m!==null&&(m(),m=null)};return r(Zi(w,f),x,T)},en=()=>new DOMException("","NotSupportedError"),P5={numberOfChannels:1},R5=(n,t,e,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...P5,...l},f=s(h,u,d);t(Uo,()=>Uo(f))||f.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,uy(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},D5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},V5=(n,t,e,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...D5,...l},d=e(u,h),f=i(u),p=f?s():null,m=c.sampleRate/2;super(c,!1,d,p),this._detune=t(this,f,d.detune,153600,-153600),this._frequency=t(this,f,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Ri(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Is(this)&&ca(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},F5=(n,t,e,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=e(u);const f=Ue(d,h);if(!f){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=t(h,p),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},L5={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},q5=(n,t,e,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...L5,...l},d=e(u,h),f=i(u),p=f?s():null;super(c,!1,d,p),this._nativePannerNode=d,this._orientationX=t(this,f,d.orientationX,Xe,an),this._orientationY=t(this,f,d.orientationY,Xe,an),this._orientationZ=t(this,f,d.orientationZ,Xe,an),this._positionX=t(this,f,d.positionX,Xe,an),this._positionY=t(this,f,d.positionY,Xe,an),this._positionZ=t(this,f,d.positionZ,Xe,an),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},B5=(n,t,e,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(f,p)=>{let m=null,g=i(f);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},x=Ue(g,p);if("bufferSize"in g)m=s(p,{...v,gain:1});else if(!x){const T={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,T)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new o(6,f.context.length,p.sampleRate),k=t(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(C.destination),h=(async()=>{const R=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(L,z)=>{const V=e(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z===0?1:0});return await a(C,L,V.offset),V}));for(let L=0;L<6;L+=1)R[L].connect(k,0,L),R[L].start(0);return l(C)})()}const T=await h,_=s(p,{...v,gain:1});await c(f,p,_);const b=[];for(let C=0;C<T.numberOfChannels;C+=1)b.push(T.getChannelData(C));let y=[b[0][0],b[1][0],b[2][0]],S=[b[3][0],b[4][0],b[5][0]],O=s(p,{...v,gain:1}),E=r(p,{...w,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:S[0],positionY:S[1],positionZ:S[2]});_.connect(O).connect(E.inputs[0]),E.connect(m);for(let C=128;C<T.length;C+=128){const k=[b[0][C],b[1][C],b[2][C]],R=[b[3][C],b[4][C],b[5][C]];if(k.some((L,z)=>L!==y[z])||R.some((L,z)=>L!==S[z])){y=k,S=R;const L=C/p.sampleRate;O.gain.setValueAtTime(0,L),O=s(p,{...v,gain:0}),E=r(p,{...w,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),O.gain.setValueAtTime(1,L),_.connect(O).connect(E.inputs[0]),E.connect(m)}}return m}return x?(await n(p,f.orientationX,g.orientationX),await n(p,f.orientationY,g.orientationY),await n(p,f.orientationZ,g.orientationZ),await n(p,f.positionX,g.positionX),await n(p,f.positionY,g.positionY),await n(p,f.positionZ,g.positionZ)):(await a(p,f.orientationX,g.orientationX),await a(p,f.orientationY,g.orientationY),await a(p,f.orientationZ,g.orientationZ),await a(p,f.positionX,g.positionX),await a(p,f.positionY,g.positionY),await a(p,f.positionZ,g.positionZ)),Xi(g)?await c(f,p,g.inputs[0]):await c(f,p,g),g};return{render(f,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):d(f,p)}}},U5={disableNormalization:!1},j5=(n,t,e,s)=>class by{constructor(i,o){const a=t(i),c=s({...U5,...o}),l=n(a,c);return e.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===by.prototype||e.has(i)}},$5=(n,t)=>(e,s,r)=>(n(s).replay(r),t(s,e,r)),W5=(n,t,e)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await t(l).render(l,r),f=s.context.destination;!e(l)&&(s!==f||!e(s))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},G5=(n,t,e)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);e(a)||u.connect(i,c)}))},z5=(n,t,e,s)=>r=>n(Uo,()=>Uo(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=e(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),H5=n=>(t,e)=>{n.set(t,e)},Y5=n=>(t,e)=>n.set(t,e),X5=(n,t,e,s,r,i,o,a)=>(c,l)=>e(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>e(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Hd(u)):t(i,()=>i(u))||a(u),n.add(u),u)),Z5={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},K5=(n,t,e,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...Z5,...c},h=e(l,u),d=i(l),f=d?s():null;super(a,!1,h,f),this._pan=t(this,d,h.pan)}get pan(){return this._pan}},J5=(n,t,e,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=e(a);const u=Ue(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),Xi(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Q5=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},t3=(n,t)=>async()=>{if(n===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},e3=(n,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},n3=()=>new DOMException("","UnknownError"),s3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},r3=(n,t,e,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...s3,...l},d=e(u,h),p=i(u)?s():null;super(c,!0,d,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},i3=(n,t,e)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!Ue(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),Xi(a)?await e(i,o,a.inputs[0]):await e(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},o3=()=>typeof window>"u"?null:window,a3=(n,t)=>e=>{e.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=e.numberOfChannels)throw t();const c=e.length,l=e.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},e.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=e.numberOfChannels)throw t();const c=e.length,l=e.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},c3=n=>t=>{t.copyFromChannel=(e=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<t.length)return e.call(t,s,a,o)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<t.length)return e.call(t,s,a,o)})(t.copyToChannel)},l3=n=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),n(t,"buffer",r=>()=>{const i=r.call(t);return i===s?null:i},r=>i=>r.call(t,i===null?s:i))},u3=(n,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=e.createBufferSource();t(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},wy=(n,t,e)=>n.copyFromChannel===void 0?n.getChannelData(e)[0]:(n.copyFromChannel(t,e),t[0]),Ty=n=>{if(n===null)return!1;const t=n.length;return t%2!==0?n[Math.floor(t/2)]!==0:n[t/2-1]+n[t/2]!==0},fa=(n,t,e,s)=>{let r=n;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,{get:e(i),set:s(o)})},h3=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),d3=n=>({...n,channelCount:n.numberOfOutputs}),f3=n=>{const{imag:t,real:e}=n;return t===void 0?e===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(e,()=>0),real:e}:e===void 0?{...n,imag:t,real:Array.from(t,()=>0)}:{...n,imag:t,real:e}},Sy=(n,t,e)=>{try{n.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;Sy(n,t,e+1e-7)}},p3=n=>{const t=n.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},m3=n=>{const t=n.createBufferSource(),e=n.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},g3=n=>{const t=n.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Jd=n=>{const t=n.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},xy=n=>{const t=n.createBuffer(1,1,44100),e=n.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},Qd=n=>{const t=n.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},_3=n=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(n)}finally{t.close(),e.close()}},v3=n=>{n.start=(t=>(e=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?t.call(n,e,0,0):t.call(n,e,o,r)})(n.start)},My=(n,t)=>{const e=t.createGain();n.connect(e);const s=(r=>()=>{r.call(n,e),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Zi(n,e),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{e.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Ki=(n,t)=>e=>{const s={value:n};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(n,e):t.handleEvent.call(n,e)},y3=qP(Gr),b3=GP(Gr),w3=sD(Al),Cy=new WeakMap,T3=wD(Cy),ts=PR(new Map,new WeakMap),ms=o3(),Ey=KD(ts,bs),tf=bD(Je),Ie=W5(Je,tf,Fr),S3=ZP(Ey,Gt,Ie),jt=xD(El),Gs=x5(ms),Vt=UD(Gs),Ay=new WeakMap,Ny=fD(Ki),pa=e5(ms),ef=FD(pa),nf=LD(ms),ky=qD(ms),jo=s5(ms),ae=wR(BP(sy),WP(y3,b3,Ac,w3,Nc,Je,T3,aa,Gt,Gr,Is,Fr,Za),ts,ID(vh,Nc,Je,Gt,Bo,Is),bs,Nl,en,QR(Ac,vh,Je,Gt,Bo,jt,Is,Vt),oD(Ay,Je,Xn),Ny,jt,ef,nf,ky,Vt,jo),x3=XP(ae,S3,bs,Ey,jt,Vt),sf=new WeakSet,qm=JD(ms),Oy=zR(new Uint32Array(1)),rf=a3(Oy,bs),of=c3(Oy),Iy=JP(sf,ts,en,qm,Gs,Q5(qm),rf,of),kl=zP(dn),Py=G5(tf,la,Fr),ws=BR(Py),Ji=t5(kl,ts,p3,m3,g3,Jd,xy,Qd,v3,l3(fa),My),Ts=$5(TD(la),Py),M3=eR(ws,Ji,Gt,Ts,Ie),es=TR(UP(ry),Ay,zd,SR,PP,RP,DP,VP,FP,mh,ey,pa,Sy),C3=tR(ae,M3,es,xe,Ji,jt,Vt,Ki),E3=uR(ae,hR,bs,xe,n5(dn,fa),jt,Vt,Ie),A3=IR(ws,vy,Gt,Ts,Ie),zr=Y5(Cy),N3=OR(ae,es,A3,Nl,vy,jt,Vt,zr),yr=XD(Gr,nf),k3=u3(xe,yr),br=u5(pa,k3),O3=VR(br,Gt,Ie),I3=DR(ae,O3,br,jt,Vt),P3=qR(ha,Gt,Ie),R3=LR(ae,P3,ha,jt,Vt,d3),D3=f5(kl,Ji,dn,yr),Qi=d5(kl,ts,D3,Jd,Qd),V3=GR(ws,Qi,Gt,Ts,Ie),F3=WR(ae,es,V3,Qi,jt,Vt,Ki),Ry=p5(en,fa),L3=XR(Ry,Gt,Ie),q3=YR(ae,L3,Ry,jt,Vt,zr),B3=nD(ws,yy,Gt,Ts,Ie),U3=eD(ae,es,B3,yy,jt,Vt,zr),Dy=m5(en),j3=uD(ws,Dy,Gt,Ts,Ie),$3=lD(ae,es,j3,Dy,en,jt,Vt,zr),W3=vD(ws,dn,Gt,Ts,Ie),G3=_D(ae,es,W3,dn,jt,Vt),z3=y5(Nl,xe,da,en),Ol=z5(ts,dn,da,e3(dn,Gs)),H3=OD(Ji,Gt,Gs,Ie,Ol),Y3=g5(z3),X3=ND(ae,Y3,H3,jt,Vt,zr),Z3=dR(es,br,Qi,da,en,wy,Vt,fa),Vy=new WeakMap,K3=YD(E3,Z3,Ny,Vt,Vy,Ki),Fy=M5(kl,ts,Jd,xy,Qd,My),J3=F5(ws,Fy,Gt,Ts,Ie),Q3=V5(ae,es,Fy,J3,jt,Vt,Ki),Ly=jR(Ji),tV=I5(Ly,xe,dn,Ty,yr),Il=O5(Ly,xe,tV,Ty,yr,pa,fa),eV=E5(Ac,xe,br,dn,da,Il,en,Nc,wy,yr),qy=C5(eV),nV=B5(ws,br,Qi,dn,qy,Gt,Gs,Ts,Ie,Ol),sV=q5(ae,es,qy,nV,jt,Vt,zr),rV=A5(bs),iV=j5(rV,jt,new WeakSet,f3),oV=k5(br,ha,dn,Il,en,yr),By=N5(oV,en),aV=J5(ws,By,Gt,Ts,Ie),cV=K5(ae,es,By,aV,jt,Vt),lV=i3(Il,Gt,Ie),uV=r3(ae,xe,Il,lV,jt,Vt,zr),Uy=jD(ms),af=pD(ms),jy=new WeakMap,hV=MD(jy,Gs),dV=Uy?$P(ts,en,dD(ms),af,mD(LP),jt,hV,Vt,jo,new WeakMap,new WeakMap,t3(jo,Gs),ms):void 0,fV=BD(ef,Vt),pV=JR(sf,ts,KR,hD,new WeakSet,jt,fV,Cc,Uo,rf,of),$y=NR(dV,x3,Iy,C3,N3,I3,R3,F3,q3,pV,U3,$3,G3,X3,K3,Q3,sV,iV,cV,uV),mV=$D(ae,b5,jt,Vt),gV=GD(ae,w5,jt,Vt),_V=zD(ae,T5,jt,Vt),vV=S5(xe,Vt),yV=HD(ae,vV,jt),bV=lR($y,xe,en,n3,mV,gV,_V,yV,pa),cf=CD(Vy),wV=HP(cf),Wy=UR(bs),TV=rD(cf),Gy=aD(bs),zy=new WeakMap,SV=yD(zy,Xn),xV=l5(Wy,bs,xe,br,ha,Qi,dn,da,en,Gy,af,SV,yr),MV=i5(xe,xV,dn,en,yr),CV=AR(ws,Wy,Ji,br,ha,Qi,dn,TV,Gy,af,Gt,jo,Gs,Ts,Ie,Ol),EV=SD(jy),AV=H5(zy),Bm=Uy?MR(wV,ae,es,CV,MV,Je,EV,jt,Vt,jo,h3,AV,_3,Ki):void 0,NV=ZR(en,Gs),kV=X5(sf,ts,tf,cf,Ol,Cc,rf,of),OV=R5($y,ts,xe,NV,kV),IV=PD(El,ef),PV=RD(Gd,nf),RV=DD(zd,ky),DV=VD(El,Vt);function On(n){return n===void 0}function bt(n){return n!==void 0}function VV(n){return typeof n=="function"}function hr(n){return typeof n=="number"}function Or(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function FV(n){return typeof n=="boolean"}function Hn(n){return Array.isArray(n)}function Fs(n){return typeof n=="string"}function La(n){return Fs(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ht(n,t){if(!n)throw new Error(t)}function Ls(n,t,e=1/0){if(!(t<=n&&n<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${n}`)}function Hy(n){!n.isOffline&&n.state!=="running"&&Pl('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Yy=!1,Um=!1;function jm(n){Yy=n}function LV(n){On(n)&&Yy&&!Um&&(Um=!0,Pl("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Xy=console;function qV(...n){Xy.log(...n)}function Pl(...n){Xy.warn(...n)}function BV(n){return new bV(n)}function UV(n,t,e){return new OV(n,t,e)}const _n=typeof self=="object"?self:null,jV=_n&&(_n.hasOwnProperty("AudioContext")||_n.hasOwnProperty("webkitAudioContext"));function $V(n,t,e){return ht(bt(Bm),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(_n==null?void 0:_n.BaseAudioContext)?_n==null?void 0:_n.AudioWorkletNode:Bm)(n,t,e)}function ns(n,t,e,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(t,e,i):o(t,e))||i);return r>3&&i&&Object.defineProperty(t,e,i),i}function pe(n,t,e,s){function r(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,t||[])).next())})}class WV{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Lr(n){return RV(n)}function ar(n){return PV(n)}function Ka(n){return DV(n)}function ti(n){return IV(n)}function GV(n){return n instanceof Iy}function zV(n,t){return n==="value"||Lr(t)||ar(t)||GV(t)}function Si(n,...t){if(!t.length)return n;const e=t.shift();if(Or(n)&&Or(e))for(const s in e)zV(s,e[s])?n[s]=e[s]:Or(e[s])?(n[s]||Object.assign(n,{[s]:{}}),Si(n[s],e[s])):Object.assign(n,{[s]:e[s]});return Si(n,...t)}function HV(n,t){return n.length===t.length&&n.every((e,s)=>t[s]===e)}function ot(n,t,e=[],s){const r={},i=Array.from(t);if(Or(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(Si(r,{[s]:i[0]}),e.splice(e.indexOf(s),1),i.shift())),i.length===1&&Or(i[0]))Si(r,i[0]);else for(let o=0;o<e.length;o++)bt(i[o])&&(r[e[o]]=i[o]);return Si(n,r)}function YV(n){return n.constructor.getDefaults()}function xi(n,t){return On(n)?t:n}function $m(n,t){return t.forEach(e=>{Reflect.has(n,e)&&delete n[e]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class zs{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||_n&&this.toString()===_n.TONE_DEBUG_CLASS)&&qV(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}zs.version=ty;const lf=1e-6;function Di(n,t){return n>t+lf}function Sh(n,t){return Di(n,t)||Bn(n,t)}function Pc(n,t){return n+lf<t}function Bn(n,t){return Math.abs(n-t)<lf}function XV(n,t,e){return Math.max(Math.min(n,e),t)}class In extends zs{constructor(){super(),this.name="Timeline",this._timeline=[];const t=ot(In.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ht(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];ht(Sh(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Bn(this._timeline[e].time,t)){for(let s=e;s>=0&&Bn(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Sh(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Bn(a[e],t)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Bn(u[e],t))o=l;else break}return o}else{if(Pc(a[e],t)&&Di(c[e],t))return o;Di(a[e],t)?i=o:s=o+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),i=this._search(e);return r!==-1&&i!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&Bn(this._timeline[s].time,t)){let r=s;for(let i=s;i>=0&&Bn(this._timeline[i].time,t);i--)r=i;this._iterate(i=>{e(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Zy=[];function Rl(n){Zy.push(n)}function ZV(n){Zy.forEach(t=>t(n))}const Ky=[];function Dl(n){Ky.push(n)}function KV(n){Ky.forEach(t=>t(n))}class ma extends zs{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{On(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(On(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(On(e))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===e&&i.splice(o,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(ma.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Jy extends ma{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ga extends Jy{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new In,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=ot(ga.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=BV({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new WV(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(ZV(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ht(ti(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ht(ti(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ht(ti(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ht(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ht(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ht(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ht(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return $V(this.rawContext,t,e)}addAudioWorkletModule(t){return pe(this,void 0,void 0,function*(){ht(bt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return pe(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ti(this._context)?this._context.resume():Promise.resolve()}close(){return pe(this,void 0,void 0,function*(){ti(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&KV(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:i+e})};return r(),s}}class JV extends Jy{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return pe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Yt(n,t){Hn(t)?t.forEach(e=>Yt(n,e)):Object.defineProperty(n,t,{enumerable:!0,writable:!1})}function uf(n,t){Hn(t)?t.forEach(e=>uf(n,e)):Object.defineProperty(n,t,{writable:!0})}const Rt=()=>{};class $t extends zs{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Rt;const t=ot($t.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Fs(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Rt,onload:Rt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:An().sampleRate}set(t){return t instanceof $t?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return pe(this,void 0,void 0,function*(){const e=$t.load(t).then(s=>{this.set(s),this.onload(this)});$t.downloads.push(e);try{yield e}finally{const s=$t.downloads.indexOf(e);$t.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Hn(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,i=An(),o=i.createBuffer(s,r,i.sampleRate),a=!e&&s===1?[t]:t;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(hr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)e[o]+=i[o]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(hr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){ht(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);ht(s<r,"The start time must be less than the end time");const i=r-s,o=An().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new $t(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new $t().fromArray(t)}static fromUrl(t){return pe(this,void 0,void 0,function*(){return yield new $t().load(t)})}static load(t){return pe(this,void 0,void 0,function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const c=e[1].split("|");let l=c[0];for(const u of c)if($t.supportsType(u)){l=u;break}t=t.replace(e[0],l)}const s=$t.baseUrl===""||$t.baseUrl.endsWith("/")?$t.baseUrl:$t.baseUrl+"/",r=document.createElement("a");r.href=s+t,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${t}`);const o=yield i.arrayBuffer();return yield An().decodeAudioData(o)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return pe(this,void 0,void 0,function*(){for(yield Promise.resolve();$t.downloads.length;)yield $t.downloads[0]})}}$t.baseUrl="";$t.downloads=[];class hf extends ga{constructor(){super({clockSource:"offline",context:Ka(arguments[0])?arguments[0]:UV(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Ka(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ka(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return pe(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return pe(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new $t(e)})}close(){return Promise.resolve()}}const Qy=new JV;let li=Qy;function An(){return li===Qy&&jV&&QV(new ga),li}function QV(n,t=!1){t&&li.dispose(),ti(n)?li=new ga(n):Ka(n)?li=new hf(n):li=n}if(_n&&!_n.TONE_SILENCE_LOGGING){const t=` * Tone.js v${ty} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function tF(n){return Math.pow(10,n/20)}function Eo(n){return 20*(Math.log(n)/Math.LN10)}function t1(n){return Math.pow(2,n/12)}let Vl=440;function eF(){return Vl}function nF(n){Vl=n}function xh(n){return Math.round(e1(n))}function e1(n){return 69+12*Math.log2(n/Vl)}function sF(n){return Vl*Math.pow(2,(n-69)/12)}class df extends zs{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof df&&this.fromType(this._val),On(this._val))return this._noArg();if(Fs(this._val)&&On(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Or(this._val)){let t=0;for(const e in this._val)if(bt(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(bt(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Fs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class $n extends df{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new $n(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);e.push(o+"n."),e.push(o+"n"),e.push(o+"t")}e.push("0");let s=e[0],r=new $n(this.context,e[0]).toSeconds();return e.forEach(i=>{const o=new $n(this.context,i).toSeconds();Math.abs(o-t)<Math.abs(r-t)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return xh(this.toFrequency())}_now(){return this.context.now()}}class yn extends $n{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return eF()}static set A4(t){nF(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:yn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=rF[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:yn.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new yn(this.context,this.valueOf()*t1(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return xh(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/yn.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),iF[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return sF(t)}static ftom(t){return xh(t)}}const rF={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},iF=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Mh(n,t){return new yn(An(),n,t)}class Ao extends $n{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class un extends zs{constructor(){super();const t=ot(un.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:An()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return LV(t),new $n(this.context,t).toSeconds()}toFrequency(t){return new yn(this.context,t).toFrequency()}toTicks(t){return new Ao(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{On(t[s])&&delete e[s]}),e}get(){const t=YV(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];bt(s)&&bt(s.value)&&bt(s.setValueAtTime)?t[e]=s.value:s instanceof un?t[e]=s._getPartialProperties(t[e]):Hn(s)||hr(s)||Fs(s)||FV(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&bt(this[e])&&(this[e]&&bt(this[e].value)&&bt(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof un?this[e].set(t[e]):this[e]=t[e])}),this}}class ff extends In{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return Ls(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===t)return i}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===t)return i}}}class Mt extends un{constructor(){const t=ot(Mt.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ht(bt(t.param)&&(Lr(t.param)||t.param instanceof Mt),"param must be an AudioParam");!Lr(t.param);)t.param=t.param._param;this._swappable=bt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new In(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,bt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(un.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return bt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return bt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return bt(this.maxValue)&&bt(this.minValue)&&Ls(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?tF(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?Eo(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return ht(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,e))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,e):i=this._exponentialInterpolate(r.time,o,s.time,s.value,e)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return ht(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Bn(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return ht(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);ht(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(r),ht(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);const o=s/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(c),e+a*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ht(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));ht(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),i=this._events.getAfter(e);return r&&Bn(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:e+2,o=(i-e)/10;for(let a=e;a<i;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){ht(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,i){return s+(e-s)*Math.exp(-(i-t)/r)}_linearInterpolate(t,e,s,r,i){return e+(r-e)*((i-t)/(s-t))}_exponentialInterpolate(t,e,s,r,i){return e*Math.pow(r/e,(i-t)/(s-t))}}class ct extends un{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return bt(this.input)?Lr(this.input)||this.input instanceof Mt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return bt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return bt(t)&&(t instanceof ct||ar(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ht(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return Hr(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Pl("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return n1(this,t,e,s),this}chain(...t){return $o(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),bt(this.input)&&(this.input instanceof ct?this.input.dispose():ar(this.input)&&this.input.disconnect()),bt(this.output)&&(this.output instanceof ct?this.output.dispose():ar(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function $o(...n){const t=n.shift();n.reduce((e,s)=>(e instanceof ct?e.connect(s):ar(e)&&Hr(e,s),s),t)}function Hr(n,t,e=0,s=0){for(ht(bt(n),"Cannot connect from undefined node"),ht(bt(t),"Cannot connect to undefined node"),(t instanceof ct||ar(t))&&ht(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ht(n.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ct||t instanceof Mt;)bt(t.input)&&(t=t.input);for(;n instanceof ct;)bt(n.output)&&(n=n.output);Lr(t)?n.connect(t,e):n.connect(t,e,s)}function n1(n,t,e=0,s=0){if(bt(t))for(;t instanceof ct;)t=t.input;for(;!ar(n);)bt(n.output)&&(n=n.output);Lr(t)?n.disconnect(t,e):ar(t)?n.disconnect(t,e,s):n.disconnect()}class Zt extends ct{constructor(){const t=ot(Zt.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Mt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Yt(this,"gain")}static getDefaults(){return Object.assign(ct.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Vi extends ct{constructor(t){super(t),this.onended=Rt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Zt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(ct.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Rt})}_startGain(t,e=1){ht(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ht(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Rt&&(this.onended(this),this.onended=Rt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ht(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Rt,this}}class pf extends Vi{constructor(){const t=ot(pf.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Hr(this._source,this._gainNode),this.offset=new Mt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Vi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Bt extends ct{constructor(){const t=ot(Bt.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new pf({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ct.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return Fl(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Fl(n,t,e,s){(t instanceof Mt||Lr(t)||t instanceof Bt&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Bt&&(t.overridden=!0)),Hr(n,t,e,s)}class mf extends Mt{constructor(){const t=ot(mf.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new In(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Mt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+e,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max((e-r.time)*10,1)),o=(e-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,e,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(On(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),a=Math.sqrt(Math.pow(r,2)-2*o*(e.ticks-t)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class gf extends Bt{constructor(){const t=ot(gf.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new mf({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Bt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class _f extends un{constructor(){const t=ot(_f.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new ff,this._tickOffset=new In,this._ticksAtTime=new In,this._secondsAtTime=new In,this.frequency=new gf({context:this.context,units:t.units,value:t.frequency}),Yt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},un.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),bt(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let i=r||e,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,t+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Bn(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<e;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ll extends un{constructor(){const t=ot(Ll.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Rt,this._lastUpdate=0,this._state=new ff("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new _f({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Yt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(un.getDefaults(),{callback:Rt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Hy(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ma.mixin(Ll);class to extends ct{constructor(){const t=ot(to.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Zt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Yt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(ct.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class vf extends ct{constructor(){const t=ot(vf.getDefaults(),arguments);super(t),this.name="Destination",this.input=new to({context:this.context}),this.output=new Zt({context:this.context}),this.volume=this.input.volume,$o(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ct.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),$o(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Rl(n=>{n.destination=new vf({context:n})});Dl(n=>{n.destination.dispose()});class oF extends ct{constructor(){super(...arguments),this.name="Listener",this.positionX=new Mt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Mt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Mt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Mt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Mt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Mt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Mt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Mt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Mt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ct.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Rl(n=>{n.listener=new oF({context:n})});Dl(n=>{n.listener.dispose()});class yf extends zs{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=ot(yf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Rt,onload:Rt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ht(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=Rt,r=Rt){return Fs(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new $t(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new $t(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ui extends Ao{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class aF extends un{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new In,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Rl(n=>{n.draw=new aF({context:n})});Dl(n=>{n.draw.dispose()});class cF extends zs{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ht(bt(t.time),"Events must have a time property"),ht(bt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new lF(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class lF{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class uF extends zs{constructor(t){super(),this.name="TimelineValue",this._timeline=new In({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class qs extends ct{constructor(){super(ot(qs.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return Fl(this,t,e,s),this}}class _a extends qs{constructor(){const t=ot(_a.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Hn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):VV(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Bt.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,i=e;r<i;r++){const o=r/(i-1)*2-1;s[r]=t(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));ht(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class bf extends qs{constructor(){const t=ot(bf.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new _a({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(qs.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class dr{constructor(t,e){this.id=dr._eventId++,this._remainderTime=0;const s=Object.assign(dr.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Rt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}dr._eventId=0;class wf extends dr{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(wf.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},dr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Pc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ui(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Pc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ui(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);Di(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ql extends un{constructor(){const t=ot(ql.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new uF(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new In,this._repeatedEvents=new cF,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new Ll({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Yt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(un.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new ui(this.context,this._swingTicks*2/3).toSeconds()*r}jm(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),jm(!1)}schedule(t,e){const s=new dr(this,{callback:t,time:new Ao(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const i=new wf(this,{callback:t,duration:new $n(this.context,r).toTicks(),interval:new $n(this.context,e).toTicks(),time:new Ao(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const s=new dr(this,{callback:t,once:!0,time:new Ao(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ui(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return bt(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Hn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new $n(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new $n(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ui(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ui(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),i=e+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(t.units==="time"){const c=.015625/i,l=new Zt(c),u=new bf(-1),h=new Zt(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/i:e=0);const a=new Zt(e);return r.connect(a),a.connect(t._param),o.push(a),this._syncedSignals.push({initial:t.value,nodes:o,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),uf(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ma.mixin(ql);Rl(n=>{n.transport=new ql({context:n})});Dl(n=>{n.transport.dispose()});class Tn extends ct{constructor(t){super(t),this.input=void 0,this._state=new ff("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Rt,this._syncedStop=Rt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new to({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Yt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(ct.getDefaults(),{mute:!1,onstop:Rt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=On(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ht(Di(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(xi(e,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,e,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Hy(this.context),this._start(r,e,s);return this}stop(t){let e=On(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||bt(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(Di(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Rt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bl extends Vi{constructor(){const t=ot(Bl.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Hr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Mt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new $t(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Vi.getDefaults(),{url:new $t,loop:!1,loopEnd:0,loopStart:0,onload:Rt,onerror:Rt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){ht(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),this.loop?e=xi(e,this.loopStart):e=xi(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Sh(o,a)&&(o=(o-c)%l+c),Bn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Pc(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),bt(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Yr(n,t){return pe(this,void 0,void 0,function*(){const e=t/n.context.sampleRate,s=new hf(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Tf extends Vi{constructor(){const t=ot(Tf.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Hr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Mt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Mt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Yt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ne extends Tn{constructor(){const t=ot(ne.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Bt({context:this.context,units:"frequency",value:t.frequency}),Yt(this,"frequency"),this.detune=new Bt({context:this.context,units:"cents",value:t.detune}),Yt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new Tf({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return ne._periodicWaveCache.find(e=>e.phase===this._phase&&HV(e.partials,this._partials));{const t=ne._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(bt(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),ne._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),ne._periodicWaveCache.length>100&&ne._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Ls(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(t==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),t=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(t){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}u!==0?(i[c]=-u*Math.sin(e*c),o[c]=u*Math.cos(e*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(t,e,s){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*s)+e[o]*Math.sin(o*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(t,e,o/i*r),s);return XV(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ne._periodicWaveCache=[];class s1 extends qs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new _a({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qr extends Bt{constructor(){const t=ot(qr.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Zt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Bt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ul extends Tn{constructor(){const t=ot(Ul.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new s1({context:this.context}),this._modulationNode=new Zt({context:this.context}),this._carrier=new ne({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ne({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Yt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ne.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class jl extends Tn{constructor(){const t=ot(jl.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Zt({context:this.context,gain:0}),this._carrier=new ne({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Bt({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new ne({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new qr({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Yt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ne.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class va extends Tn{constructor(){const t=ot(va.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Zt({context:this.context,gain:0}),this._thresh=new _a({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Bt({context:this.context,units:"audioRange",value:t.width}),this._triangle=new ne({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Yt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class $l extends Tn{constructor(){const t=ot($l.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Bt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Bt({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Yt(this,["frequency","detune"])}static getDefaults(){return Object.assign(ne.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=e+s*i)}}get count(){return this._oscillators.length}set count(t){if(Ls(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new ne({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):Rt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Wl extends Tn{constructor(){const t=ot(Wl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qr({context:this.context,value:2}),this._pulse=new va({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ne({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Yt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Wm={am:Ul,fat:$l,fm:jl,oscillator:ne,pulse:va,pwm:Wl};class Rc extends Tn{constructor(){const t=ot(Rc.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Bt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Bt({context:this.context,units:"cents",value:t.detune}),Yt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(ne.getDefaults(),jl.getDefaults(),Ul.getDefaults(),$l.getDefaults(),va.getDefaults(),Wl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Wm[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof Wm[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&hr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&hr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Fs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Yr(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Sf extends Bt{constructor(){super(ot(Sf.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Zt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,$o(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Bt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class xf extends qs{constructor(){const t=ot(xf.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new qr({context:this.context,value:t.max-t.min}),this._add=this.output=new Sf({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(qs.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Mf extends qs{constructor(){super(ot(Mf.getDefaults(),arguments)),this.name="Zero",this._gain=new Zt({context:this.context}),this.output=this._gain,this.input=void 0,Hr(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),n1(this.context.getConstant(0),this._gain),this}}class Dc extends ct{constructor(){const t=ot(Dc.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Mt.prototype._fromType,this._toType=Mt.prototype._toType,this._is=Mt.prototype._is,this._clampValue=Mt.prototype._clampValue,this._oscillator=new ne(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Zt({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Bt({context:this.context,units:"audioRange",value:0}),this._zeros=new Mf({context:this.context}),this._a2g=new s1({context:this.context}),this._scaler=this.output=new xf({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Yt(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(ne.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,s=this.max;this._units=t,this.min=e,this.max=s}get state(){return this._oscillator.state}connect(t,e,s){return(t instanceof Mt||t instanceof Bt)&&(this.convert=t.convert,this.units=t.units),Fl(this,t,e,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function r1(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(i){Ls(i,n,t),e.set(this,i)}})}}function Hs(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(i){Ls(this.toSeconds(i),n,t),e.set(this,i)}})}}class Gl extends Tn{constructor(){const t=ot(Gl.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new $t({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Tn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Rt,onerror:Rt,playbackRate:1,reverse:!1})}load(t){return pe(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Rt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=xi(e,this._loopStart):e=xi(e,0);const r=this.toSeconds(e),i=s;s=xi(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,t=this.toSeconds(t);const a=new Bl({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&On(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Ls(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Ls(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ns([Hs(0)],Gl.prototype,"fadeIn",void 0);ns([Hs(0)],Gl.prototype,"fadeOut",void 0);class wr extends ct{constructor(){const t=ot(wr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Bt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(ct.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Fs(t))return t;{let s;for(s in qa)if(qa[s][e]===t)return s;return t}}_setCurve(t,e,s){if(Fs(s)&&Reflect.has(qa,s)){const r=qa[s];Or(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(Hn(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,t,r,e)}if(i&&this.sustain<1){const a=e*this.sustain,c=t+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(ht(Hn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return Fl(this,t,e,s),this}asArray(){return pe(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new hf(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(e*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ns([Hs(0)],wr.prototype,"attack",void 0);ns([Hs(0)],wr.prototype,"decay",void 0);ns([r1(0,1)],wr.prototype,"sustain",void 0);ns([Hs(0)],wr.prototype,"release",void 0);const qa=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],i=6.4;for(t=0;t<127;t++){e=t/127;const d=Math.sin(e*(Math.PI*2)*i-Math.PI/2)+1;r[t]=d/10+e*.83}r[127]=1;const o=[],a=5;for(t=0;t<128;t++)o[t]=Math.ceil(t/127*a)/a;const c=[];for(t=0;t<128;t++)e=t/127,c[t]=.5*(1-Math.cos(Math.PI*e));const l=[];for(t=0;t<128;t++){e=t/127;const d=Math.pow(e,3)*4+.2,f=Math.cos(d*Math.PI*2*e);l[t]=Math.abs(f*(1-e))}function u(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class Fi extends ct{constructor(){const t=ot(Fi.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new to({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Yt(this,"volume")}static getDefaults(){return Object.assign(ct.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const i=r[e],o=this.context.transport.schedule(a=>{r[e]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const i=this.toSeconds(s),o=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Li extends Fi{constructor(){const t=ot(Li.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Fi.getDefaults(),{detune:0,onsilence:Rt,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof yn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}ns([Hs(0)],Li.prototype,"portamento",void 0);class Cf extends wr{constructor(){super(ot(Cf.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Zt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Wo extends Li{constructor(){const t=ot(Wo.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new Rc(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Cf(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Yt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Li.getDefaults(),{envelope:Object.assign($m(wr.getDefaults(),Object.keys(ct.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign($m(Rc.getDefaults(),[...Object.keys(Tn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Vc extends ct{constructor(){const t=ot(Vc.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Mt({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new Mt({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(ct.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){ht(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let o=0;o<t;o++){const c=Math.pow(o/t,2)*19980+20;e[o]=c}const s=new Float32Array(t),r=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ef extends ct{constructor(){const t=ot(Ef.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new Zt({context:this.context}),this.output=new Zt({context:this.context}),this._filters=[],this._filters=[],this.Q=new Bt({context:this.context,units:"positive",value:t.Q}),this.frequency=new Bt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Bt({context:this.context,units:"cents",value:t.detune}),this.gain=new Bt({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Yt(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ct.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){ht(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(s=>s.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=hr(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];let r=s.indexOf(e);ht(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new Vc({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,$o(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Vc({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((i,o)=>s[o]*=i)}),e.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),uf(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class zl extends Wo{constructor(){const t=ot(zl.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Yt(this,["oscillator","envelope"])}static getDefaults(){return Si(Li.getDefaults(),Wo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof yn?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ns([r1(0)],zl.prototype,"octaves",void 0);ns([Hs(0)],zl.prototype,"pitchDecay",void 0);const i1=new Set;function Af(n){i1.add(n)}function o1(n,t){const e=`registerProcessor("${n}", ${t})`;i1.add(e)}const hF=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Af(hF);const dF=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Af(dF);const fF=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Af(fF);const pF="feedback-comb-filter",mF=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;o1(pF,mF);class Hl extends Fi{constructor(){const t=ot(Hl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(ht(La(s)||hr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),La(s)){const i=new yn(this.context,s).toMidi();e[i]=t.urls[s]}else hr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new yf({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Fi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Rt,onerror:Rt,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=e1(new yn(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=t1(c+a),d=new Bl({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(e,0,u.duration/h,s),Hn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new yn(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);e=this.toSeconds(e),i.forEach(o=>{o.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(t,i,r),Hn(e)?(ht(Hn(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=e[Math.min(a,e.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,s){if(ht(La(t)||isFinite(t),`note must be a pitch or midi: ${t}`),La(t)){const r=new yn(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}ns([Hs(0)],Hl.prototype,"attack",void 0);ns([Hs(0)],Hl.prototype,"release",void 0);class Nf extends ct{constructor(){const t=ot(Nf.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Mt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Yt(this,"pan")}static getDefaults(){return Object.assign(ct.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const gF="bit-crusher",_F=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;o1(gF,_F);class kf extends ct{constructor(){const t=ot(kf.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ct.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Yl extends ct{constructor(){const t=ot(Yl.getDefaults(),arguments,["type","size"]);super(t),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Zt({context:this.context}),this._split=new kf({context:this.context,channels:t.channels}),this.input.connect(this._split),Ls(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(ct.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,e)=>{const s=this._buffers[e];this._type==="fft"?t.getFloatFrequencyData(s):this._type==="waveform"&&t.getFloatTimeDomainData(s)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((e,s)=>{e.fftSize=t*2,this._buffers[s]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){ht(t==="waveform"||t==="fft",`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(e=>e.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Fc extends ct{constructor(){super(ot(Fc.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Yl({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Of extends Fc{constructor(){const t=ot(Of.getDefaults(),arguments,["smoothing"]);super(t),this.name="Meter",this.input=this.output=this._analyser=new Yl({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(Fc.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Pl("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),s=(this.channels===1?[t]:t).map((r,i)=>{const o=r.reduce((c,l)=>c+l*l,0),a=Math.sqrt(o/r.length);return this._rms[i]=Math.max(a,this._rms[i]*this.smoothing),this.normalRange?this._rms[i]:Eo(this._rms[i])});return this.channels===1?s[0]:s}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class ue extends ct{constructor(){const t=ot(ue.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Zt({context:this.context}),ue._allSolos.has(this.context)||ue._allSolos.set(this.context,new Set),ue._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(ct.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),ue._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ue._soloed.has(this.context)||ue._soloed.set(this.context,new Set),ue._soloed.get(this.context).add(this)}_removeSolo(){ue._soloed.has(this.context)&&ue._soloed.get(this.context).delete(this)}_isSoloed(){return ue._soloed.has(this.context)&&ue._soloed.get(this.context).has(this)}_noSolos(){return!ue._soloed.has(this.context)||ue._soloed.has(this.context)&&ue._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ue._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ue._allSolos=new Map;ue._soloed=new Map;class Xl extends ct{constructor(){const t=ot(Xl.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new Nf({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new to({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Yt(this,["pan","volume"])}static getDefaults(){return Object.assign(ct.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class hi extends ct{constructor(){const t=ot(hi.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new ue({solo:t.solo,context:this.context}),this._panVol=this.output=new Xl({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Yt(this,["pan","volume"])}static getDefaults(){return Object.assign(ct.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return hi.buses.has(t)||hi.buses.set(t,new Zt({context:this.context})),hi.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new Zt({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}hi.buses=new Map;An().transport;An().destination;An().destination;An().listener;An().draw;An();function a1(n){return Ih()?(ng(n),!0):!1}function Ln(n){return typeof n=="function"?n():vt(n)}const vF=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const yF=Object.prototype.toString,bF=n=>yF.call(n)==="[object Object]",ku=(n,t,e)=>Math.min(e,Math.max(t,n)),wF=()=>{};function TF(n,t){function e(...s){return new Promise((r,i)=>{Promise.resolve(n(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(i)})}return e}const c1=n=>n();function SF(n=c1){const t=ge(!0);function e(){t.value=!1}function s(){t.value=!0}const r=(...i)=>{t.value&&n(...i)};return{isActive:qi(t),pause:e,resume:s,eventFilter:r}}function xF(n){return Xc()}function MF(n,t,e={}){const{eventFilter:s=c1,...r}=e;return de(n,TF(s,t),r)}function CF(n,t,e={}){const{eventFilter:s,...r}=e,{eventFilter:i,pause:o,resume:a,isActive:c}=SF(s);return{stop:MF(n,t,{...r,eventFilter:i}),pause:o,resume:a,isActive:c}}function EF(n,t=!0,e){xF()?zc(n,e):t?n():Bi(n)}const Go=vF?window:void 0;function AF(n){var t;const e=Ln(n);return(t=e==null?void 0:e.$el)!=null?t:e}function Ch(...n){let t,e,s,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,s,r]=n,t=Go):[t,e,s,r]=n,!t)return wF;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,h,d,f)=>(u.addEventListener(h,d,f),()=>u.removeEventListener(h,d,f)),c=de(()=>[AF(t),Ln(r)],([u,h])=>{if(o(),!u)return;const d=bF(h)?{...h}:h;i.push(...e.flatMap(f=>s.map(p=>a(u,f,p,d))))},{immediate:!0,flush:"post"}),l=()=>{c(),o()};return a1(l),l}function NF(n){return typeof n=="function"?n:typeof n=="string"?t=>t.key===n:Array.isArray(n)?t=>n.includes(t.key):()=>!0}function kF(...n){let t,e,s={};n.length===3?(t=n[0],e=n[1],s=n[2]):n.length===2?typeof n[1]=="object"?(t=!0,e=n[0],s=n[1]):(t=n[0],e=n[1]):(t=!0,e=n[0]);const{target:r=Go,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=s,c=NF(t);return Ch(r,i,u=>{u.repeat&&Ln(a)||c(u)&&e(u)},o)}function OF(n,t={}){const{immediate:e=!0,fpsLimit:s=void 0,window:r=Go}=t,i=ge(!1),o=s?1e3/s:null;let a=0,c=null;function l(d){if(!i.value||!r)return;a||(a=d);const f=d-a;if(o&&f<o){c=r.requestAnimationFrame(l);return}a=d,n({delta:f,timestamp:d}),c=r.requestAnimationFrame(l)}function u(){!i.value&&r&&(i.value=!0,a=0,c=r.requestAnimationFrame(l))}function h(){i.value=!1,c!=null&&r&&(r.cancelAnimationFrame(c),c=null)}return e&&u(),a1(h),{isActive:qi(i),pause:h,resume:u}}const Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ua="__vueuse_ssr_handlers__",IF=PF();function PF(){return Ua in Ba||(Ba[Ua]=Ba[Ua]||{}),Ba[Ua]}function RF(n,t){return IF[n]||t}function DF(n){return n==null?"any":n instanceof Set?"set":n instanceof Map?"map":n instanceof Date?"date":typeof n=="boolean"?"boolean":typeof n=="string"?"string":typeof n=="object"?"object":Number.isNaN(n)?"any":"number"}const VF={boolean:{read:n=>n==="true",write:n=>String(n)},object:{read:n=>JSON.parse(n),write:n=>JSON.stringify(n)},number:{read:n=>Number.parseFloat(n),write:n=>String(n)},any:{read:n=>n,write:n=>String(n)},string:{read:n=>n,write:n=>String(n)},map:{read:n=>new Map(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n.entries()))},set:{read:n=>new Set(JSON.parse(n)),write:n=>JSON.stringify(Array.from(n))},date:{read:n=>new Date(n),write:n=>n.toISOString()}},Gm="vueuse-storage";function No(n,t,e,s={}){var r;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:c=!0,mergeDefaults:l=!1,shallow:u,window:h=Go,eventFilter:d,onError:f=E=>{console.error(E)},initOnMounted:p}=s,m=(u?_g:ge)(typeof t=="function"?t():t);if(!e)try{e=RF("getDefaultStorage",()=>{var E;return(E=Go)==null?void 0:E.localStorage})()}catch(E){f(E)}if(!e)return m;const g=Ln(t),v=DF(g),w=(r=s.serializer)!=null?r:VF[v],{pause:x,resume:T}=CF(m,()=>b(m.value),{flush:i,deep:o,eventFilter:d});h&&a&&EF(()=>{e instanceof Storage?Ch(h,"storage",S):Ch(h,Gm,O),p&&S()}),p||S();function _(E,C){if(h){const k={key:n,oldValue:E,newValue:C,storageArea:e};h.dispatchEvent(e instanceof Storage?new StorageEvent("storage",k):new CustomEvent(Gm,{detail:k}))}}function b(E){try{const C=e.getItem(n);if(E==null)_(C,null),e.removeItem(n);else{const k=w.write(E);C!==k&&(e.setItem(n,k),_(C,k))}}catch(C){f(C)}}function y(E){const C=E?E.newValue:e.getItem(n);if(C==null)return c&&g!=null&&e.setItem(n,w.write(g)),g;if(!E&&l){const k=w.read(C);return typeof l=="function"?l(k,g):v==="object"&&!Array.isArray(k)?{...g,...k}:k}else return typeof C!="string"?C:w.read(C)}function S(E){if(!(E&&E.storageArea!==e)){if(E&&E.key==null){m.value=g;return}if(!(E&&E.key!==n)){x();try{(E==null?void 0:E.newValue)!==w.write(m.value)&&(m.value=y(E))}catch(C){f(C)}finally{E?Bi(T):T()}}}}function O(E){S(E.detail)}return m}function Mi(n,t,e){if(typeof n=="function"||Rs(n))return wt(()=>ku(Ln(n),Ln(t),Ln(e)));const s=ge(n);return wt({get(){return s.value=ku(s.value,Ln(t),Ln(e))},set(r){s.value=ku(r,Ln(t),Ln(e))}})}const re=Jt({base:55,freq:Mi(No("drone-freq",110),27.5,220),started:!1,stopped:!0,filterFreq:No("drone-filter-freq",1e3),volume:No("drone-vol",.5),note:wt(()=>Mh(re.freq).toNote()),pitch:wt({get(){return Math.round((Bv(re.freq)+72)%12)},set(n){re.freq=II(n-36)}}),cents:wt(()=>BF(re.freq)%1200),centDiff:wt(()=>re.cents-re.pitch*100),color:wt(()=>oa(re.pitch,0))}),us=Zn({initiated:!1});function l1(){us.gain=new Zt(re.volume).toDestination(),us.filter=new Ef(re.filterFreq).connect(us.gain)}function FF(){return us.initiated||(l1(),us.initiated=!0,re.started=!0,kF(" ",n=>{n.preventDefault(),re.stopped=!re.stopped}),de(()=>re.volume,n=>{us.gain.gain.targetRampTo(n,1)}),de(()=>re.filterFreq,n=>{us.filter.frequency.targetRampTo(n,.1)})),re}let Ou=0;function LF(n){const t=Zn({}),e=Jt({play:!1,active:!1,vol:Mi(No(`drone-${n}-vol`,.8),0,1),pan:Mi(No(`drone-${n}-pan`,0),-1,1),freq:wt(()=>re.freq*Math.pow(2,n/12)),note:wt(()=>Mh(e.freq).toNote()),color:wt(()=>oa(Mh(e.freq).toMidi()-9,0)),lfo:0,panning:0}),s=am({param:`drone-${n}-vol`,number:5+Ou});de(s,a=>{e.vol=a,a>0&&(e.play=!0)});const r=am({param:`drone-${n}-pan`,number:6+Ou});de(r,a=>{e.pan=(a-.5)*2}),Ou+=2,de(()=>re.stopped,a=>{a?e.play=!1:e.active&&(e.play=!0)}),de(()=>e.play,a=>{a?(t.synth||(us.initiated||(l1(),us.initiated=!0,re.started=!0),i(),o()),e.active=!0,re.stopped=!1,t.synth.triggerAttack(e.freq)):t.synth&&t.synth.triggerRelease()});function i(){t.meter=new Of({normalRange:!0}),t.panner=new Xl({volume:Eo(re.volume)}).connect(us.filter),t.lfo=new Dc(Math.random()*.5+.01,-.25,.25).connect(t.panner.pan).start(),t.lfoVol=new Dc(Math.random()*.1+.001,-20,0).connect(t.panner.volume).connect(t.meter).start(),t.synth=new Wo({envelope:{attack:2,sustain:1,release:4},oscillator:{type:"sawtooth32"},volume:Eo(e.vol)-10}).connect(t.panner)}function o(){de(()=>e.freq,a=>{t.synth.frequency.targetRampTo(a)}),de(()=>e.vol,a=>{t.synth.volume.exponentialRampTo(Eo(a)-10,1)}),de(()=>e.pan,a=>{t.panner.pan.targetRampTo(a,1)}),OF(()=>{e.lfo=t.meter.getValue()})}return Ag(()=>{t.synth&&t.synth.triggerRelease()}),e}function qF(n,t=re.base){return t*Math.pow(2,n/12)}function BF(n,t=0){return Math.floor(1200*Math.log(n/qF(t))/Math.log(2))}const UF={class:"text-2xl z-100"},jF={__name:"PitchDroneVoice",props:{interval:{type:Number,default:0}},setup(n){const e=LF(n.interval);function s(i,o){i.tap&&(e.play=!e.play,e.active=e.play),e.vol-=o[1]/400,e.pan+=o[0]/100}const r=ge();return Kh({onDrag(i){var o;(o=i==null?void 0:i.event)==null||o.preventDefault(),s(i,i.delta)},onWheel(i){var o;(o=i==null?void 0:i.event)==null||o.preventDefault(),s(i,i.velocities.map(a=>-a))}},{domTarget:r,eventOptions:{passive:!1}}),(i,o)=>(sn(),Vn("div",{class:"relative cursor-pointer rounded-xl overflow-hidden text-center font-bold border-6 touch-none flex items-center justify-center",ref_key:"control",ref:r,style:cs({borderColor:vt(e).play?vt(e).color:"#3333"})},[Ct("div",{class:"vol absolute left-0 right-0 bottom-0 bg-dark-100 bg-opacity-30 border-t-4",style:cs({borderColor:vt(e).color,height:vt(e).vol*100+"%",opacity:vt(e).play?1:.2})},null,4),Ct("div",{class:"vol absolute left-0 right-0 bottom-0 bg-dark-900 bg-opacity-20 border-t-1",style:cs({height:vt(e).vol*100*vt(e).lfo+"%",opacity:vt(e).play?1:.2,backgroundColor:vt(e).color})},null,4),Ct("div",{class:"pan absolute left-0 top-0 bottom-0 border-r-2",style:cs({width:vt(e).pan*50+50+"%",opacity:vt(e).play?1:.2})},null,4),Ct("div",UF,Ns(vt(e).note),1)],4))}},$F=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},WF={viewBox:"-2 -2 104 124"},GF={stroke:"currentColor"},zF=["stroke","stroke-dashoffset"],HF=["transform"],YF={transform:"translate(50,50)","text-anchor":"middle","dominant-baseline":"middle",fill:"currentColor"},XF=["transform"],ZF={transform:"translate(0,20)"},KF={class:"font-bold",transform:"translate(0,58)"},JF=45,QF={__name:"ControlRotary",props:mb({max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1},param:{type:String,default:"param"},unit:{type:String,default:""},fixed:{type:Number,default:1},cc:{type:Number,default:0},channel:{type:Number,default:0}},{modelValue:{default:50},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,e=Lb(n,"modelValue"),s=Jt({internal:Mi(0,0,100),initial:wt(()=>(e.value-t.min)/(t.max-t.min)*100)}),r=wt({get:()=>Math.round((s.internal/100*(t.max-t.min)+t.min)/t.step)*t.step,set:a=>{s.internal=(a-t.min)/(t.max-t.min)*100}});de(e,a=>{r.value=a},{immediate:!0});const i=ge();Kh({onDrag:({delta:[a,c],dragging:l,shiftKey:u,event:h})=>{h&&h.preventDefault();const d=u?12:h.type==="wheel"?-8:2;s.internal=Mi(0,s.internal-c/d+a/d,100),e.value=r.value},onWheel:({delta:[a,c],event:l})=>{l&&l.preventDefault(),s.internal=Mi(0,s.internal+c/8-a/8,100),e.value=r.value}},{wheel:{preventWindowScrollY:!0},eventOptions:{capture:!1,passive:!1},domTarget:i});const o=Math.PI*2*JF-50;return(a,c)=>(sn(),Vn("div",{class:"knob",ref_key:"knob",ref:i,onDblclick:c[0]||(c[0]=l=>{s.internal=s.initial,e.value=r.value})},[c[3]||(c[3]=Ct("div",{class:"i-ph-arrows-horizontal absolute text-10px top-14px opacity-70"},null,-1)),(sn(),Vn("svg",WF,[Ct("g",GF,[c[2]||(c[2]=Ct("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:"#9996","stroke-width":"8","stroke-linecap":"round"},null,-1)),Ct("path",{d:"M25,90 a 45,45,1,1,1,50,0",fill:"none",stroke:`hsla(${s.internal*3.6}deg,70%,50%,0.8)`,"stroke-width":"12","stroke-linecap":"round","stroke-dasharray":o,"stroke-dashoffset":o-o*(s.internal/100)},null,8,zF),Ct("g",{transform:`translate(50,52.5) rotate(${s.internal*2.9}) `},c[1]||(c[1]=[Ct("circle",{"stroke-width":"2",fill:"none",r:38,opacity:"0.6"},null,-1)]),8,HF)]),Ct("g",YF,[Ct("text",{class:"font-bold text-2xl",transform:`translate(0,${n.unit?-3:5})`},[fb(a.$slots,"default",{},()=>[Ct("tspan",null,Ns(r.value.toFixed(n.fixed)),1)])],8,XF),Ct("text",ZF,[Ct("tspan",null,Ns(n.unit),1)]),Ct("text",KF,[Ct("tspan",null,Ns(n.param.toUpperCase()),1)])])]))],544))}},zm=$F(QF,[["__scopeId","data-v-1534cf19"]]),t4={class:"flex-1 justify-center flex flex-col"},e4={class:"flex-1 flex flex-col gap-1"},n4={class:"flex flex-wrap flex-1"},s4={class:"my-4 flex flex-wrap justify-stretch items-center touch-none"},r4={class:"p-1 text-6xl font-bold"},i4={class:"flex flex-col text-md"},o4={class:"p-0"},a4={class:"p-0"},c4={class:"controls min-w-10em flex-1 my-2 p-2 flex flex-wrap items-center justify-center is-group gap-2"},l4={key:0,class:"i-la-stop"},u4={key:1,class:"i-la-play"},h4={class:"notes w-full text-sm font-bold text-center flex flex-wrap"},d4=["onClick"],f4={__name:"App",setup(n){const t=FF(),e=Jt({fifths:{title:"5P",voices:[7,19,31]},fourths:{title:"4P",voices:[5,17,29]},octave:{title:"8P",voices:[-12,0,12]}}),s=ge();return Kh({onDrag(r){var i;(i=r==null?void 0:r.event)==null||i.preventDefault(),t.freq+=r.delta[0]/10},onWheel(r){var i;(i=r==null?void 0:r.event)==null||i.preventDefault(),t.freq-=r.velocities[0]/10}},{domTarget:s,eventOptions:{passive:!1}}),(r,i)=>(sn(),Vn("div",{class:"flex flex-col items-stretch transition-all duration-500 ease-out select-none rounded-3xl shadow-xl border-8 p-1 w-full h-full",style:cs({borderColor:vt(t).color})},[Ct("div",t4,[Ct("div",e4,[(sn(!0),Vn(He,null,nu(e,o=>(sn(),Vn("div",{class:"flex flex-col m-1 flex-1",key:o},[Ct("div",n4,[(sn(!0),Vn(He,null,nu(o.voices,a=>(sn(),ju(jF,{class:"m-2 flex-1",key:a,interval:a},null,8,["interval"]))),128))])]))),128))]),Ct("div",s4,[Ct("div",{class:"flex flex-wrap p-4 mx-2 flex-1 min-w-10em items-center rounded-xl text-white p-2 cursor-pointer transition-all duration-500 ease-out",ref_key:"pitchControl",ref:s,style:cs({backgroundColor:vt(t).color})},[Ct("div",r4,Ns(vt(t).note),1),Ct("div",i4,[Ct("div",o4,Ns(vt(t).centDiff)+"%",1),Ct("div",a4,Ns(vt(t).freq.toFixed(2))+" Hz",1)])],4),Ct("div",c4,[Ct("button",{class:"text-button text-3xl",onClick:i[0]||(i[0]=o=>vt(t).stopped=!vt(t).stopped)},[vt(t).stopped?(sn(),Vn("div",u4)):(sn(),Vn("div",l4))]),Gn(zm,{class:"w-4em",modelValue:vt(t).volume,"onUpdate:modelValue":i[1]||(i[1]=o=>vt(t).volume=o),min:0,max:1,step:.05,param:"VOL"},null,8,["modelValue"]),Gn(zm,{class:"w-4em",modelValue:vt(t).filterFreq,"onUpdate:modelValue":i[2]||(i[2]=o=>vt(t).filterFreq=o),min:55,max:12e3,step:.05,fixed:0,param:"LP"},null,8,["modelValue"])])]),Ct("div",h4,[(sn(!0),Vn(He,null,nu(vt(Cl),(o,a)=>(sn(),Vn("div",{class:"p-2 m-1 flex-1 cursor-pointer rounded-xl",key:o,style:cs({backgroundColor:vt(oa)(a,3,vt(t).pitch==a?1:.2,vt(t).pitch==a?1:.4)}),onClick:c=>vt(t).pitch=a},Ns(o),13,d4))),128))])])],4))}};Ew(f4).mount("#app");</script>
  <style rel="stylesheet" crossorigin>*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:var(--un-default-border-color, #e5e7eb)}:before,:after{--un-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}*,:before,:after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.i-la-play{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 32 32' vertical-align='middle' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M9 5.156v21.688l1.531-1L25.844 16L10.53 6.156zm2 3.657L22.156 16L11 23.188z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;vertical-align:middle;width:1.2em;height:1.2em}.i-la-stop{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 32 32' vertical-align='middle' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M6 6v20h20V6zm2 2h16v16H8z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;vertical-align:middle;width:1.2em;height:1.2em}.i-ph-arrows-horizontal{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 256 256' vertical-align='middle' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='m237.66 133.66l-32 32a8 8 0 0 1-11.32-11.32L212.69 136H43.31l18.35 18.34a8 8 0 0 1-11.32 11.32l-32-32a8 8 0 0 1 0-11.32l32-32a8 8 0 0 1 11.32 11.32L43.31 120h169.38l-18.35-18.34a8 8 0 0 1 11.32-11.32l32 32a8 8 0 0 1 0 11.32'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;vertical-align:middle;width:1.2em;height:1.2em}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.bottom-0{bottom:0}.left-0{left:0}.right-0{right:0}.top-0{top:0}.top-14px{top:14px}.z-100{z-index:100}.m-1{margin:.25rem}.m-2{margin:.5rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.my-4{margin-top:1rem;margin-bottom:1rem}.hidden{display:none}.h-full{height:100%}.h-screen{height:100vh}.max-w-18{max-width:4.5rem}.min-w-10em{min-width:10em}.min-w-16{min-width:4rem}.w-4em{width:4em}.w-full{width:100%}.flex{display:flex}.flex-1{flex:1 1 0%}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.cursor-pointer{cursor:pointer}.cursor-grab{cursor:grab}.active-cursor-grabbing:active{cursor:grabbing}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;user-select:none}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-center{justify-content:center}.justify-stretch{justify-content:stretch}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.border-6{border-width:6px}.border-8{border-width:8px}.border-r-2{border-right-width:2px}.border-t-1{border-top-width:1px}.border-t-4{border-top-width:4px}.border-dark-100{--un-border-opacity:1;border-color:rgb(60 60 60 / var(--un-border-opacity))}.border-dark-100\/50{border-color:#3c3c3c80}.rounded-3xl{border-radius:1.5rem}.rounded-lg{border-radius:.5rem}.rounded-xl{border-radius:.75rem}.bg-dark-100{--un-bg-opacity:1;background-color:rgb(60 60 60 / var(--un-bg-opacity))}.bg-dark-50\/40{background-color:#4a4a4a66}.bg-dark-900{--un-bg-opacity:1;background-color:rgb(15 15 15 / var(--un-bg-opacity))}.bg-light-100\/40\){--un-bg-opacity:1;background-color:rgb(252 252 252 / var(--un-bg-opacity))}.bg-opacity-20{--un-bg-opacity:.2}.bg-opacity-30{--un-bg-opacity:.3}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.text-center{text-align:center}.text-10px{font-size:10px}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-6xl{font-size:3.75rem;line-height:1}.text-sm{font-size:.875rem;line-height:1.25rem}.text-white{--un-text-opacity:1;color:rgb(255 255 255 / var(--un-text-opacity))}.font-bold{font-weight:700}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.opacity-70{opacity:.7}.shadow-xl{--un-shadow:var(--un-shadow-inset) 0 20px 25px -5px var(--un-shadow-color, rgb(0 0 0 / .1)),var(--un-shadow-inset) 0 8px 10px -6px var(--un-shadow-color, rgb(0 0 0 / .1));box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.grayscale{--un-grayscale:grayscale(1);filter:var(--un-blur) var(--un-brightness) var(--un-contrast) var(--un-drop-shadow) var(--un-grayscale) var(--un-hue-rotate) var(--un-invert) var(--un-saturate) var(--un-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-500{transition-duration:.5s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.knob[data-v-1534cf19]{position:relative;min-width:4rem;max-width:4.5rem;display:flex;flex-direction:column;cursor:pointer;cursor:grab;-webkit-user-select:none;user-select:none;align-items:center;overflow:hidden;border-color:#3c3c3c80;border-radius:.5rem;padding:.25rem;text-align:center;touch-action:none}.knob[data-v-1534cf19]:active{cursor:grabbing}.dark .knob[data-v-1534cf19]{border-color:#fcfcfc80}.level[data-v-1534cf19]{position:absolute;bottom:0;width:100%;border-top-width:1px;--un-border-opacity:1;border-color:rgb(60 60 60 / var(--un-border-opacity));background-color:#4a4a4a66}.dark .level[data-v-1534cf19]{--un-border-opacity:1;border-color:rgb(252 252 252 / var(--un-border-opacity));background-color:#fcfcfc66}#app{width:100%;height:100%;padding:.25rem}body{height:100vh;display:flex;align-items:stretch;justify-content:stretch;background-color:#999;width:100%;min-width:320px;min-height:100vh;line-height:1.3;font-family:Commissioner,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:1em;font-weight:400;color:var(--c-text);direction:ltr;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overscroll-behavior:none;overflow:hidden}</style>
</head>

<body>
  <div id="app"></div>
</body>

</html>